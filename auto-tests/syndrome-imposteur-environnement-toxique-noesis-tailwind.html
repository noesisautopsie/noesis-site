<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO -->
  <title>Syndrome Imposteur vs Environnement Toxique — Auto-test NOÉSIS</title>
  <meta name="description" content="Grille d'évaluation clinique (60 items) pour distinguer syndrome de l'imposteur (interne) et invalidation environnementale (externe). Analyse par axes, recommandations et orientation.">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Syndrome Imposteur vs Environnement Toxique — NOÉSIS">
  <meta property="og:description" content="Test clinique 60 questions. Distinguez auto-sabotage interne et toxicité environnementale.">
  <meta property="og:type" content="website">
  
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- React + ReactDOM via CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- Babel Standalone pour JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    /* Styles d'impression PDF optimisés A4 */
    @media print {
      .no-print { display: none !important; }
      .print-only { display: block !important; }
      
      body { 
        background: white !important;
        margin: 0;
        padding: 0;
      }
      
      @page {
        size: A4;
        margin: 12mm 15mm;
      }
      
      .print-container {
        max-width: 100%;
        padding: 0 !important;
        margin: 0 !important;
      }
      
      .print-section {
        padding: 8px 0 !important;
        margin-bottom: 12px !important;
      }
      
      .print-header {
        font-size: 18px !important;
        margin-bottom: 8px !important;
        padding-bottom: 4px !important;
        border-bottom: 2px solid #334155;
      }
      
      .print-subheader {
        font-size: 14px !important;
        margin: 8px 0 4px 0 !important;
      }
      
      .print-text {
        font-size: 11px !important;
        line-height: 1.4 !important;
        margin: 2px 0 !important;
      }
      
      .print-question {
        font-size: 11px !important;
        padding: 3px 0 !important;
        page-break-inside: avoid;
      }
      
      .print-axis-section {
        page-break-inside: avoid;
        margin-bottom: 10px !important;
      }
      
      .print-score-box {
        padding: 6px !important;
        margin: 4px 0 !important;
        border: 1px solid #e2e8f0;
        border-radius: 4px;
      }
      
      .print-reco {
        font-size: 11px !important;
        padding: 2px 0 2px 16px !important;
        margin: 2px 0 !important;
      }
      
      .print-axis-badge {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 10px !important;
        font-weight: 700;
        color: white;
        margin-right: 6px;
      }
    }
    
    .print-only {
      display: none;
    }
  </style>
</head>
<body class="m-0 p-0">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo, useCallback } = React;

    // ============================================================
    // CONFIGURATION
    // ============================================================

    const DIMENSIONS = [
      { key: "auto", label: "Auto-dévalorisation cognitive", color: "rose" },
      { key: "perf", label: "Sur-contrôle & perfectionnisme", color: "amber" },
      { key: "valid", label: "Validation externe & comparaisons", color: "sky" },
      { key: "climat", label: "Climat professionnel invalidant", color: "fuchsia" },
      { key: "neuro", label: "Réponses neuro-émotionnelles", color: "violet" },
      { key: "resil", label: "Régulation & résilience", color: "emerald" },
    ];

    const CHOICES = [
      { value: 0, label: "Jamais", anchor: "0 fois / 6 mois" },
      { value: 1, label: "Parfois", anchor: "1-3× / mois" },
      { value: 2, label: "Souvent", anchor: "1-3× / semaine" },
      { value: 3, label: "Très souvent", anchor: "Quasi quotidien" }
    ];

    const QUESTIONS = [
      // Auto-dévalorisation cognitive (10)
      {id:"Q1", dim:"auto", text:"J'attribue mes réussites à la chance ou à des facteurs externes."},
      {id:"Q2", dim:"auto", text:"Je me dis que je trompe les autres sur mes compétences."},
      {id:"Q3", dim:"auto", text:"Je minimise mes réalisations dès qu'on me félicite."},
      {id:"Q4", dim:"auto", text:"Je me compare défavorablement même quand les faits me donnent raison."},
      {id:"Q5", dim:"auto", text:"Je pense qu'un jour on découvrira que je ne suis pas à la hauteur."},
      {id:"Q6", dim:"auto", text:"Je rumine longtemps la moindre hésitation ou erreur mineure."},
      {id:"Q7", dim:"auto", text:"Je doute de mon droit d'occuper mon poste actuel."},
      {id:"Q8", dim:"auto", text:"Je rejette les retours positifs comme peu crédibles."},
      {id:"Q9", dim:"auto", text:"Je considère normal ce que je fais bien, donc sans valeur particulière."},
      {id:"Q10", dim:"auto", text:"Je m'auto-sabote (retard, fuite) par peur d'échouer."},
      
      // Sur-contrôle & perfectionnisme (10)
      {id:"Q11", dim:"perf", text:"Je relis/retouche excessivement par peur de l'erreur."},
      {id:"Q12", dim:"perf", text:"Je repousse la livraison jusqu'à ce que tout soit 'parfait'."},
      {id:"Q13", dim:"perf", text:"Je contrôle des détails que d'autres jugent secondaires."},
      {id:"Q14", dim:"perf", text:"J'ai du mal à déléguer par anxiété de résultat."},
      {id:"Q15", dim:"perf", text:"Je m'impose des standards plus élevés que ceux de l'équipe."},
      {id:"Q16", dim:"perf", text:"Je prépare des plans B/C 'au cas où' en permanence."},
      {id:"Q17", dim:"perf", text:"Je m'auto-pénalise mentalement pour une erreur isolée."},
      {id:"Q18", dim:"perf", text:"Je me bloque face à des tâches floues par peur de mal faire."},
      {id:"Q19", dim:"perf", text:"J'éprouve un besoin persistant d'anticiper tous les risques."},
      {id:"Q20", dim:"perf", text:"Je travaille au-delà du raisonnable pour 'mériter ma place'."},
      
      // Validation externe & comparaisons (10)
      {id:"Q21", dim:"valid", text:"Je cherche des confirmations fréquentes pour être rassuré·e."},
      {id:"Q22", dim:"valid", text:"Je crains fortement le jugement hiérarchique."},
      {id:"Q23", dim:"valid", text:"Je me sens 'illégitime' sans validation explicite."},
      {id:"Q24", dim:"valid", text:"Je me compare aux plus performants et me sens inférieur·e."},
      {id:"Q25", dim:"valid", text:"Je doute de moi si je ne reçois pas de feedback positif."},
      {id:"Q26", dim:"valid", text:"Je sur-interprète les silences comme une critique."},
      {id:"Q27", dim:"valid", text:"Je modifie mes idées selon l'avis des autres pour être accepté·e."},
      {id:"Q28", dim:"valid", text:"Je redoute de poser des questions par peur d'être jugé·e."},
      {id:"Q29", dim:"valid", text:"Je me sens 'imposteur' à côté de collègues charismatiques."},
      {id:"Q30", dim:"valid", text:"Je recherche des titres/certifs pour compenser un manque perçu."},
      
      // Climat professionnel invalidant (10)
      {id:"Q31", dim:"climat", text:"On minimise mes apports ou on les attribue à d'autres."},
      {id:"Q32", dim:"climat", text:"Des critiques sont formulées en public sous couvert d'humour."},
      {id:"Q33", dim:"climat", text:"On me prive d'informations ou de réunions clés."},
      {id:"Q34", dim:"climat", text:"Les règles/priorités changent puis on m'en rend responsable."},
      {id:"Q35", dim:"climat", text:"Mon travail est évalué sur des critères non annoncés."},
      {id:"Q36", dim:"climat", text:"Mes alertes factuelles sont balayées comme 'interprétations'."},
      {id:"Q37", dim:"climat", text:"Je suis interrompu·e, coupé·e, ou invisibilisé·e en réunion."},
      {id:"Q38", dim:"climat", text:"Je reçois des signaux ambigus (double contrainte)."},
      {id:"Q39", dim:"climat", text:"Je crains des 'représailles' si je pose des limites."},
      {id:"Q40", dim:"climat", text:"Des décisions me concernant sont prises sans moi."},
      
      // Réponses neuro-émotionnelles (10)
      {id:"Q41", dim:"neuro", text:"Je vis en hypervigilance (sur le qui-vive)."},
      {id:"Q42", dim:"neuro", text:"Mon sommeil est perturbé par la rumination professionnelle."},
      {id:"Q43", dim:"neuro", text:"Ma mémoire/attention chute après certaines interactions."},
      {id:"Q44", dim:"neuro", text:"Mon corps réagit (tensions, ventre, tremblements) au travail."},
      {id:"Q45", dim:"neuro", text:"Je redoute d'ouvrir mes mails/DM par anticipation négative."},
      {id:"Q46", dim:"neuro", text:"Je vis des montagnes russes émotionnelles liées au feedback."},
      {id:"Q47", dim:"neuro", text:"Je 'réécris' mes messages pour éviter une réaction."},
      {id:"Q48", dim:"neuro", text:"Je perds le sens du temps après des conflits (flou)."},
      {id:"Q49", dim:"neuro", text:"Je ressens un soulagement physique loin de certaines personnes."},
      {id:"Q50", dim:"neuro", text:"Mon appétit/libido/motivation chute sans autre cause claire."},
      
      // Régulation & résilience (10)
      {id:"Q51", dim:"resil", text:"Je note des faits objectifs pour stabiliser ma réalité."},
      {id:"Q52", dim:"resil", text:"Je sais reconnaître et nommer des comportements toxiques."},
      {id:"Q53", dim:"resil", text:"Je demande du feedback précis et traçable."},
      {id:"Q54", dim:"resil", text:"Je pose des limites claires quand c'est nécessaire."},
      {id:"Q55", dim:"resil", text:"Je sollicite soutien (mentor, pairs, RH) quand je doute."},
      {id:"Q56", dim:"resil", text:"Je consulte (médecin/psy du travail) si mon état décline."},
      {id:"Q57", dim:"resil", text:"Je protège mes temps de repos et de récupération."},
      {id:"Q58", dim:"resil", text:"Je prépare un plan d'options (mobilité, formation, réseau)."},
      {id:"Q59", dim:"resil", text:"Je valorise mes accomplissements avec des preuves concrètes."},
      {id:"Q60", dim:"resil", text:"Je suis prêt·e à demander de l'aide externe si nécessaire."}
    ];

    // ============================================================
    // FONCTIONS DE SCORING
    // ============================================================

    function scoreBands(total) {
      const MAX_TOTAL = 180;
      
      if (total <= 45) {
        return {
          band: "Doute légitime",
          color: "green",
          severity: "none",
          message: "Vos scores révèlent une situation où le questionnement professionnel reste dans des proportions saines. Les doutes que vous exprimez s'inscrivent dans une démarche normale d'auto-évaluation, sans basculer dans la dévalorisation systématique ni dans l'exposition à un environnement structurellement toxique.",
          recommendations: [
            "Maintenir une documentation factuelle de vos réussites et contributions (portfolio, retours positifs écrits).",
            "Cultiver un réseau professionnel diversifié pour confronter votre perception à des regards extérieurs bienveillants.",
            "Pratiquer l'auto-compassion : traiter vos erreurs avec la même indulgence que celles d'un·e collègue."
          ]
        };
      }
      
      if (total <= 90) {
        return {
          band: "Syndrome présent OU signaux environnementaux",
          color: "yellow",
          severity: "low",
          message: "Vos résultats indiquent soit un syndrome de l'imposteur significatif avec des patterns cognitifs d'auto-dévalorisation, soit des signaux d'invalidation environnementale qui fragilisent votre confiance professionnelle. Une analyse détaillée par axe est essentielle pour identifier la source primaire de cette tension.",
          recommendations: [
            "Examiner attentivement les scores des axes 'Climat invalidant' et 'Réponses neuro-émotionnelles' : des scores élevés suggèrent une toxicité environnementale.",
            "Consulter un·e psychologue du travail ou un·e coach spécialisé·e pour distinguer les mécanismes internes des facteurs externes.",
            "Documenter de manière systématique les situations d'invalidation (dates, contextes, témoins) pour objectiver la situation.",
            "Identifier des personnes-ressources fiables (mentor, pairs de confiance, représentant·e du personnel) pour valider votre perception."
          ]
        };
      }
      
      if (total <= 135) {
        return {
          band: "Syndrome marqué ET environnement toxique",
          color: "orange",
          severity: "moderate",
          message: "Vos scores révèlent une situation complexe où syndrome de l'imposteur et environnement professionnel toxique s'entretiennent mutuellement. Vous êtes probablement exposé·e à des pratiques d'invalidation systématique qui amplifient vos doutes légitimes et érodent progressivement votre confiance. Cette configuration nécessite une intervention structurée.",
          recommendations: [
            "PRIORITÉ : Protéger votre santé mentale en consultant un·e professionnel·le (médecin du travail, psychologue clinicien·ne spécialisé·e).",
            "Documenter rigoureusement toutes les situations problématiques avec précision factuelle (dates, contenus, témoins, preuves écrites).",
            "Explorer les recours internes disponibles : entretien avec RH, médiation professionnelle, saisine du CSE ou représentants du personnel.",
            "Préparer activement un plan B : mise à jour CV, activation réseau, exploration mobilité interne ou externe, formation qualifiante.",
            "Sécuriser vos droits : consulter un·e juriste spécialisé·e en droit du travail si des éléments de harcèlement moral sont identifiés (articles L1152-1 et suivants du Code du travail)."
          ]
        };
      }
      
      return {
        band: "Situation d'urgence",
        color: "red",
        severity: "high",
        message: "Vos résultats témoignent d'une situation professionnelle gravement pathogène combinant auto-dévalorisation massive et exposition prolongée à un environnement toxique. Les réponses neuro-émotionnelles que vous décrivez suggèrent un risque avéré d'épuisement professionnel (burn-out) et de traumatisation. Une intervention immédiate est impérative.",
        recommendations: [
          "URGENCE ABSOLUE : Consulter immédiatement votre médecin traitant ou médecin du travail pour évaluation de votre état de santé et envisager un arrêt de travail si nécessaire.",
          "Ne pas rester isolé·e : alerter un·e proche de confiance, contacter une association spécialisée (AVFT, Souffrance et Travail) ou un numéro d'écoute (Suicide Écoute : 01 45 39 40 00).",
          "Mobiliser tous les recours disponibles : saisine urgente du médecin du travail, signalement auprès de l'inspection du travail, droit d'alerte auprès du CSE.",
          "Préserver toutes les preuves écrites (emails, SMS, notes de service) en lieu sûr (copie personnelle, cloud sécurisé).",
          "Consulter en urgence un·e avocat·e spécialisé·e en harcèlement moral pour évaluer vos droits et options juridiques (consultation souvent gratuite en première instance).",
          "Envisager sérieusement une extraction de l'environnement toxique : démission stratégique, rupture conventionnelle, prise d'acte de rupture, ou maintien du poste sous protection médicale stricte."
        ]
      };
    }

    function getAxisAnalysis(dimScores) {
      const sorted = Object.entries(dimScores)
        .map(([key, score]) => ({ key, score, dim: DIMENSIONS.find(d => d.key === key) }))
        .sort((a, b) => b.score - a.score);
      
      const dominant = sorted[0];
      
      const analyses = {
        auto: "L'auto-dévalorisation cognitive est votre dimension dominante. Vous avez tendance à minimiser systématiquement vos accomplissements et à attribuer vos succès à des facteurs externes plutôt qu'à vos compétences réelles.",
        perf: "Le sur-contrôle et le perfectionnisme dominent votre profil. Vous vous imposez probablement des standards excessifs et vivez dans une anxiété constante de l'erreur, ce qui peut générer un épuisement significatif.",
        valid: "La recherche de validation externe est au cœur de vos difficultés. Votre estime professionnelle dépend fortement du feedback d'autrui, vous rendant vulnérable aux jugements et à la comparaison sociale.",
        climat: "Le climat professionnel invalidant est votre dimension principale. Les scores suggèrent une exposition à des pratiques organisationnelles toxiques qui érodent systématiquement votre confiance et votre légitimité.",
        neuro: "Les réponses neuro-émotionnelles dominent votre profil. Votre corps et votre psyché montrent des signes de stress chronique lié à votre environnement professionnel, nécessitant une attention immédiate.",
        resil: "La régulation et la résilience sont vos points forts. Vous disposez déjà de stratégies de protection et d'un réseau de soutien, ce qui constitue un facteur protecteur important face aux difficultés."
      };
      
      return {
        dominant: dominant.key,
        analysis: analyses[dominant.key]
      };
    }

    // ============================================================
    // COMPOSANT PRINCIPAL
    // ============================================================

    function ImposteurTest() {
      const [page, setPage] = useState("intro");
      const [currentQ, setCurrentQ] = useState(0);
      const [answers, setAnswers] = useState({});
      const [email, setEmail] = useState("");

      // SUPPRESSION TOTALE localStorage — Test toujours vierge

      const allAnswered = Object.keys(answers).length === QUESTIONS.length;

      const handleAnswer = useCallback((qId, value) => {
        setAnswers(prev => ({ ...prev, [qId]: value }));
        
        if (currentQ < QUESTIONS.length - 1) {
          setTimeout(() => setCurrentQ(c => c + 1), 150);
        }
      }, [currentQ]);

      const goToResults = useCallback(() => {
        if (!allAnswered) {
          alert(`Il reste ${QUESTIONS.length - Object.keys(answers).length} question(s) sans réponse.`);
          return;
        }
        setPage("results");
      }, [allAnswered, answers]);

      const reset = useCallback(() => {
        setAnswers({});
        setCurrentQ(0);
        setPage("intro");
        setEmail("");
      }, []);

      const dimensionScores = useMemo(() => {
        const scores = {};
        DIMENSIONS.forEach(dim => {
          const qs = QUESTIONS.filter(q => q.dim === dim.key);
          const total = qs.reduce((sum, q) => sum + (answers[q.id] || 0), 0);
          scores[dim.key] = total;
        });
        return scores;
      }, [answers]);

      const totalScore = useMemo(() => {
        return Object.values(dimensionScores).reduce((a, b) => a + b, 0);
      }, [dimensionScores]);

      const resultBand = useMemo(() => scoreBands(totalScore), [totalScore]);
      const profileAnalysis = useMemo(() => getAxisAnalysis(dimensionScores), [dimensionScores]);

      const handlePDF = useCallback(() => {
        window.print();
      }, []);

      const handleDownloadJSON = useCallback(() => {
        const data = {
          test: "Syndrome Imposteur vs Environnement Toxique",
          date: new Date().toISOString(),
          totalScore,
          resultBand: resultBand.band,
          dimensionScores,
          answers: QUESTIONS.map(q => ({
            id: q.id,
            dimension: q.dim,
            question: q.text,
            answer: CHOICES.find(c => c.value === answers[q.id])?.label || "Non répondu"
          }))
        };
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `noesis-imposteur-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        URL.revokeObjectURL(url);
      }, [totalScore, resultBand, dimensionScores, answers]);

      const handleEmail = useCallback(() => {
        if (!email) return;
        const subject = encodeURIComponent("Résultats Auto-test Syndrome Imposteur");
        const body = encodeURIComponent(
          `Bonjour,\n\nVoici mes résultats au test Syndrome Imposteur NOÉSIS :\n\n` +
          `Score total : ${totalScore}/180\n` +
          `Profil : ${resultBand.band}\n\n` +
          `Scores par dimension :\n` +
          DIMENSIONS.map(d => `- ${d.label} : ${dimensionScores[d.key]}`).join('\n') +
          `\n\nPour consulter le détail complet, merci de télécharger le PDF ou JSON depuis le site.`
        );
        window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
      }, [email, totalScore, resultBand, dimensionScores]);

      const progress = useMemo(() => Math.round((currentQ / QUESTIONS.length) * 100), [currentQ]);

      // ============================================================
      // PAGE INTRO
      // ============================================================
      
      if (page === "intro") {
        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50 to-purple-50 p-4 md:p-8">
            <div className="max-w-3xl mx-auto">
              <div className="text-center mb-8">
                <div className="inline-block p-4 bg-indigo-100 rounded-2xl mb-4">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-indigo-600">
                    <path d="M9.5 2c-1.82 0-3.53.5-5 1.36C2.68 4.72 1.5 6.73 1.5 9c0 1.56.52 3 1.39 4.14.87 1.14 2.07 2 3.43 2.36"/>
                    <path d="M14.5 2c1.82 0 3.53.5 5 1.36C21.32 4.72 22.5 6.73 22.5 9c0 1.56-.52 3-1.39 4.14-.87 1.14-2.07 2-3.43 2.36"/>
                    <path d="M12 2v20"/>
                    <path d="M9.5 15.5c0 1.38.62 2.5 1.5 2.5"/>
                    <path d="M14.5 15.5c0 1.38-.62 2.5-1.5 2.5"/>
                    <circle cx="9" cy="9" r="1" fill="currentColor"/>
                    <circle cx="15" cy="9" r="1" fill="currentColor"/>
                  </svg>
                </div>
                <h1 className="text-4xl md:text-5xl font-black text-slate-900 mb-3">
                  Syndrome de l'Imposteur vs<br/>Environnement Toxique
                </h1>
                <p className="text-lg text-slate-600 font-medium">
                  Grille d'évaluation clinique — 60 items
                </p>
              </div>

              <div className="bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-6">
                <div className="bg-amber-50 border-l-4 border-amber-500 p-4 mb-6 rounded-r-lg">
                  <div className="flex gap-3">
                    <span className="text-2xl flex-shrink-0">⚠️</span>
                    <div className="text-sm text-amber-900">
                      <p className="font-bold mb-1">Avertissement méthodologique</p>
                      <p className="leading-relaxed">
                        Cet auto-test de 60 items <strong>ne constitue pas un diagnostic clinique</strong>. 
                        Il s'agit d'une grille d'évaluation rigoureuse destinée à identifier la nature et l'origine de vos doutes professionnels : syndrome de l'imposteur (mécanismes internes) versus exposition à un environnement toxique (facteurs externes).
                      </p>
                    </div>
                  </div>
                </div>

                <div className="mb-8">
                  <div className="flex items-center gap-2 mb-4">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-slate-700">
                      <circle cx="11" cy="11" r="8"/>
                      <path d="m21 21-4.35-4.35"/>
                      <circle cx="11" cy="11" r="3"/>
                    </svg>
                    <h2 className="text-xl font-bold text-slate-900">Méthodologie</h2>
                  </div>
                  <div className="grid grid-cols-2 md:grid-cols-3 gap-3 mb-6">
                    <div className="bg-rose-50 text-rose-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      Auto-déval.
                    </div>
                    <div className="bg-amber-50 text-amber-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      Perfectionnisme
                    </div>
                    <div className="bg-sky-50 text-sky-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      Validation ext.
                    </div>
                    <div className="bg-fuchsia-50 text-fuchsia-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      Climat toxique
                    </div>
                    <div className="bg-violet-50 text-violet-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      Neuro-émotions
                    </div>
                    <div className="bg-emerald-50 text-emerald-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      Résilience
                    </div>
                  </div>

                  <div className="prose prose-sm text-slate-700 space-y-3">
                    <p className="leading-relaxed">
                      Ce test évalue <strong>six dimensions clés</strong> pour distinguer auto-sabotage interne et invalidation environnementale systématique. 
                      Chaque question explore des manifestations concrètes du quotidien professionnel sur les <strong>6 derniers mois</strong>.
                    </p>
                  </div>
                </div>

                <div className="grid md:grid-cols-3 gap-4 mb-8">
                  <div className="bg-slate-50 p-4 rounded-xl text-center">
                    <div className="flex justify-center mb-2">
                      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-indigo-600">
                        <circle cx="12" cy="13" r="9"/>
                        <polyline points="12 7 12 13 15 15"/>
                        <path d="M10 2h4"/>
                      </svg>
                    </div>
                    <div className="text-2xl font-bold text-slate-900">18-22 min</div>
                    <div className="text-sm text-slate-600">Durée estimée</div>
                  </div>
                  <div className="bg-slate-50 p-4 rounded-xl text-center">
                    <div className="flex justify-center mb-2">
                      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-indigo-600">
                        <line x1="18" y1="20" x2="18" y2="10"/>
                        <line x1="12" y1="20" x2="12" y2="4"/>
                        <line x1="6" y1="20" x2="6" y2="14"/>
                      </svg>
                    </div>
                    <div className="text-2xl font-bold text-slate-900">60 questions</div>
                    <div className="text-sm text-slate-600">Questionnaire complet</div>
                  </div>
                  <div className="bg-slate-50 p-4 rounded-xl text-center">
                    <div className="flex justify-center mb-2">
                      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-indigo-600">
                        <path d="M3 3v18h18"/>
                        <path d="M18 9l-5 5-4-4-4 4"/>
                        <circle cx="18" cy="9" r="2" fill="currentColor"/>
                        <circle cx="13" cy="14" r="2" fill="currentColor"/>
                        <circle cx="9" cy="10" r="2" fill="currentColor"/>
                        <circle cx="5" cy="14" r="2" fill="currentColor"/>
                      </svg>
                    </div>
                    <div className="text-2xl font-bold text-slate-900">6 dimensions</div>
                    <div className="text-sm text-slate-600">Analyse multi-axes</div>
                  </div>
                </div>

                <button
                  onClick={() => setPage("test")}
                  className="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white text-lg font-bold py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl"
                >
                  Commencer le test →
                </button>
              </div>

              <div className="text-center text-xs text-slate-500 space-y-1">
                <p className="font-semibold">NOÉSIS — Syndrome Imposteur v1.0 • © 2025</p>
                <p>Confidentialité : aucune donnée collectée sans action explicite (RGPD)</p>
              </div>
            </div>
          </div>
        );
      }

      // ============================================================
      // PAGE TEST
      // ============================================================

      if (page === "test") {
        const q = QUESTIONS[currentQ];
        const dimInfo = DIMENSIONS.find(d => d.key === q.dim);
        const colorMap = {
          rose: { bg: "bg-rose-50", border: "border-rose-300", text: "text-rose-700", badge: "bg-rose-100 text-rose-700" },
          amber: { bg: "bg-amber-50", border: "border-amber-300", text: "text-amber-700", badge: "bg-amber-100 text-amber-700" },
          sky: { bg: "bg-sky-50", border: "border-sky-300", text: "text-sky-700", badge: "bg-sky-100 text-sky-700" },
          fuchsia: { bg: "bg-fuchsia-50", border: "border-fuchsia-300", text: "text-fuchsia-700", badge: "bg-fuchsia-100 text-fuchsia-700" },
          violet: { bg: "bg-violet-50", border: "border-violet-300", text: "text-violet-700", badge: "bg-violet-100 text-violet-700" },
          emerald: { bg: "bg-emerald-50", border: "border-emerald-300", text: "text-emerald-700", badge: "bg-emerald-100 text-emerald-700" },
        };
        const colors = colorMap[dimInfo.color];

        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50 to-purple-50 p-4 md:p-8">
            <div className="max-w-3xl mx-auto">
              
              <div className="mb-6">
                <div className="flex justify-between items-center mb-2">
                  <span className="text-sm font-medium text-slate-600">
                    Question {currentQ + 1} / {QUESTIONS.length}
                  </span>
                  <span className="text-sm font-bold text-indigo-600">{progress}%</span>
                </div>
                <div className="w-full bg-slate-200 rounded-full h-3 overflow-hidden">
                  <div 
                    className="h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-300"
                    style={{ width: `${progress}%` }}
                  />
                </div>
              </div>

              <div className="bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-6">
                <div className="flex items-center gap-3 mb-6">
                  <div className={`w-12 h-12 rounded-full ${colors.bg} ${colors.border} border-2 flex items-center justify-center font-bold ${colors.text} text-lg`}>
                    {currentQ + 1}
                  </div>
                  <span className={`px-3 py-1 rounded-full text-xs font-semibold ${colors.badge}`}>
                    {dimInfo.label}
                  </span>
                </div>

                <h2 className="text-xl md:text-2xl font-bold text-slate-900 mb-8 leading-relaxed">
                  {q.text}
                </h2>

                <div className="space-y-3">
                  {CHOICES.map(choice => {
                    const isSelected = answers[q.id] === choice.value;
                    return (
                      <button
                        key={choice.value}
                        onClick={() => handleAnswer(q.id, choice.value)}
                        className={`w-full text-left p-4 rounded-xl border-2 transition-all ${
                          isSelected
                            ? 'bg-indigo-50 border-indigo-500 shadow-lg'
                            : 'bg-white border-slate-200 hover:border-indigo-300 hover:bg-slate-50'
                        }`}
                      >
                        <div className="flex items-center justify-between">
                          <div>
                            <div className={`font-semibold mb-1 ${isSelected ? 'text-indigo-700' : 'text-slate-900'}`}>
                              {choice.label}
                            </div>
                            <div className="text-xs text-slate-500">{choice.anchor}</div>
                          </div>
                          <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${
                            isSelected ? 'bg-indigo-500 border-indigo-500' : 'border-slate-300'
                          }`}>
                            {isSelected && <span className="text-white text-xs font-bold">✓</span>}
                          </div>
                        </div>
                      </button>
                    );
                  })}
                </div>
              </div>

              <div className="flex gap-4">
                <button
                  onClick={() => setCurrentQ(c => Math.max(0, c - 1))}
                  disabled={currentQ === 0}
                  className="flex-1 bg-slate-200 hover:bg-slate-300 disabled:bg-slate-100 disabled:text-slate-400 text-slate-700 font-semibold py-3 px-6 rounded-xl transition"
                >
                  ← Précédent
                </button>
                
                {currentQ === QUESTIONS.length - 1 ? (
                  <button
                    onClick={goToResults}
                    disabled={!allAnswered}
                    className="flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:from-slate-300 disabled:to-slate-300 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg"
                  >
                    Voir les résultats →
                  </button>
                ) : (
                  <button
                    onClick={() => setCurrentQ(c => Math.min(QUESTIONS.length - 1, c + 1))}
                    className="flex-1 bg-slate-700 hover:bg-slate-800 text-white font-semibold py-3 px-6 rounded-xl transition"
                  >
                    Suivant →
                  </button>
                )}
              </div>

              <div className="mt-4 text-center">
                <button
                  onClick={goToResults}
                  disabled={!allAnswered}
                  className="text-sm text-slate-500 hover:text-slate-700 underline disabled:text-slate-300"
                >
                  {allAnswered ? "Aller directement aux résultats" : `${QUESTIONS.length - Object.keys(answers).length} question(s) restante(s)`}
                </button>
              </div>
            </div>
          </div>
        );
      }

      // ============================================================
      // PAGE RÉSULTATS + SECTION IMPRIMABLE
      // ============================================================

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50 to-purple-50 p-4 md:p-8">
          <div className="max-w-5xl mx-auto">
            
            {/* SECTION ÉCRAN */}
            <div className="no-print">
              <div className="text-center mb-8">
                <div className="inline-block p-4 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-2xl mb-4">
                  <svg width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-indigo-600">
                    <path d="M3 3v18h18"/>
                    <path d="M18 9l-5 5-4-4-4 4"/>
                    <circle cx="18" cy="9" r="2"/>
                    <circle cx="13" cy="14" r="2"/>
                    <circle cx="9" cy="10" r="2"/>
                    <circle cx="5" cy="14" r="2"/>
                  </svg>
                </div>
                <h1 className="text-4xl md:text-5xl font-black text-slate-900 mb-3">
                  Tes résultats
                </h1>
                <p className="text-lg text-slate-600 font-medium">
                  Analyse détaillée de ton profil
                </p>
              </div>

              <div className="bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-6">
                <div className="text-center mb-6">
                  <div className="text-6xl font-black text-slate-900 mb-2">
                    {totalScore}<span className="text-3xl text-slate-400">/180</span>
                  </div>
                  <div className={`inline-block px-6 py-2 rounded-full text-lg font-bold ${
                    resultBand.color === 'green' ? 'bg-green-100 text-green-700' :
                    resultBand.color === 'yellow' ? 'bg-yellow-100 text-yellow-700' :
                    resultBand.color === 'orange' ? 'bg-orange-100 text-orange-700' :
                    'bg-red-100 text-red-700'
                  }`}>
                    {resultBand.band}
                  </div>
                </div>

                <div className="bg-slate-50 p-6 rounded-2xl mb-6">
                  <h3 className="font-bold text-slate-900 mb-3">🔍 Interprétation clinique</h3>
                  <p className="text-sm text-slate-700 leading-relaxed">
                    {resultBand.message}
                  </p>
                </div>

                <div className="space-y-4 mb-6">
                  <h3 className="font-bold text-slate-900">Scores par dimension</h3>
                  {DIMENSIONS.map(dim => {
                    const score = dimensionScores[dim.key];
                    const max = QUESTIONS.filter(q => q.dim === dim.key).length * 3;
                    const percentage = Math.round((score / max) * 100);
                    const colorMap = {
                      rose: { bg: "bg-rose-50", bar: "bg-rose-500", text: "text-rose-700" },
                      amber: { bg: "bg-amber-50", bar: "bg-amber-500", text: "text-amber-700" },
                      sky: { bg: "bg-sky-50", bar: "bg-sky-500", text: "text-sky-700" },
                      fuchsia: { bg: "bg-fuchsia-50", bar: "bg-fuchsia-500", text: "text-fuchsia-700" },
                      violet: { bg: "bg-violet-50", bar: "bg-violet-500", text: "text-violet-700" },
                      emerald: { bg: "bg-emerald-50", bar: "bg-emerald-500", text: "text-emerald-700" },
                    };
                    const colors = colorMap[dim.color];
                    
                    return (
                      <div key={dim.key} className={`p-4 rounded-xl ${colors.bg}`}>
                        <div className="flex justify-between items-center mb-2">
                          <span className={`text-sm font-bold ${colors.text}`}>{dim.label}</span>
                          <span className="text-sm font-bold text-slate-700">{score}/{max}</span>
                        </div>
                        <div className="w-full bg-white rounded-full h-3 overflow-hidden">
                          <div 
                            className={`h-full ${colors.bar} transition-all duration-500`}
                            style={{ width: `${percentage}%` }}
                          />
                        </div>
                        <div className="text-xs text-slate-600 mt-1">{percentage}%</div>
                      </div>
                    );
                  })}
                </div>

                <div className="bg-slate-50 p-6 rounded-2xl">
                  <h3 className="font-bold text-slate-900 mb-3">📌 Ton profil dominant</h3>
                  <p className="text-sm font-semibold text-indigo-600 mb-2">
                    {DIMENSIONS.find(d => d.key === profileAnalysis.dominant)?.label}
                  </p>
                  <p className="text-sm text-slate-700 leading-relaxed">
                    {profileAnalysis.analysis}
                  </p>
                </div>
              </div>

              <div className="grid md:grid-cols-2 gap-6">
                
                <div className="bg-white rounded-2xl shadow-xl p-6">
                  <h2 className="text-xl font-bold text-slate-900 mb-4">Recommandations</h2>
                  <ul className="space-y-3">
                    {resultBand.recommendations.map((rec, idx) => (
                      <li key={idx} className="flex gap-3 text-sm text-slate-700">
                        <span className="flex-shrink-0 w-6 h-6 rounded-full bg-indigo-100 text-indigo-600 font-bold text-xs flex items-center justify-center">
                          {idx + 1}
                        </span>
                        <span>{rec}</span>
                      </li>
                    ))}
                  </ul>
                </div>

                <div className="bg-white rounded-2xl shadow-xl p-6">
                  <h2 className="text-xl font-bold text-slate-900 mb-4">Exporter les résultats</h2>
                  
                  <div className="space-y-3">
                    <button
                      onClick={handlePDF}
                      className="w-full bg-slate-900 text-white font-semibold py-3 px-4 rounded-xl hover:bg-slate-800 transition"
                    >
                      📄 Télécharger en PDF
                    </button>

                    <button
                      onClick={handleDownloadJSON}
                      className="w-full bg-slate-700 text-white font-semibold py-3 px-4 rounded-xl hover:bg-slate-600 transition"
                    >
                      💾 Télécharger en JSON
                    </button>

                    <div className="pt-4 border-t-2 border-slate-100">
                      <label className="block text-sm font-medium text-slate-700 mb-2">
                        Envoyer par email
                      </label>
                      <div className="flex gap-2">
                        <input
                          type="email"
                          value={email}
                          onChange={(e) => setEmail(e.target.value)}
                          placeholder="email@exemple.com"
                          className="flex-1 rounded-lg border-2 border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none"
                        />
                        <button
                          onClick={handleEmail}
                          disabled={!email}
                          className="bg-indigo-600 disabled:bg-slate-300 text-white font-semibold px-4 py-2 rounded-lg hover:bg-indigo-700 transition"
                        >
                          📧
                        </button>
                      </div>
                    </div>

                    <button
                      onClick={reset}
                      className="w-full mt-4 text-slate-600 hover:text-slate-900 font-medium underline text-sm"
                    >
                      Refaire le test
                    </button>
                  </div>
                </div>
              </div>

              <div className="mt-8 text-center text-xs text-slate-500 space-y-2">
                <p className="font-semibold">NOÉSIS — Syndrome Imposteur v1.0 • © 2025</p>
                <p>Outil de pré-diagnostic d'orientation • Pas un diagnostic médical</p>
                <p>Confidentialité : aucune donnée collectée sans action explicite (RGPD)</p>
              </div>
            </div>

            {/* SECTION IMPRIMABLE PDF (cachée à l'écran) */}
            <div className="print-only print-container">
              <div className="print-section">
                <h1 className="print-header">Résultats — Syndrome Imposteur vs Environnement Toxique</h1>
                <p className="print-text">Date : {new Date().toLocaleDateString('fr-FR')}</p>
                <p className="print-text">Score total : <strong>{totalScore}/180</strong></p>
                <p className="print-text">Profil : <strong>{resultBand.band}</strong></p>
              </div>

              <div className="print-section">
                <h2 className="print-subheader">Interprétation clinique</h2>
                <p className="print-text">{resultBand.message}</p>
              </div>

              <div className="print-section">
                <h2 className="print-subheader">Scores par dimension</h2>
                {DIMENSIONS.map(dim => {
                  const score = dimensionScores[dim.key];
                  const max = QUESTIONS.filter(q => q.dim === dim.key).length * 3;
                  const percentage = Math.round((score / max) * 100);
                  return (
                    <div key={dim.key} className="print-score-box">
                      <p className="print-text"><strong>{dim.label}</strong> : {score}/{max} ({percentage}%)</p>
                    </div>
                  );
                })}
              </div>

              <div className="print-section">
                <h2 className="print-subheader">Profil dominant</h2>
                <p className="print-text"><strong>{DIMENSIONS.find(d => d.key === profileAnalysis.dominant)?.label}</strong></p>
                <p className="print-text">{profileAnalysis.analysis}</p>
              </div>

              <div className="print-section">
                <h2 className="print-subheader">Recommandations</h2>
                {resultBand.recommendations.map((rec, idx) => (
                  <p key={idx} className="print-reco">{idx + 1}. {rec}</p>
                ))}
              </div>

              {/* DÉTAIL COMPLET DES QUESTIONS PAR AXE */}
              <div className="print-section" style={{pageBreakBefore: 'always'}}>
                <h2 className="print-header">Détail des réponses par dimension</h2>
                
                {DIMENSIONS.map(dim => {
                  const dimQuestions = QUESTIONS.filter(q => q.dim === dim.key);
                  return (
                    <div key={dim.key} className="print-axis-section">
                      <h3 className="print-subheader">{dim.label}</h3>
                      {dimQuestions.map(q => {
                        const answer = CHOICES.find(c => c.value === answers[q.id]);
                        return (
                          <div key={q.id} className="print-question">
                            <p className="print-text">
                              <strong>{q.id}</strong> : {q.text}
                            </p>
                            <p className="print-text" style={{paddingLeft: '16px', color: '#4b5563'}}>
                              → Réponse : <strong>{answer?.label || 'Non répondu'}</strong> ({answer?.anchor || ''})
                            </p>
                          </div>
                        );
                      })}
                    </div>
                  );
                })}
              </div>

              <div className="print-section" style={{marginTop: '20px', paddingTop: '12px', borderTop: '1px solid #e2e8f0'}}>
                <p className="print-text" style={{fontSize: '10px', color: '#64748b'}}>
                  NOÉSIS — Syndrome Imposteur v1.0 • © 2025 • Outil de pré-diagnostic d'orientation, ne remplace pas un diagnostic médical
                </p>
              </div>
            </div>
          </div>
        </div>
      );
    }

    // ============================================================
    // RENDU DANS LE DOM
    // ============================================================

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<ImposteurTest />);
  </script>
</body>
</html>
