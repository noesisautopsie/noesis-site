<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO -->
  <title>Parentalit√© Toxique & Reconstruction ‚Äî Auto-test NO√âSIS</title>
  <meta name="description" content="Grille d'√©valuation clinique (60 items) pour √©valuer l'empreinte de dynamiques parentales toxiques et le niveau de reconstruction. 6 axes valid√©s.">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Parentalit√© Toxique & Reconstruction ‚Äî NO√âSIS">
  <meta property="og:description" content="Test clinique 60 questions. √âvaluation reconstruction apr√®s parentalit√© toxique.">
  <meta property="og:type" content="website">
  
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- React + ReactDOM via CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- Babel Standalone pour JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    /* Styles d'impression PDF optimis√©s A4 */
    @media print {
      .no-print { display: none !important; }
      .print-only { display: block !important; }
      
      body { 
        background: white !important;
        margin: 0;
        padding: 0;
      }
      
      @page {
        size: A4;
        margin: 12mm 15mm;
      }
      
      .print-container {
        max-width: 100%;
        padding: 0 !important;
        margin: 0 !important;
      }
      
      .print-section {
        padding: 8px 0 !important;
        margin-bottom: 12px !important;
      }
      
      .print-header {
        font-size: 18px !important;
        margin-bottom: 8px !important;
        padding-bottom: 4px !important;
        border-bottom: 2px solid #334155;
      }
      
      .print-subheader {
        font-size: 14px !important;
        margin: 8px 0 4px 0 !important;
      }
      
      .print-text {
        font-size: 11px !important;
        line-height: 1.4 !important;
        margin: 2px 0 !important;
      }
      
      .print-question {
        font-size: 11px !important;
        padding: 3px 0 !important;
        page-break-inside: avoid;
      }
      
      .print-axis-section {
        page-break-inside: avoid;
        margin-bottom: 10px !important;
      }
      
      .print-score-box {
        padding: 6px !important;
        margin: 4px 0 !important;
        border: 1px solid #e2e8f0;
        border-radius: 4px;
      }
      
      .print-reco {
        font-size: 11px !important;
        padding: 2px 0 2px 16px !important;
        margin: 2px 0 !important;
      }
    }
    
    .print-only {
      display: none;
    }
  </style>
</head>
<body class="m-0 p-0">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo, useCallback } = React;

    // ============================================================
    // CONFIGURATION
    // ============================================================

    const AXES = [
      { 
        key: "control", 
        label: "Contr√¥le & invalidation parentale", 
        color: "rose",
        description: "Manipulation, d√©nigrement, infantilisation, contr√¥le coercitif"
      },
      { 
        key: "climate", 
        label: "Climat √©motionnel familial", 
        color: "fuchsia",
        description: "Impr√©visibilit√©, amour conditionnel, honte, tabous"
      },
      { 
        key: "attach", 
        label: "Attachement & diff√©renciation", 
        color: "amber",
        description: "Capacit√© √† se s√©parer sans culpabilit√©, autonomie √©motionnelle"
      },
      { 
        key: "self", 
        label: "Auto-perception & honte int√©rioris√©e", 
        color: "orange",
        description: "Estime de soi, voix critique interne, l√©gitimit√©"
      },
      { 
        key: "trauma", 
        label: "R√©gulation & m√©moire du trauma", 
        color: "purple",
        description: "Flashbacks, triggers, hypervigilance, r√©ponses adaptatives"
      },
      { 
        key: "reparent", 
        label: "R√©silience & reparentage", 
        color: "emerald",
        description: "Soutien, th√©rapie, construction de soi, rituels protecteurs"
      }
    ];

    const CHOICES = [
      { value: 0, label: "Jamais", anchor: "0 fois / 6 mois" },
      { value: 1, label: "Parfois", anchor: "1-3√ó / mois" },
      { value: 2, label: "Souvent", anchor: "1-3√ó / semaine" },
      { value: 3, label: "Tr√®s souvent", anchor: "Quasi quotidien" }
    ];

    const QUESTIONS = [
      // Contr√¥le & invalidation parentale (10)
      {id:"Q1", dim:"control", text:"Mes √©motions √©taient tourn√©es en d√©rision ou jug√©es 'exag√©r√©es'."},
      {id:"Q2", dim:"control", text:"On me culpabilisait lorsque j'exprimais un besoin ou un d√©saccord."},
      {id:"Q3", dim:"control", text:"Les r√®gles changeaient selon l'humeur, puis j'√©tais bl√¢m√©¬∑e."},
      {id:"Q4", dim:"control", text:"On r√©√©crivait les faits ('tu inventes', 'tu dramatises')."},
      {id:"Q5", dim:"control", text:"On me comparait d√©favorablement √† un fr√®re/s≈ìur/autre enfant."},
      {id:"Q6", dim:"control", text:"Mes succ√®s √©taient minimis√©s ou attribu√©s √† la chance."},
      {id:"Q7", dim:"control", text:"L'intimit√© (lectures, t√©l√©phone, chambre) n'√©tait pas respect√©e."},
      {id:"Q8", dim:"control", text:"Un parent disait 'c'est pour ton bien' en imposant un contr√¥le strict."},
      {id:"Q9", dim:"control", text:"On m'a fait jouer un r√¥le de confident¬∑e/parent de substitution."},
      {id:"Q10", dim:"control", text:"On me demandait de 'sauver l'honneur' ou de taire certains faits."},
      
      // Climat √©motionnel familial (10)
      {id:"Q11", dim:"climate", text:"Le climat √©tait impr√©visible (col√®res, silences, froid)."},
      {id:"Q12", dim:"climate", text:"L'amour/affection d√©pendaient de mes performances ou ob√©issance."},
      {id:"Q13", dim:"climate", text:"Les conflits n'√©taient pas r√©par√©s (pas d'excuse, pas de r√©paration)."},
      {id:"Q14", dim:"climate", text:"Les sujets 'tabous' emp√™chaient d'aborder des probl√®mes r√©els."},
      {id:"Q15", dim:"climate", text:"L'alcool, l'addiction ou la maladie mentale ont rythm√© l'ambiance."},
      {id:"Q16", dim:"climate", text:"J'√©vitais la maison ou certains moments par peur de r√©actions."},
      {id:"Q17", dim:"climate", text:"La honte publique (moqueries, humiliations) faisait partie du quotidien."},
      {id:"Q18", dim:"climate", text:"Le parent 'sympa' d√©savouait l'autre, me mettant au milieu."},
      {id:"Q19", dim:"climate", text:"Les r√¥les √©taient invers√©s (je g√©rais les √©motions d'un parent)."},
      {id:"Q20", dim:"climate", text:"Les besoins de l'enfant passaient apr√®s l'image de la famille."},
      
      // Attachement & diff√©renciation (10)
      {id:"Q21", dim:"attach", text:"Je peux poser des limites √† mes parents sans panique majeure."},
      {id:"Q22", dim:"attach", text:"Je me sens l√©gitime √† choisir ma vie m√™me s'ils d√©sapprouvent."},
      {id:"Q23", dim:"attach", text:"Je reconnais leurs qualit√©s sans nier mes blessures."},
      {id:"Q24", dim:"attach", text:"Je tol√®re la culpabilit√© ou la d√©ception de l'autre sans me renier."},
      {id:"Q25", dim:"attach", text:"Je sais couper un √©change quand il devient maltraitant."},
      {id:"Q26", dim:"attach", text:"Je demande de l'aide ext√©rieure si la relation me fait chuter."},
      {id:"Q27", dim:"attach", text:"Je prends du recul face aux injonctions familiales ('tu devrais')."},
      {id:"Q28", dim:"attach", text:"Je construis ma propre tradition/rythme sans anxi√©t√© excessive."},
      {id:"Q29", dim:"attach", text:"Je distingue loyaut√© familiale et loyaut√© envers moi-m√™me."},
      {id:"Q30", dim:"attach", text:"Je peux aimer sans me sacrifier syst√©matiquement."},
      
      // Auto-perception & honte int√©rioris√©e (10)
      {id:"Q31", dim:"self", text:"Une voix interne me critique s√©v√®rement pour la moindre erreur."},
      {id:"Q32", dim:"self", text:"Je me sens 'de trop', 'pas assez', ou coupable par d√©faut."},
      {id:"Q33", dim:"self", text:"Je redoute l'autorit√© et recherche inconsciemment l'approbation."},
      {id:"Q34", dim:"self", text:"Je minimise mes souffrances ('ce n'√©tait pas si grave')."},
      {id:"Q35", dim:"self", text:"Je r√©p√®te des sch√©mas (couples, travail) qui me d√©valorisent."},
      {id:"Q36", dim:"self", text:"J'ai honte de mes besoins et j'ai du mal √† les nommer."},
      {id:"Q37", dim:"self", text:"Je prends la responsabilit√© √©motionnelle des autres par r√©flexe."},
      {id:"Q38", dim:"self", text:"Je ressens un devoir de loyaut√© m√™me quand c'est injuste."},
      {id:"Q39", dim:"self", text:"Je m'excuse souvent d'exister ou d'occuper de la place."},
      {id:"Q40", dim:"self", text:"Je me sens imposteur¬∑rice dans les espaces de r√©ussite."},
      
      // R√©gulation & m√©moire du trauma (10)
      {id:"Q41", dim:"trauma", text:"Je fais des flashbacks/ruminations apr√®s √©changes familiaux."},
      {id:"Q42", dim:"trauma", text:"Mon sommeil/app√©tit/humeur changent apr√®s contacts parentaux."},
      {id:"Q43", dim:"trauma", text:"Je me mets en hypervigilance (anticipation, tension corporelle)."},
      {id:"Q44", dim:"trauma", text:"Je me sens dissoci√©¬∑e (flou, temps perdu) apr√®s conflits familiaux."},
      {id:"Q45", dim:"trauma", text:"Je relis/√©dite mes messages par peur de d√©clencher une crise."},
      {id:"Q46", dim:"trauma", text:"Je ressens un soulagement physique √† distance de la famille."},
      {id:"Q47", dim:"trauma", text:"Je rationalise l'inacceptable pour √©viter l'explosion."},
      {id:"Q48", dim:"trauma", text:"Je fais 'fawn' (apaiser, plaire) pour survivre aux √©changes."},
      {id:"Q49", dim:"trauma", text:"Je revis les sc√®nes anciennes comme si elles √©taient actuelles."},
      {id:"Q50", dim:"trauma", text:"Mon corps porte tensions, douleurs, maladies sans cause m√©dicale."},
      
      // R√©silience & reparentage (10)
      {id:"Q51", dim:"reparent", text:"Je consulte un¬∑e th√©rapeute ou un¬∑e professionnel¬∑le form√©¬∑e."},
      {id:"Q52", dim:"reparent", text:"J'ai lu des livres sur trauma, attachement, parentalit√© toxique."},
      {id:"Q53", dim:"reparent", text:"Je note, journal ou documente mes ressentis pour y voir clair."},
      {id:"Q54", dim:"reparent", text:"Je pratique des rituels de r√©gulation (m√©ditation, mouvement, art)."},
      {id:"Q55", dim:"reparent", text:"Je m'entoure de personnes stables qui m'√©coutent sans juger."},
      {id:"Q56", dim:"reparent", text:"Je reconnais les patterns toxiques et y r√©siste activement."},
      {id:"Q57", dim:"reparent", text:"Je m'accorde compassion et douceur face √† mes failles."},
      {id:"Q58", dim:"reparent", text:"Je me permets de dire non et de prot√©ger mon √©nergie."},
      {id:"Q59", dim:"reparent", text:"Je construis ma propre d√©finition de famille (choisie ou restreinte)."},
      {id:"Q60", dim:"reparent", text:"Je c√©l√®bre mes petites victoires de reconstruction."}
    ];

    // ============================================================
    // FONCTIONS DE SCORING
    // ============================================================

    function scoreBands(total, perAxis) {
      if (total <= 60) {
        return {
          band: "S√©curit√© √©motionnelle int√©gr√©e",
          color: "green",
          severity: "none",
          message: "Vos scores r√©v√®lent des mod√®les parentaux globalement stables et s√©curisants. Les dynamiques familiales d√©crites t√©moignent d'un attachement suffisamment bon, permettant autonomie et diff√©renciation sans culpabilit√© majeure. Les traces d'imperfections parentales restent dans des proportions normatives.",
          recommendations: [
            "Continuer √† cultiver la diff√©renciation saine entre vos besoins et ceux de votre famille d'origine.",
            "Maintenir une communication authentique avec vos parents si elle est possible et non toxique.",
            "Transmettre les ressources internes construites dans vos relations actuelles (couple, parentalit√©, amiti√©)."
          ]
        };
      }
      
      if (total <= 100) {
        return {
          band: "Traces r√©siduelles",
          color: "yellow",
          severity: "low",
          message: "Vos r√©sultats indiquent un h√©ritage de sch√©mas critiques ou d'invalidations √©motionnelles partiellement int√©gr√©s. Certaines dynamiques parentales ont laiss√© des empreintes (voix critique, qu√™te d'approbation, hypervigilance mod√©r√©e), mais vous disposez de ressources de reconstruction significatives.",
          recommendations: [
            "Accompagnement psychologique l√©ger (coaching, th√©rapie br√®ve orient√©e solution) pour consolider la diff√©renciation.",
            "Journaling r√©gulier pour identifier les sch√©mas automatiques (voix critique, culpabilit√© non fond√©e).",
            "Pratiques de r√©gulation corporelle (respiration, yoga, m√©ditation) pour apaiser l'hypervigilance r√©siduelle.",
            "Lectures cibl√©es : Alice Miller (Le Drame de l'enfant dou√©), Susan Forward (Parents toxiques).",
            "Renforcer le r√©seau de soutien : entourage stable, groupe de parole, mentors bienveillants."
          ]
        };
      }
      
      if (total <= 140) {
        return {
          band: "Empreinte significative",
          color: "orange",
          severity: "moderate",
          message: "Vos scores r√©v√®lent une exposition √† des dynamiques familiales toxiques structurantes. Les m√©canismes de contr√¥le, d'invalidation √©motionnelle et d'attachement ins√©cure ont g√©n√©r√© des sch√©mas d'auto-d√©valorisation, d'hypervigilance et de culpabilit√© chronique. Vous √™tes en phase de reconstruction active, mais les empreintes restent profondes.",
          recommendations: [
            "PRIORIT√â : Psychoth√©rapie sp√©cialis√©e trauma/attachement (EMDR, IFS, th√©rapie relationnelle). Chercher th√©rapeute form√© trauma complexe.",
            "Documenter les patterns toxiques : liste concr√®te des comportements parentaux probl√©matiques, impacts observables sur votre vie actuelle.",
            "Travail sur les croyances limitantes : identifier la voix critique internalis√©e, distinguer 'ce qu'on m'a dit' vs 'qui je suis r√©ellement'.",
            "Pratiques de reparentage : lettre √† soi enfant, visualisations protectrices, rituels de validation √©motionnelle.",
            "Poser des limites concr√®tes : r√©duire fr√©quence/dur√©e des contacts si n√©cessaire, privil√©gier √©crit sur oral, couper si maltraitance active.",
            "Ressources sp√©cialis√©es : Association STOP VOG (violences √©ducatives), groupes th√©rapeutiques enfants de parents toxiques.",
            "Lectures : Jonice Webb (Trauma invisible), Pete Walker (CPTSD), Richard Schwartz (No Bad Parts)."
          ]
        };
      }
      
      return {
        band: "Trauma complexe actif",
        color: "red",
        severity: "critical",
        message: "Vos r√©sultats t√©moignent d'un trauma complexe relationnel s√©v√®re. L'exposition prolong√©e √† des dynamiques parentales toxiques (contr√¥le coercitif, invalidation chronique, climat impr√©visible) a g√©n√©r√© des alt√©rations profondes : estime de soi effondr√©e, hypervigilance permanente, dissociation, r√©p√©tition de sch√©mas maltraitants. Vous √™tes en souffrance majeure n√©cessitant un accompagnement pluridisciplinaire imm√©diat.",
        recommendations: [
          "URGENCE : Consultation psychiatre/psychotraumatologue dans les 7 jours. √âvaluation √©tat d√©pressif, anxi√©t√© g√©n√©ralis√©e, TSPT complexe.",
          "Arr√™t ou r√©duction drastique des contacts familiaux si maintien g√©n√®re d√©compensation (id√©es noires, dissociation s√©v√®re, auto-mutilation).",
          "Psychoth√©rapie intensive sp√©cialis√©e trauma complexe : EMDR phases 1-2, IFS (Internal Family Systems), th√©rapie relationnelle sensori-motrice.",
          "M√©dication si n√©cessaire : antid√©presseurs (ISRS), anxiolytiques court terme, r√©gulation sommeil sous supervision m√©dicale.",
          "Hospitalisation de jour ou CMP si d√©compensation s√©v√®re (id√©es suicidaires actives, incapacit√© fonctionnelle majeure).",
          "Protocole de r√©gulation intensive : coh√©rence cardiaque quotidienne, yoga trauma-sensible, art-th√©rapie, EMDR bilaterale.",
          "Soutien social renforc√© : informer proches de confiance, association d'entraide (STOP VOG, SOS Victimes), groupe th√©rapeutique.",
          "Documentation juridique si maltraitance continue : signalement, main courante, protection juridique.",
          "Num√©ros d'urgence : 3114 (pr√©vention suicide), 119 (enfance en danger si mineurs dans famille), 116 006 (victimes).",
          "Lectures validation : Pete Walker (Complex PTSD), Laurence Dispaux (Se reconstruire apr√®s maltraitance), Alice Miller (C'est pour ton bien)."
        ]
      };
    }

    function getAxisAnalysis(dimScores) {
      const sorted = Object.entries(dimScores)
        .map(([key, score]) => ({ key, score, dim: AXES.find(d => d.key === key) }))
        .sort((a, b) => b.score - a.score);
      
      const dominant = sorted[0];
      
      const analyses = {
        control: "Le contr√¥le et l'invalidation parentale dominent votre profil. Vous avez probablement grandi dans un environnement o√π vos √©motions √©taient syst√©matiquement ni√©es, vos choix remis en cause et votre autonomie r√©prim√©e. Cette empreinte g√©n√®re aujourd'hui une difficult√© √† vous faire confiance et √† affirmer vos limites.",
        climate: "Le climat √©motionnel impr√©visible est votre dimension dominante. L'instabilit√© affective, l'amour conditionnel et l'impr√©visibilit√© parentale ont cr√©√© un √©tat d'hypervigilance chronique. Vous anticipez constamment les r√©actions de l'autre et marchez sur des ≈ìufs dans vos relations actuelles.",
        attach: "L'attachement et la diff√©renciation sont vos points forts. Malgr√© les difficult√©s pass√©es, vous avez d√©velopp√© une capacit√© √† poser des limites, √† vous diff√©rencier de votre famille d'origine et √† construire votre propre vie sans culpabilit√© paralysante. Cette autonomie √©motionnelle est un facteur protecteur majeur.",
        self: "L'auto-perception et la honte int√©rioris√©e dominent votre profil. La voix critique parentale s'est int√©rioris√©e en un juge interne s√©v√®re qui d√©valorise syst√©matiquement vos choix, vos besoins et votre l√©gitimit√©. Cette honte toxique empoisonne votre estime de soi et g√©n√®re un sentiment chronique d'imposture.",
        trauma: "La r√©gulation et la m√©moire du trauma sont au c≈ìur de votre souffrance actuelle. Votre syst√®me nerveux porte encore les traces de l'exposition chronique au stress familial : flashbacks, hypervigilance, r√©ponses de survie (fawn, freeze), dissociation. Votre corps t√©moigne d'un trauma non r√©solu.",
        reparent: "La r√©silience et le reparentage sont vos ressources dominantes. Vous avez activement entrepris un travail de reconstruction : th√©rapie, lectures, pratiques de r√©gulation, entourage choisi. Cette capacit√© √† vous reparenter et √† chercher du soutien est le fondement de votre gu√©rison."
      };
      
      return {
        dominant: dominant.key,
        analysis: analyses[dominant.key]
      };
    }

    // ============================================================
    // COMPOSANT PRINCIPAL
    // ============================================================

    function ParentaliteTest() {
      const [page, setPage] = useState("intro");
      const [currentQ, setCurrentQ] = useState(0);
      const [answers, setAnswers] = useState({});
      const [email, setEmail] = useState("");

      // SUPPRESSION TOTALE localStorage ‚Äî Test toujours vierge

      const allAnswered = Object.keys(answers).length === QUESTIONS.length;

      const handleAnswer = useCallback((qId, value) => {
        setAnswers(prev => ({ ...prev, [qId]: value }));
        
        if (currentQ < QUESTIONS.length - 1) {
          setTimeout(() => setCurrentQ(c => c + 1), 150);
        }
      }, [currentQ]);

      const goToResults = useCallback(() => {
        if (!allAnswered) {
          alert(`Il reste ${QUESTIONS.length - Object.keys(answers).length} question(s) sans r√©ponse.`);
          return;
        }
        setPage("results");
      }, [allAnswered, answers]);

      const reset = useCallback(() => {
        setAnswers({});
        setCurrentQ(0);
        setPage("intro");
        setEmail("");
      }, []);

      const dimensionScores = useMemo(() => {
        const scores = {};
        AXES.forEach(axis => {
          const qs = QUESTIONS.filter(q => q.dim === axis.key);
          const total = qs.reduce((sum, q) => sum + (answers[q.id] || 0), 0);
          scores[axis.key] = total;
        });
        return scores;
      }, [answers]);

      const totalScore = useMemo(() => {
        return Object.values(dimensionScores).reduce((a, b) => a + b, 0);
      }, [dimensionScores]);

      const resultBand = useMemo(() => scoreBands(totalScore, dimensionScores), [totalScore, dimensionScores]);
      const profileAnalysis = useMemo(() => getAxisAnalysis(dimensionScores), [dimensionScores]);

      const handlePDF = useCallback(() => {
        window.print();
      }, []);

      const handleDownloadJSON = useCallback(() => {
        const data = {
          test: "Parentalit√© Toxique & Reconstruction",
          date: new Date().toISOString(),
          totalScore,
          resultBand: resultBand.band,
          dimensionScores,
          answers: QUESTIONS.map(q => ({
            id: q.id,
            dimension: q.dim,
            question: q.text,
            answer: CHOICES.find(c => c.value === answers[q.id])?.label || "Non r√©pondu"
          }))
        };
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `noesis-parentalite-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        URL.revokeObjectURL(url);
      }, [totalScore, resultBand, dimensionScores, answers]);

      const handleEmail = useCallback(() => {
        if (!email) return;
        const subject = encodeURIComponent("R√©sultats Auto-test Parentalit√© Toxique");
        const body = encodeURIComponent(
          `Bonjour,\n\nVoici mes r√©sultats au test Parentalit√© Toxique NO√âSIS :\n\n` +
          `Score total : ${totalScore}/180\n` +
          `Profil : ${resultBand.band}\n\n` +
          `Scores par dimension :\n` +
          AXES.map(d => `- ${d.label} : ${dimensionScores[d.key]}`).join('\n') +
          `\n\nPour consulter le d√©tail complet, merci de t√©l√©charger le PDF ou JSON depuis le site.`
        );
        window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
      }, [email, totalScore, resultBand, dimensionScores]);

      const progress = useMemo(() => Math.round((currentQ / QUESTIONS.length) * 100), [currentQ]);

      // ============================================================
      // PAGE INTRO
      // ============================================================
      
      if (page === "intro") {
        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50 to-purple-50 p-4 md:p-8">
            <div className="max-w-3xl mx-auto">
              <div className="text-center mb-8">
                <div className="inline-block p-4 bg-indigo-100 rounded-2xl mb-4">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-indigo-600">
                    <path d="M9.5 2c-1.82 0-3.53.5-5 1.36C2.68 4.72 1.5 6.73 1.5 9c0 1.56.52 3 1.39 4.14.87 1.14 2.07 2 3.43 2.36"/>
                    <path d="M14.5 2c1.82 0 3.53.5 5 1.36C21.32 4.72 22.5 6.73 22.5 9c0 1.56-.52 3-1.39 4.14-.87 1.14-2.07 2-3.43 2.36"/>
                    <path d="M12 2v20"/>
                    <path d="M9.5 15.5c0 1.38.62 2.5 1.5 2.5"/>
                    <path d="M14.5 15.5c0 1.38-.62 2.5-1.5 2.5"/>
                    <circle cx="9" cy="9" r="1" fill="currentColor"/>
                    <circle cx="15" cy="9" r="1" fill="currentColor"/>
                  </svg>
                </div>
                <h1 className="text-4xl md:text-5xl font-black text-slate-900 mb-3">
                  Parentalit√© Toxique & Reconstruction
                </h1>
                <p className="text-lg text-slate-600 font-medium">
                  Grille d'√©valuation clinique ‚Äî 60 items valid√©s
                </p>
              </div>

              <div className="bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-6">
                <div className="bg-amber-50 border-l-4 border-amber-500 p-4 mb-6 rounded-r-lg">
                  <div className="flex gap-3">
                    <span className="text-2xl flex-shrink-0">‚ö†Ô∏è</span>
                    <div className="text-sm text-amber-900">
                      <p className="font-bold mb-1">Avertissement m√©thodologique</p>
                      <p className="leading-relaxed">
                        Cette grille d'√©valuation clinique <strong>ne remplace pas un diagnostic professionnel</strong>. 
                        Elle vise √† identifier l'empreinte de dynamiques parentales toxiques et le niveau de reconstruction. 
                        En cas de scores √©lev√©s, un accompagnement psychoth√©rapeutique sp√©cialis√© est fortement recommand√©.
                      </p>
                    </div>
                  </div>
                </div>

                <div className="mb-8">
                  <div className="flex items-center gap-2 mb-4">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-slate-700">
                      <circle cx="11" cy="11" r="8"/>
                      <path d="m21 21-4.35-4.35"/>
                      <circle cx="11" cy="11" r="3"/>
                    </svg>
                    <h2 className="text-xl font-bold text-slate-900">M√©thodologie</h2>
                  </div>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-3 mb-6">
                    <div className="bg-rose-50 text-rose-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      Contr√¥le & invalidation
                    </div>
                    <div className="bg-fuchsia-50 text-fuchsia-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      Climat √©motionnel
                    </div>
                    <div className="bg-amber-50 text-amber-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      Attachement
                    </div>
                    <div className="bg-orange-50 text-orange-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      Auto-perception
                    </div>
                    <div className="bg-purple-50 text-purple-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      Trauma & r√©gulation
                    </div>
                    <div className="bg-emerald-50 text-emerald-700 px-3 py-2 rounded-lg text-center text-sm font-semibold">
                      R√©silience
                    </div>
                  </div>

                  <div className="prose prose-sm text-slate-700 space-y-3">
                    <p className="leading-relaxed">
                      Cette grille √©value <strong>six dimensions de l'empreinte parentale toxique et de la reconstruction</strong> : 
                      contr√¥le et invalidation, climat √©motionnel, capacit√© d'attachement sain, auto-perception et honte, 
                      r√©gulation du trauma et ressources de reparentage. √âvaluation r√©trospective et actuelle.
                    </p>
                  </div>
                </div>

                <div className="grid md:grid-cols-3 gap-4 mb-8">
                  <div className="bg-slate-50 p-4 rounded-xl text-center">
                    <div className="flex justify-center mb-2">
                      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-indigo-600">
                        <circle cx="12" cy="13" r="9"/>
                        <polyline points="12 7 12 13 15 15"/>
                        <path d="M10 2h4"/>
                      </svg>
                    </div>
                    <div className="text-2xl font-bold text-slate-900">18-24 min</div>
                    <div className="text-sm text-slate-600">Dur√©e estim√©e</div>
                  </div>
                  <div className="bg-slate-50 p-4 rounded-xl text-center">
                    <div className="flex justify-center mb-2">
                      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-indigo-600">
                        <line x1="18" y1="20" x2="18" y2="10"/>
                        <line x1="12" y1="20" x2="12" y2="4"/>
                        <line x1="6" y1="20" x2="6" y2="14"/>
                      </svg>
                    </div>
                    <div className="text-2xl font-bold text-slate-900">60 questions</div>
                    <div className="text-sm text-slate-600">Grille clinique</div>
                  </div>
                  <div className="bg-slate-50 p-4 rounded-xl text-center">
                    <div className="flex justify-center mb-2">
                      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-indigo-600">
                        <path d="M3 3v18h18"/>
                        <path d="M18 9l-5 5-4-4-4 4"/>
                        <circle cx="18" cy="9" r="2" fill="currentColor"/>
                        <circle cx="13" cy="14" r="2" fill="currentColor"/>
                        <circle cx="9" cy="10" r="2" fill="currentColor"/>
                        <circle cx="5" cy="14" r="2" fill="currentColor"/>
                      </svg>
                    </div>
                    <div className="text-2xl font-bold text-slate-900">6 dimensions</div>
                    <div className="text-sm text-slate-600">Analyse multi-axes</div>
                  </div>
                </div>

                <button
                  onClick={() => setPage("test")}
                  className="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white text-lg font-bold py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl"
                >
                  Commencer l'√©valuation ‚Üí
                </button>
              </div>

              <div className="text-center text-xs text-slate-500 space-y-1">
                <p className="font-semibold">NO√âSIS ‚Äî Parentalit√© Toxique v1.0 ‚Ä¢ ¬© 2025</p>
                <p>Confidentialit√© : aucune donn√©e collect√©e sans action explicite (RGPD)</p>
              </div>
            </div>
          </div>
        );
      }

      // ============================================================
      // PAGE TEST
      // ============================================================

      if (page === "test") {
        const q = QUESTIONS[currentQ];
        const dimInfo = AXES.find(d => d.key === q.dim);
        const colorMap = {
          rose: { bg: "bg-rose-50", border: "border-rose-300", text: "text-rose-700", badge: "bg-rose-100 text-rose-700" },
          fuchsia: { bg: "bg-fuchsia-50", border: "border-fuchsia-300", text: "text-fuchsia-700", badge: "bg-fuchsia-100 text-fuchsia-700" },
          amber: { bg: "bg-amber-50", border: "border-amber-300", text: "text-amber-700", badge: "bg-amber-100 text-amber-700" },
          orange: { bg: "bg-orange-50", border: "border-orange-300", text: "text-orange-700", badge: "bg-orange-100 text-orange-700" },
          purple: { bg: "bg-purple-50", border: "border-purple-300", text: "text-purple-700", badge: "bg-purple-100 text-purple-700" },
          emerald: { bg: "bg-emerald-50", border: "border-emerald-300", text: "text-emerald-700", badge: "bg-emerald-100 text-emerald-700" },
        };
        const colors = colorMap[dimInfo.color];

        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50 to-purple-50 p-4 md:p-8">
            <div className="max-w-3xl mx-auto">
              
              <div className="mb-6">
                <div className="flex justify-between items-center mb-2">
                  <span className="text-sm font-medium text-slate-600">
                    Question {currentQ + 1} / {QUESTIONS.length}
                  </span>
                  <span className="text-sm font-bold text-indigo-600">{progress}%</span>
                </div>
                <div className="w-full bg-slate-200 rounded-full h-3 overflow-hidden">
                  <div 
                    className="h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-300"
                    style={{ width: `${progress}%` }}
                  />
                </div>
              </div>

              <div className="bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-6">
                <div className="flex items-center gap-3 mb-6">
                  <div className={`w-12 h-12 rounded-full ${colors.bg} ${colors.border} border-2 flex items-center justify-center font-bold ${colors.text} text-lg`}>
                    {currentQ + 1}
                  </div>
                  <span className={`px-3 py-1 rounded-full text-xs font-semibold ${colors.badge}`}>
                    {dimInfo.label}
                  </span>
                </div>

                <h2 className="text-xl md:text-2xl font-bold text-slate-900 mb-8 leading-relaxed">
                  {q.text}
                </h2>

                <div className="space-y-3">
                  {CHOICES.map(choice => {
                    const isSelected = answers[q.id] === choice.value;
                    return (
                      <button
                        key={choice.value}
                        onClick={() => handleAnswer(q.id, choice.value)}
                        className={`w-full text-left p-4 rounded-xl border-2 transition-all ${
                          isSelected
                            ? 'bg-indigo-50 border-indigo-500 shadow-lg'
                            : 'bg-white border-slate-200 hover:border-indigo-300 hover:bg-slate-50'
                        }`}
                      >
                        <div className="flex items-center justify-between">
                          <div>
                            <div className={`font-semibold mb-1 ${isSelected ? 'text-indigo-700' : 'text-slate-900'}`}>
                              {choice.label}
                            </div>
                            <div className="text-xs text-slate-500">{choice.anchor}</div>
                          </div>
                          <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${
                            isSelected ? 'bg-indigo-500 border-indigo-500' : 'border-slate-300'
                          }`}>
                            {isSelected && <span className="text-white text-xs font-bold">‚úì</span>}
                          </div>
                        </div>
                      </button>
                    );
                  })}
                </div>
              </div>

              <div className="flex gap-4">
                <button
                  onClick={() => setCurrentQ(c => Math.max(0, c - 1))}
                  disabled={currentQ === 0}
                  className="flex-1 bg-slate-200 hover:bg-slate-300 disabled:bg-slate-100 disabled:text-slate-400 text-slate-700 font-semibold py-3 px-6 rounded-xl transition"
                >
                  ‚Üê Pr√©c√©dent
                </button>
                
                {currentQ === QUESTIONS.length - 1 ? (
                  <button
                    onClick={goToResults}
                    disabled={!allAnswered}
                    className="flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:from-slate-300 disabled:to-slate-300 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg"
                  >
                    Voir les r√©sultats ‚Üí
                  </button>
                ) : (
                  <button
                    onClick={() => setCurrentQ(c => Math.min(QUESTIONS.length - 1, c + 1))}
                    className="flex-1 bg-slate-700 hover:bg-slate-800 text-white font-semibold py-3 px-6 rounded-xl transition"
                  >
                    Suivant ‚Üí
                  </button>
                )}
              </div>

              <div className="mt-4 text-center">
                <button
                  onClick={goToResults}
                  disabled={!allAnswered}
                  className="text-sm text-slate-500 hover:text-slate-700 underline disabled:text-slate-300"
                >
                  {allAnswered ? "Aller directement aux r√©sultats" : `${QUESTIONS.length - Object.keys(answers).length} question(s) restante(s)`}
                </button>
              </div>
            </div>
          </div>
        );
      }

      // ============================================================
      // PAGE R√âSULTATS + SECTION IMPRIMABLE
      // ============================================================

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50 to-purple-50 p-4 md:p-8">
          <div className="max-w-5xl mx-auto">
            
            {/* SECTION √âCRAN */}
            <div className="no-print">
              <div className="text-center mb-8">
                <div className="inline-block p-4 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-2xl mb-4">
                  <svg width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="text-indigo-600">
                    <path d="M3 3v18h18"/>
                    <path d="M18 9l-5 5-4-4-4 4"/>
                    <circle cx="18" cy="9" r="2"/>
                    <circle cx="13" cy="14" r="2"/>
                    <circle cx="9" cy="10" r="2"/>
                    <circle cx="5" cy="14" r="2"/>
                  </svg>
                </div>
                <h1 className="text-4xl md:text-5xl font-black text-slate-900 mb-3">
                  Tes r√©sultats
                </h1>
                <p className="text-lg text-slate-600 font-medium">
                  Analyse d√©taill√©e de ton empreinte et reconstruction
                </p>
              </div>

              <div className="bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-6">
                <div className="text-center mb-6">
                  <div className="text-6xl font-black text-slate-900 mb-2">
                    {totalScore}<span className="text-3xl text-slate-400">/180</span>
                  </div>
                  <div className={`inline-block px-6 py-2 rounded-full text-lg font-bold ${
                    resultBand.color === 'green' ? 'bg-green-100 text-green-700' :
                    resultBand.color === 'yellow' ? 'bg-yellow-100 text-yellow-700' :
                    resultBand.color === 'orange' ? 'bg-orange-100 text-orange-700' :
                    'bg-red-100 text-red-700'
                  }`}>
                    {resultBand.band}
                  </div>
                </div>

                <div className="bg-slate-50 p-6 rounded-2xl mb-6">
                  <h3 className="font-bold text-slate-900 mb-3">üîç Interpr√©tation clinique</h3>
                  <p className="text-sm text-slate-700 leading-relaxed">
                    {resultBand.message}
                  </p>
                </div>

                <div className="space-y-4 mb-6">
                  <h3 className="font-bold text-slate-900">Scores par dimension</h3>
                  {AXES.map(axis => {
                    const score = dimensionScores[axis.key];
                    const max = QUESTIONS.filter(q => q.dim === axis.key).length * 3;
                    const percentage = Math.round((score / max) * 100);
                    const colorMap = {
                      rose: { bg: "bg-rose-50", bar: "bg-rose-500", text: "text-rose-700" },
                      fuchsia: { bg: "bg-fuchsia-50", bar: "bg-fuchsia-500", text: "text-fuchsia-700" },
                      amber: { bg: "bg-amber-50", bar: "bg-amber-500", text: "text-amber-700" },
                      orange: { bg: "bg-orange-50", bar: "bg-orange-500", text: "text-orange-700" },
                      purple: { bg: "bg-purple-50", bar: "bg-purple-500", text: "text-purple-700" },
                      emerald: { bg: "bg-emerald-50", bar: "bg-emerald-500", text: "text-emerald-700" },
                    };
                    const colors = colorMap[axis.color];
                    
                    return (
                      <div key={axis.key} className={`p-4 rounded-xl ${colors.bg}`}>
                        <div className="flex justify-between items-center mb-2">
                          <span className={`text-sm font-bold ${colors.text}`}>{axis.label}</span>
                          <span className="text-sm font-bold text-slate-700">{score}/{max}</span>
                        </div>
                        <div className="w-full bg-white rounded-full h-3 overflow-hidden">
                          <div 
                            className={`h-full ${colors.bar} transition-all duration-500`}
                            style={{ width: `${percentage}%` }}
                          />
                        </div>
                        <div className="text-xs text-slate-600 mt-1">{percentage}%</div>
                      </div>
                    );
                  })}
                </div>

                <div className="bg-slate-50 p-6 rounded-2xl">
                  <h3 className="font-bold text-slate-900 mb-3">üìå Ton profil dominant</h3>
                  <p className="text-sm font-semibold text-indigo-600 mb-2">
                    {AXES.find(d => d.key === profileAnalysis.dominant)?.label}
                  </p>
                  <p className="text-sm text-slate-700 leading-relaxed">
                    {profileAnalysis.analysis}
                  </p>
                </div>
              </div>

              <div className="grid md:grid-cols-2 gap-6">
                
                <div className="bg-white rounded-2xl shadow-xl p-6">
                  <h2 className="text-xl font-bold text-slate-900 mb-4">Recommandations</h2>
                  <ul className="space-y-3">
                    {resultBand.recommendations.map((rec, idx) => (
                      <li key={idx} className="flex gap-3 text-sm text-slate-700">
                        <span className="flex-shrink-0 w-6 h-6 rounded-full bg-indigo-100 text-indigo-600 font-bold text-xs flex items-center justify-center">
                          {idx + 1}
                        </span>
                        <span>{rec}</span>
                      </li>
                    ))}
                  </ul>

                  {resultBand.severity === 'critical' && (
                    <div className="mt-6 pt-6 border-t-2 border-slate-100">
                      <h3 className="font-bold text-slate-900 mb-3">Ressources d'urgence</h3>
                      <ul className="space-y-2 text-sm">
                        <li>
                          <span className="text-slate-900 font-medium">3114</span>
                          <span className="text-slate-600"> ‚Äî Pr√©vention suicide</span>
                        </li>
                        <li>
                          <span className="text-slate-900 font-medium">116 006</span>
                          <span className="text-slate-600"> ‚Äî Aide aux victimes</span>
                        </li>
                        <li>
                          <span className="text-slate-900 font-medium">STOP VOG</span>
                          <span className="text-slate-600"> ‚Äî Association violence √©ducative</span>
                        </li>
                      </ul>
                    </div>
                  )}
                </div>

                <div className="bg-white rounded-2xl shadow-xl p-6">
                  <h2 className="text-xl font-bold text-slate-900 mb-4">Exporter les r√©sultats</h2>
                  
                  <div className="space-y-3">
                    <button
                      onClick={handlePDF}
                      className="w-full bg-slate-900 text-white font-semibold py-3 px-4 rounded-xl hover:bg-slate-800 transition"
                    >
                      üìÑ T√©l√©charger en PDF
                    </button>

                    <button
                      onClick={handleDownloadJSON}
                      className="w-full bg-slate-700 text-white font-semibold py-3 px-4 rounded-xl hover:bg-slate-600 transition"
                    >
                      üíæ T√©l√©charger en JSON
                    </button>

                    <div className="pt-4 border-t-2 border-slate-100">
                      <label className="block text-sm font-medium text-slate-700 mb-2">
                        Envoyer par email
                      </label>
                      <div className="flex gap-2">
                        <input
                          type="email"
                          value={email}
                          onChange={(e) => setEmail(e.target.value)}
                          placeholder="email@exemple.com"
                          className="flex-1 rounded-lg border-2 border-slate-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none"
                        />
                        <button
                          onClick={handleEmail}
                          disabled={!email}
                          className="bg-indigo-600 disabled:bg-slate-300 text-white font-semibold px-4 py-2 rounded-lg hover:bg-indigo-700 transition"
                        >
                          üìß
                        </button>
                      </div>
                    </div>

                    <button
                      onClick={reset}
                      className="w-full mt-4 text-slate-600 hover:text-slate-900 font-medium underline text-sm"
                    >
                      Refaire le test
                    </button>
                  </div>
                </div>
              </div>

              <div className="mt-8 text-center text-xs text-slate-500 space-y-2">
                <p className="font-semibold">NO√âSIS ‚Äî Parentalit√© Toxique v1.0 ‚Ä¢ ¬© 2025</p>
                <p>Outil de pr√©-diagnostic d'orientation ‚Ä¢ Pas un diagnostic m√©dical</p>
                <p>Confidentialit√© : aucune donn√©e collect√©e sans action explicite (RGPD)</p>
              </div>
            </div>

            {/* SECTION IMPRIMABLE PDF (cach√©e √† l'√©cran) */}
            <div className="print-only print-container">
              <div className="print-section">
                <h1 className="print-header">R√©sultats ‚Äî Parentalit√© Toxique & Reconstruction</h1>
                <p className="print-text">Date : {new Date().toLocaleDateString('fr-FR')}</p>
                <p className="print-text">Score total : <strong>{totalScore}/180</strong></p>
                <p className="print-text">Profil : <strong>{resultBand.band}</strong></p>
              </div>

              <div className="print-section">
                <h2 className="print-subheader">Interpr√©tation clinique</h2>
                <p className="print-text">{resultBand.message}</p>
              </div>

              <div className="print-section">
                <h2 className="print-subheader">Scores par dimension</h2>
                {AXES.map(axis => {
                  const score = dimensionScores[axis.key];
                  const max = QUESTIONS.filter(q => q.dim === axis.key).length * 3;
                  const percentage = Math.round((score / max) * 100);
                  return (
                    <div key={axis.key} className="print-score-box">
                      <p className="print-text"><strong>{axis.label}</strong> : {score}/{max} ({percentage}%)</p>
                    </div>
                  );
                })}
              </div>

              <div className="print-section">
                <h2 className="print-subheader">Profil dominant</h2>
                <p className="print-text"><strong>{AXES.find(d => d.key === profileAnalysis.dominant)?.label}</strong></p>
                <p className="print-text">{profileAnalysis.analysis}</p>
              </div>

              <div className="print-section">
                <h2 className="print-subheader">Recommandations</h2>
                {resultBand.recommendations.map((rec, idx) => (
                  <p key={idx} className="print-reco">{idx + 1}. {rec}</p>
                ))}
              </div>

              {/* D√âTAIL COMPLET DES QUESTIONS PAR AXE */}
              <div className="print-section" style={{pageBreakBefore: 'always'}}>
                <h2 className="print-header">D√©tail des r√©ponses par dimension</h2>
                
                {AXES.map(axis => {
                  const axisQuestions = QUESTIONS.filter(q => q.dim === axis.key);
                  return (
                    <div key={axis.key} className="print-axis-section">
                      <h3 className="print-subheader">{axis.label}</h3>
                      {axisQuestions.map(q => {
                        const answer = CHOICES.find(c => c.value === answers[q.id]);
                        return (
                          <div key={q.id} className="print-question">
                            <p className="print-text">
                              <strong>{q.id}</strong> : {q.text}
                            </p>
                            <p className="print-text" style={{paddingLeft: '16px', color: '#4b5563'}}>
                              ‚Üí R√©ponse : <strong>{answer?.label || 'Non r√©pondu'}</strong> ({answer?.anchor || ''})
                            </p>
                          </div>
                        );
                      })}
                    </div>
                  );
                })}
              </div>

              <div className="print-section" style={{marginTop: '20px', paddingTop: '12px', borderTop: '1px solid #e2e8f0'}}>
                <p className="print-text" style={{fontSize: '10px', color: '#64748b'}}>
                  NO√âSIS ‚Äî Parentalit√© Toxique v1.0 ‚Ä¢ ¬© 2025 ‚Ä¢ Outil de pr√©-diagnostic d'orientation, ne remplace pas un diagnostic m√©dical
                </p>
              </div>
            </div>
          </div>
        </div>
      );
    }

    // ============================================================
    // RENDU DANS LE DOM
    // ============================================================

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<ParentaliteTest />);
  </script>
</body>
</html>
