<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Autotest Trauma Bonding ‚Äî √âvaluation Diff√©rentielle | NO√âSIS</title>
  <meta name="description" content="Outil d'auto-√©valuation pour distinguer lien traumatique (trauma bonding), amour sain et attachement anxieux. 50 items, 5 axes cliniques, analyse multidimensionnelle.">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Autotest Trauma Bonding ‚Äî NO√âSIS">
  <meta property="og:description" content="√âvaluation diff√©rentielle rigoureuse des dynamiques relationnelles : trauma bonding, amour sain, attachement anxieux.">
  <meta property="og:type" content="website">
  
  <!-- Polices Google -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@300;400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* ==================== VARIABLES CSS NO√âSIS ==================== */
    :root {
      /* Palette Chromatique NO√âSIS */
      --noir-absolu: #0A0A0A;
      --noir-doux: #111111;
      --noir-surface: #1A1A1A;
      --creme-principal: #F7F5EF;
      --creme-chaud: #F9F7F1;
      --blanc-surface: #FFFFFF;
      --or-signature: #C7A86D;
      --or-riche: #D4B980;
      --or-sombre: #A89158;
      --or-subtil: rgba(199,168,109,.08);
      --or-leger: rgba(199,168,109,.15);
      --or-moyen: rgba(199,168,109,.25);
      
      /* Couleurs Dimensionnelles Trauma Bonding */
      --coercion-color: #dc2626;
      --coercion-bg: rgba(220,38,38,0.08);
      --anxious-color: #f59e0b;
      --anxious-bg: rgba(245,158,11,0.08);
      --health-color: #059669;
      --health-bg: rgba(5,150,105,0.08);
      --neuro-color: #7c3aed;
      --neuro-bg: rgba(124,58,237,0.08);
      --resilience-color: #0284c7;
      --resilience-bg: rgba(2,132,199,0.08);
      
      /* Typographie */
      --fs-xs: 12px; --fs-sm: 14px; --fs-md: 18px;
      --fs-lg: 21px; --fs-xl: 24px; --fs-2xl: 32px;
      --fs-3xl: 42px; --fs-4xl: 56px;
      --lh-tight: 1.2; --lh-normal: 1.5; --lh-relaxed: 1.7;
      
      /* Spacing (√©chelle 8px) */
      --s-2: 8px; --s-3: 12px; --s-4: 16px; --s-6: 24px;
      --s-8: 32px; --s-12: 48px; --s-16: 64px; --s-20: 80px;
      
      /* Ombres */
      --shadow-soft: 0 2px 8px rgba(10,10,10,.08), 0 1px 2px rgba(10,10,10,.12);
      --shadow-medium: 0 4px 16px rgba(10,10,10,.1), 0 2px 4px rgba(10,10,10,.15);
      --shadow-large: 0 8px 32px rgba(10,10,10,.12), 0 2px 8px rgba(10,10,10,.18);
      
      /* Bordures */
      --border-subtil: rgba(10,10,10,.08);
      --border-leger: rgba(10,10,10,.12);
      --border-visible: rgba(10,10,10,.18);
      
      /* Rayons */
      --radius-sm: 4px; --radius-md: 8px; --radius-lg: 12px;
      --radius-xl: 16px; --radius-2xl: 24px; --radius-pill: 9999px;
      
      /* Transitions */
      --ease-standard: cubic-bezier(0.4, 0.0, 0.2, 1);
      --ease-spring: cubic-bezier(0.16, 1, 0.3, 1);
      --duration-fast: 150ms; --duration-normal: 250ms; --duration-slow: 350ms;
    }
    
    /* ==================== RESET & BASE ==================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      font-size: var(--fs-md);
      line-height: var(--lh-relaxed);
      color: var(--noir-absolu);
      background: var(--creme-principal);
      -webkit-font-smoothing: antialiased;
    }
    
    h1, h2, h3, h4, h5 {
      font-family: 'Fraunces', serif;
      font-weight: 600;
      line-height: var(--lh-tight);
    }
    
    /* ==================== LAYOUT ==================== */
    .app-container {
      max-width: 900px;
      margin: 0 auto;
      padding: var(--s-12) var(--s-6);
    }
    
    .screen {
      display: none;
    }
    
    .screen.active {
      display: block;
      animation: fadeIn var(--duration-normal) var(--ease-standard);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* ==================== √âCRAN INTRO ==================== */
    .intro-header {
      text-align: center;
      margin-bottom: var(--s-12);
    }
    
    .icon-container {
      width: 80px;
      height: 80px;
      margin: 0 auto var(--s-4);
      background: linear-gradient(135deg, var(--or-subtil), var(--or-leger));
      border: 2px solid var(--or-signature);
      border-radius: var(--radius-xl);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .icon-svg {
      width: 40px;
      height: 40px;
      stroke: var(--or-signature);
      fill: none;
    }
    
    .intro-title {
      font-size: var(--fs-3xl);
      color: var(--noir-absolu);
      margin-bottom: var(--s-3);
    }
    
    .intro-subtitle {
      font-size: var(--fs-md);
      color: rgba(10,10,10,0.6);
      font-weight: 400;
    }
    
    /* Cartes */
    .card {
      background: var(--blanc-surface);
      border-radius: var(--radius-2xl);
      padding: var(--s-12);
      margin-bottom: var(--s-8);
      box-shadow: var(--shadow-large);
    }
    
    .card h2 {
      font-size: var(--fs-xl);
      margin-bottom: var(--s-6);
      display: flex;
      align-items: center;
      gap: var(--s-3);
    }
    
    .card-icon {
      width: 24px;
      height: 24px;
      stroke: var(--or-signature);
    }
    
    .card p {
      font-size: var(--fs-md);
      line-height: var(--lh-relaxed);
      color: rgba(10,10,10,0.8);
      margin-bottom: var(--s-4);
    }
    
    .card p:last-child {
      margin-bottom: 0;
    }
    
    /* Warning Box */
    .warning-box {
      background: #fffbeb;
      border-left: 4px solid var(--or-signature);
      border-radius: var(--radius-md);
      padding: var(--s-6);
      margin-bottom: var(--s-8);
    }
    
    .warning-box h3 {
      font-size: var(--fs-lg);
      margin-bottom: var(--s-3);
      display: flex;
      align-items: center;
      gap: var(--s-2);
    }
    
    .warning-icon {
      width: 20px;
      height: 20px;
      stroke: var(--or-signature);
      fill: none;
    }
    
    .warning-box p {
      font-size: var(--fs-sm);
      line-height: var(--lh-relaxed);
      color: rgba(10,10,10,0.75);
      margin-bottom: var(--s-3);
    }
    
    .warning-box p:last-child {
      margin-bottom: 0;
    }
    
    /* Urgent Box */
    .urgent-box {
      background: #fee2e2;
      border-left: 4px solid #dc2626;
      border-radius: var(--radius-md);
      padding: var(--s-6);
      margin-bottom: var(--s-8);
    }
    
    .urgent-box h3 {
      font-size: var(--fs-lg);
      margin-bottom: var(--s-3);
      color: #991b1b;
      display: flex;
      align-items: center;
      gap: var(--s-2);
    }
    
    .urgent-box p, .urgent-box ul {
      font-size: var(--fs-sm);
      line-height: var(--lh-relaxed);
      color: rgba(153,27,27,0.85);
    }
    
    .urgent-box ul {
      list-style: none;
      padding-left: 0;
      margin-top: var(--s-3);
    }
    
    .urgent-box li {
      margin-bottom: var(--s-2);
    }
    
    .urgent-box strong {
      color: #991b1b;
      font-weight: 600;
    }
    
    /* Dimensions List */
    .dimensions-list {
      list-style: none;
      padding: 0;
      margin: var(--s-6) 0;
    }
    
    .dimension-item {
      padding: var(--s-4);
      margin-bottom: var(--s-3);
      background: var(--blanc-surface);
      border-radius: var(--radius-lg);
      border-left: 4px solid currentColor;
    }
    
    .dimension-item.coercion {
      color: var(--coercion-color);
      background: var(--coercion-bg);
    }
    
    .dimension-item.anxious {
      color: var(--anxious-color);
      background: var(--anxious-bg);
    }
    
    .dimension-item.health {
      color: var(--health-color);
      background: var(--health-bg);
    }
    
    .dimension-item.neuro {
      color: var(--neuro-color);
      background: var(--neuro-bg);
    }
    
    .dimension-item.resilience {
      color: var(--resilience-color);
      background: var(--resilience-bg);
    }
    
    .dimension-item strong {
      display: block;
      font-size: var(--fs-lg);
      margin-bottom: var(--s-2);
      font-family: 'Fraunces', serif;
    }
    
    .dimension-item p {
      font-size: var(--fs-sm);
      color: rgba(10,10,10,0.75);
      margin: 0;
    }
    
    /* Consent Checkbox */
    .consent-container {
      display: flex;
      align-items: flex-start;
      gap: var(--s-3);
      padding: var(--s-6);
      background: var(--blanc-surface);
      border-radius: var(--radius-lg);
      margin-bottom: var(--s-8);
    }
    
    .consent-container input[type="checkbox"] {
      width: 20px;
      height: 20px;
      margin-top: 2px;
      cursor: pointer;
      flex-shrink: 0;
    }
    
    .consent-container label {
      font-size: var(--fs-md);
      color: rgba(10,10,10,0.85);
      cursor: pointer;
      line-height: var(--lh-normal);
    }
    
    /* Boutons */
    .btn {
      font-family: 'Inter', sans-serif;
      font-size: var(--fs-md);
      font-weight: 600;
      padding: var(--s-4) var(--s-8);
      border-radius: var(--radius-lg);
      border: none;
      cursor: pointer;
      transition: all var(--duration-normal) var(--ease-standard);
      display: inline-block;
      text-align: center;
    }
    
    .btn-primary {
      background: var(--or-signature);
      color: var(--blanc-surface);
    }
    
    .btn-primary:hover:not(:disabled) {
      background: var(--or-sombre);
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
    }
    
    .btn-primary:disabled {
      background: rgba(10,10,10,0.2);
      cursor: not-allowed;
      opacity: 0.5;
    }
    
    .btn-secondary {
      background: var(--blanc-surface);
      color: var(--noir-absolu);
      border: 2px solid var(--border-leger);
    }
    
    .btn-secondary:hover {
      border-color: var(--or-signature);
      color: var(--or-signature);
    }
    
    .btn-danger {
      background: #dc2626;
      color: var(--blanc-surface);
    }
    
    .btn-danger:hover {
      background: #991b1b;
    }
    
    .btn-full {
      width: 100%;
    }
    
    /* ==================== √âCRAN QUESTIONNAIRE ==================== */
    .question-container {
      background: var(--blanc-surface);
      border-radius: var(--radius-2xl);
      padding: var(--s-12);
      box-shadow: var(--shadow-large);
    }
    
    .progress-bar-container {
      width: 100%;
      height: 6px;
      background: rgba(10,10,10,0.08);
      border-radius: var(--radius-pill);
      overflow: hidden;
      margin-bottom: var(--s-8);
    }
    
    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--or-signature), var(--or-riche));
      transition: width var(--duration-slow) var(--ease-spring);
    }
    
    .progress-text {
      text-align: center;
      font-size: var(--fs-sm);
      color: rgba(10,10,10,0.6);
      margin-bottom: var(--s-6);
    }
    
    .question-number {
      font-size: var(--fs-sm);
      color: var(--or-signature);
      font-weight: 600;
      margin-bottom: var(--s-2);
    }
    
    .question-text {
      font-size: var(--fs-xl);
      color: var(--noir-absolu);
      margin-bottom: var(--s-8);
      line-height: var(--lh-normal);
    }
    
    .dimension-badge {
      display: inline-block;
      padding: var(--s-2) var(--s-4);
      border-radius: var(--radius-pill);
      font-size: var(--fs-xs);
      font-weight: 600;
      margin-bottom: var(--s-6);
    }
    
    .dimension-badge.coercion {
      background: var(--coercion-bg);
      color: var(--coercion-color);
    }
    
    .dimension-badge.anxious {
      background: var(--anxious-bg);
      color: var(--anxious-color);
    }
    
    .dimension-badge.health {
      background: var(--health-bg);
      color: var(--health-color);
    }
    
    .dimension-badge.neuro {
      background: var(--neuro-bg);
      color: var(--neuro-color);
    }
    
    .dimension-badge.resilience {
      background: var(--resilience-bg);
      color: var(--resilience-color);
    }
    
    .choices-container {
      display: flex;
      flex-direction: column;
      gap: var(--s-3);
      margin-bottom: var(--s-8);
    }
    
    .choice-option {
      position: relative;
    }
    
    .choice-option input[type="radio"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
    }
    
    .choice-label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--s-4) var(--s-6);
      border: 2px solid var(--border-leger);
      border-radius: var(--radius-lg);
      cursor: pointer;
      transition: all var(--duration-fast) var(--ease-standard);
      background: var(--blanc-surface);
    }
    
    .choice-option input[type="radio"]:checked + .choice-label {
      border-color: var(--or-signature);
      background: var(--or-subtil);
    }
    
    .choice-label:hover {
      border-color: var(--or-signature);
      background: var(--or-subtil);
    }
    
    .choice-main {
      font-size: var(--fs-md);
      font-weight: 600;
      color: var(--noir-absolu);
    }
    
    .choice-anchor {
      font-size: var(--fs-sm);
      color: rgba(10,10,10,0.5);
      font-weight: 400;
    }
    
    .navigation-buttons {
      display: flex;
      gap: var(--s-4);
      justify-content: space-between;
    }
    
    /* ==================== √âCRAN R√âSULTATS ==================== */
    .results-container {
      max-width: 1100px;
      margin: 0 auto;
    }
    
    .result-header {
      text-align: center;
      margin-bottom: var(--s-12);
      padding: var(--s-12);
      background: var(--blanc-surface);
      border-radius: var(--radius-2xl);
      box-shadow: var(--shadow-large);
    }
    
    .result-badge {
      display: inline-block;
      padding: var(--s-3) var(--s-6);
      border-radius: var(--radius-pill);
      font-size: var(--fs-sm);
      font-weight: 700;
      margin-bottom: var(--s-6);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .result-badge.vigilance {
      background: #fee2e2;
      color: #991b1b;
    }
    
    .result-badge.preoccupant {
      background: #fed7aa;
      color: #9a3412;
    }
    
    .result-badge.mixte {
      background: #fef3c7;
      color: #92400e;
    }
    
    .result-badge.favorable {
      background: #d1fae5;
      color: #065f46;
    }
    
    .result-title {
      font-size: var(--fs-3xl);
      color: var(--noir-absolu);
      margin-bottom: var(--s-3);
    }
    
    .result-score {
      font-size: var(--fs-xl);
      color: rgba(10,10,10,0.6);
      margin-bottom: var(--s-4);
    }
    
    .result-summary {
      font-size: var(--fs-md);
      line-height: var(--lh-relaxed);
      color: rgba(10,10,10,0.8);
      max-width: 700px;
      margin: 0 auto;
    }
    
    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: var(--s-8);
      margin-bottom: var(--s-12);
    }
    
    .result-card {
      background: var(--blanc-surface);
      border-radius: var(--radius-2xl);
      padding: var(--s-8);
      box-shadow: var(--shadow-medium);
    }
    
    .result-card h3 {
      font-size: var(--fs-xl);
      margin-bottom: var(--s-6);
      color: var(--noir-absolu);
    }
    
    .dimension-score-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--s-4);
      margin-bottom: var(--s-3);
      background: rgba(10,10,10,0.02);
      border-radius: var(--radius-md);
      border-left: 4px solid currentColor;
    }
    
    .dimension-score-item.coercion {
      color: var(--coercion-color);
    }
    
    .dimension-score-item.anxious {
      color: var(--anxious-color);
    }
    
    .dimension-score-item.health {
      color: var(--health-color);
    }
    
    .dimension-score-item.neuro {
      color: var(--neuro-color);
    }
    
    .dimension-score-item.resilience {
      color: var(--resilience-color);
    }
    
    .dimension-score-label {
      font-size: var(--fs-sm);
      font-weight: 600;
      color: var(--noir-absolu);
    }
    
    .dimension-score-value {
      font-size: var(--fs-lg);
      font-weight: 700;
    }
    
    .dimension-bar {
      width: 100%;
      height: 8px;
      background: rgba(10,10,10,0.08);
      border-radius: var(--radius-pill);
      overflow: hidden;
      margin-top: var(--s-2);
    }
    
    .dimension-bar-fill {
      height: 100%;
      border-radius: var(--radius-pill);
      transition: width var(--duration-slow) var(--ease-spring);
    }
    
    .dimension-bar-fill.coercion {
      background: var(--coercion-color);
    }
    
    .dimension-bar-fill.anxious {
      background: var(--anxious-color);
    }
    
    .dimension-bar-fill.health {
      background: var(--health-color);
    }
    
    .dimension-bar-fill.neuro {
      background: var(--neuro-color);
    }
    
    .dimension-bar-fill.resilience {
      background: var(--resilience-color);
    }
    
    .profile-analysis {
      background: var(--creme-chaud);
      padding: var(--s-8);
      border-radius: var(--radius-xl);
      margin-bottom: var(--s-6);
    }
    
    .profile-analysis h4 {
      font-size: var(--fs-lg);
      margin-bottom: var(--s-4);
      color: var(--noir-absolu);
    }
    
    .profile-analysis p {
      font-size: var(--fs-md);
      line-height: var(--lh-relaxed);
      color: rgba(10,10,10,0.8);
    }
    
    .recommendations-list {
      list-style: none;
      padding: 0;
    }
    
    .recommendation-item {
      display: flex;
      gap: var(--s-3);
      margin-bottom: var(--s-4);
      padding: var(--s-4);
      background: rgba(10,10,10,0.02);
      border-radius: var(--radius-md);
    }
    
    .recommendation-number {
      flex-shrink: 0;
      width: 28px;
      height: 28px;
      background: var(--or-signature);
      color: var(--blanc-surface);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--fs-sm);
      font-weight: 700;
    }
    
    .recommendation-text {
      font-size: var(--fs-md);
      line-height: var(--lh-relaxed);
      color: rgba(10,10,10,0.85);
    }
    
    .export-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--s-4);
      margin-top: var(--s-8);
    }
    
    .footer-info {
      text-align: center;
      margin-top: var(--s-12);
      padding-top: var(--s-8);
      border-top: 2px solid var(--border-subtil);
    }
    
    .footer-info p {
      font-size: var(--fs-sm);
      color: rgba(10,10,10,0.5);
      margin-bottom: var(--s-2);
    }
    
    .footer-logo {
      font-family: 'Fraunces', serif;
      font-size: var(--fs-xl);
      font-weight: 700;
      color: var(--or-signature);
      margin-bottom: var(--s-3);
    }
    
    /* ==================== RESPONSIVE ==================== */
    @media (max-width: 768px) {
      .app-container {
        padding: var(--s-6) var(--s-4);
      }
      
      .intro-title {
        font-size: var(--fs-2xl);
      }
      
      .question-text {
        font-size: var(--fs-lg);
      }
      
      .result-title {
        font-size: var(--fs-2xl);
      }
      
      .results-grid {
        grid-template-columns: 1fr;
      }
      
      .navigation-buttons {
        flex-direction: column;
      }
      
      .btn {
        width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      .intro-title {
        font-size: var(--fs-xl);
      }
      
      .question-text {
        font-size: var(--fs-md);
      }
      
      .card {
        padding: var(--s-6);
      }
    }

    /* ========================================
       NAVIGATION NOESIS
       ======================================== */
    nav {
        position: sticky;
        top: 0;
        background: var(--creme-principal);
        backdrop-filter: blur(20px) saturate(180%);
        border-bottom: 1px solid rgba(10, 10, 10, 0.08);
        padding: 20px 0;
        z-index: 2000;
        box-shadow: 0 1px 4px rgba(10, 10, 10, 0.08);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    nav.scrolled {
        padding: 14px 0;
        background: var(--creme-principal);
        border-bottom: 1px solid rgba(10, 10, 10, 0.12);
        box-shadow: 0 2px 12px rgba(10, 10, 10, 0.12);
    }

    nav .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
    }

    .logo {
        font-family: 'Cormorant Garamond', serif;
        font-size: 28px;
        font-weight: 700;
        letter-spacing: 0.25em;
        text-transform: uppercase;
        color: var(--noir-absolu);
        text-decoration: none;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        font-variant: small-caps;
        position: relative;
        display: flex;
        align-items: center;
    }

    nav.scrolled .logo {
        font-size: 24px;
    }

    .logo-text {
        position: relative;
    }

    .logo-text::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 1px;
        bottom: -4px;
        left: 0;
        background: linear-gradient(90deg,
            transparent 0%,
            var(--or-signature) 50%,
            transparent 100%);
        opacity: 0;
        transition: opacity 0.4s ease;
    }

    .logo:hover {
        color: var(--or-riche);
        letter-spacing: 0.28em;
    }

    .logo:hover .logo-text::before {
        opacity: 1;
    }

    nav ul {
        display: flex;
        gap: 2px;
        list-style: none;
        align-items: center;
        background-color: var(--blanc-surface);
        border: 1px solid rgba(10, 10, 10, 0.12);
        border-radius: 50px;
        padding: 6px;
        box-shadow: 0 1px 3px rgba(10, 10, 10, 0.08);
    }

    nav li {
        position: relative;
    }

    nav a:not(.logo) {
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 600;
        color: var(--text-primary);
        text-decoration: none;
        position: relative;
        padding: 10px 18px;
        border-radius: 40px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: inline-block;
        letter-spacing: 0.02em;
        white-space: nowrap;
    }

    nav a:not(.logo)::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 40px;
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
    }

    nav a:not(.logo):hover {
        color: var(--noir-absolu);
        transform: translateY(-1px);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.3),
            0 2px 4px rgba(199, 168, 109, 0.2);
    }

    nav a:not(.logo):hover::before {
        opacity: 1;
    }

    nav a:not(.logo).active {
        color: var(--noir-absolu);
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.35),
            0 2px 4px rgba(199, 168, 109, 0.25);
    }

    /* Boutons sociaux dans nav */
    .nav-social {
        display: flex;
        align-items: center;
        gap: 4px;
        margin-left: 16px;
        padding-left: 16px;
        border-left: 1px solid rgba(10, 10, 10, 0.12);
    }

    .nav-social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: transparent;
        color: var(--text-primary);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
        position: relative;
    }

    .nav-social-link svg {
        width: 20px;
        height: 20px;
        stroke-width: 1.5;
    }

    .nav-social-link::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 50%;
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
    }

    .nav-social-link:hover {
        color: var(--noir-absolu);
        transform: translateY(-1px);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.3),
            0 2px 4px rgba(199, 168, 109, 0.2);
    }

    .nav-social-link:hover::before {
        opacity: 1;
    }

    /* ============================================
       MENU HAMBURGER MOBILE
       ============================================ */
    .menu-toggle {
        display: none;
        flex-direction: column;
        gap: 6px;
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 8px;
        z-index: 2002;
        position: relative;
        transition: all 0.3s ease;
    }

    .menu-toggle span {
        width: 28px;
        height: 2px;
        background: var(--or-signature);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 2px;
    }

    .menu-toggle.active span:nth-child(1) {
        transform: rotate(45deg) translate(8px, 8px);
    }

    .menu-toggle.active span:nth-child(2) {
        opacity: 0;
    }

    .menu-toggle.active span:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -7px);
    }

    /* Responsive Navigation */
    @media (max-width: 1024px) {
        nav .container {
            padding: 0 24px;
            position: relative;
        }

        .menu-toggle {
            display: flex;
            position: relative;
            z-index: 2002;
        }

        nav ul {
            position: fixed;
            top: 0;
            right: -100%;
            height: 100vh;
            width: 320px;
            max-width: 85vw;
            flex-direction: column;
            background: linear-gradient(180deg,
                var(--noir-absolu) 0%,
                var(--noir-surface) 100%);
            padding: 100px 32px 40px;
            gap: 0;
            border-radius: 0;
            border: none;
            border-left: 1px solid rgba(199, 168, 109, 0.2);
            box-shadow:
                -4px 0 24px rgba(0, 0, 0, 0.8),
                -8px 0 48px rgba(0, 0, 0, 0.5);
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
        }

        nav ul.active {
            right: 0;
        }

        nav li {
            width: 100%;
            margin-bottom: 12px;
        }

        nav a:not(.logo) {
            display: block;
            width: 100%;
            padding: 16px 20px;
            font-size: 15px;
            text-align: left;
            touch-action: manipulation;
            border-radius: 8px;
        }

        .nav-social {
            margin-left: 0;
            padding-left: 0;
            padding-top: 24px;
            margin-top: 24px;
            border-left: none;
            border-top: 1px solid rgba(199, 168, 109, 0.2);
            justify-content: flex-start;
            gap: 12px;
        }

        .nav-social-link {
            width: 42px;
            height: 42px;
        }

        .nav-social-link svg {
            width: 20px;
            height: 20px;
        }

        /* Overlay pour fermer le menu */
        .menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(4px);
            z-index: 1999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .menu-overlay.active {
            display: block;
            opacity: 1;
        }
    }

    @media (max-width: 768px) {
        nav {
            padding: 16px 0;
        }

        nav.scrolled {
            padding: 12px 0;
        }

        .logo {
            font-size: 22px;
        }

        nav.scrolled .logo {
            font-size: 20px;
        }

        nav ul {
            width: 280px;
            padding: 80px 24px 32px;
        }
    }
  </style>
</head>
<body>
  <nav id="navbar">
    <div class="container">
      <a href="../index.html#accueil" class="logo">
        <span class="logo-text">NOESIS</span>
      </a>

      <!-- Bouton hamburger mobile -->
      <button class="menu-toggle" id="menuToggle" aria-label="Menu de navigation">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <ul id="navMenu">
        <li><a href="../index.html#accueil">Accueil</a></li>
        <li><a href="../index.html#methode">La M√©thode</a></li>
        <li><a href="../index.html#decouvrir">D√©couvrir</a></li>
        <li><a href="../Articles/articles-index.html">Articles</a></li>
        <li><a href="../autotests/autotests.html" class="active">Auto-tests</a></li>
        <li><a href="../Podcasts/podcast.html">Podcasts</a></li>
        <li><a href="../Livres/livres.html">Livres</a></li>
        <li><a href="../Accompagnement/accompagnement.html">Accompagnement</a></li>
        <li><a href="../index.html#engagement">Engagement</a></li>
        <li class="nav-social">
          <a href="https://www.instagram.com/noesis_analyse" target="_blank" rel="noopener noreferrer" class="nav-social-link" aria-label="Instagram NOESIS">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
              <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
              <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
            </svg>
          </a>
          <a href="https://www.linkedin.com/in/noesisanalyse" target="_blank" rel="noopener noreferrer" class="nav-social-link" aria-label="LinkedIn NOESIS">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
              <rect x="2" y="9" width="4" height="12"/>
              <circle cx="4" cy="4" r="2"/>
            </svg>
          </a>
          <a href="/cdn-cgi/l/email-protection#4c25232922342e2432293d233f0c2b212d2520622f2321" class="nav-social-link" aria-label="Email NOESIS">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
              <polyline points="22,6 12,13 2,6"/>
            </svg>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Overlay menu mobile -->
  <div class="menu-overlay" id="menuOverlay"></div>

<div class="app-container">
    
    <!-- ==================== √âCRAN INTRO ==================== -->
    <div id="screen-intro" class="screen active">
      <div class="intro-header">
        <div class="icon-container">
          <svg class="icon-svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
          </svg>
        </div>
        <h1 class="intro-title">Autotest Trauma Bonding</h1>
        <p class="intro-subtitle">√âvaluation Diff√©rentielle ‚Äî Distinguer Lien Traumatique, Amour Sain et Attachement Anxieux</p>
      </div>
      
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
          √Ä propos de cet outil
        </h2>
        <p>Ce questionnaire explore <strong>50 situations relationnelles</strong> organis√©es selon <strong>5 axes cliniques</strong> permettant de diff√©rencier les dynamiques de lien traumatique (trauma bonding), les patterns d'attachement anxieux et les marqueurs d'une relation saine.</p>
        <p>Dur√©e estim√©e : <strong>12-15 minutes</strong>. Vos r√©ponses restent <strong>strictement confidentielles</strong> et ne sont jamais transmises. Aucune donn√©e n'est collect√©e sans action explicite de votre part.</p>
      </div>
      
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 11l3 3L22 4"></path>
            <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
          </svg>
          Les 5 axes √©valu√©s
        </h2>
        <ul class="dimensions-list">
          <li class="dimension-item coercion">
            <strong>Dynamiques de coercition (trauma bonding)</strong>
            <p>Cycles alternance/d√©valorisation, double contrainte, contr√¥le coercitif</p>
          </li>
          <li class="dimension-item anxious">
            <strong>Attachement anxieux (interne)</strong>
            <p>Hyperactivation, recherche validation, ins√©curit√© relationnelle</p>
          </li>
          <li class="dimension-item health">
            <strong>Marqueurs d'amour sain (r√©ciprocit√©)</strong>
            <p>Coh√©rence, respect mutuel, autonomie pr√©serv√©e, s√©curit√© psychique</p>
          </li>
          <li class="dimension-item neuro">
            <strong>Neurostress & d√©pendance</strong>
            <p>Hypervigilance, alt√©rations somatiques, d√©pendance √©motionnelle</p>
          </li>
          <li class="dimension-item resilience">
            <strong>R√©gulation & ressources</strong>
            <p>Documentation factuelle, r√©seau soutien, strat√©gies protection</p>
          </li>
        </ul>
      </div>
      
      <div class="warning-box">
        <h3>
          <svg class="warning-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          Avertissement Essentiel
        </h3>
        <p>Cet outil constitue un <strong>instrument d'orientation et de sensibilisation</strong>. Il ne remplace en aucun cas une consultation avec un professionnel de sant√© mentale qualifi√© (psychologue, psychiatre, psychoth√©rapeute).</p>
        <p>Si vous √™tes en situation de violence conjugale ou que votre s√©curit√© est menac√©e, contactez imm√©diatement le <strong>3919 (24h/24, 7j/7, gratuit et anonyme)</strong> ou le <strong>116 006</strong> (aide aux victimes).</p>
        <p>Les r√©sultats refl√®tent votre perception subjective actuelle et n√©cessitent une interpr√©tation contextualis√©e par un professionnel comp√©tent.</p>
      </div>
      
      <div class="consent-container">
        <input type="checkbox" id="consent-check">
        <label for="consent-check">
          Je comprends que cet outil est un dispositif d'orientation et non un diagnostic m√©dical. J'accepte de proc√©der √† l'auto-√©valuation en toute connaissance de cause.
        </label>
      </div>
      
      <button id="start-btn" class="btn btn-primary btn-full" disabled onclick="startTest()">
        Commencer l'√©valuation
      </button>
    </div>
    
    <!-- ==================== √âCRAN QUESTIONNAIRE ==================== -->
    <div id="screen-test" class="screen">
      <div class="question-container">
        <div class="progress-bar-container">
          <div id="progress-bar" class="progress-bar-fill" style="width: 0%"></div>
        </div>
        <p id="progress-text" class="progress-text"></p>
        
        <span id="dimension-badge" class="dimension-badge"></span>
        <p class="question-number" id="question-number"></p>
        <h2 class="question-text" id="question-text"></h2>
        
        <div class="choices-container" id="choices-container"></div>
        
        <div class="navigation-buttons">
          <button class="btn btn-secondary" onclick="previousQuestion()" id="prev-btn">
            ‚Üê Pr√©c√©dent
          </button>
          <button class="btn btn-primary" onclick="nextQuestion()" id="next-btn" disabled>
            Suivant ‚Üí
          </button>
        </div>
      </div>
    </div>
    
    <!-- ==================== √âCRAN R√âSULTATS ==================== -->
    <div id="screen-results" class="screen">
      <div class="results-container">
        <div class="result-header">
          <div id="result-badge" class="result-badge"></div>
          <h1 class="result-title" id="result-title"></h1>
          <p class="result-score" id="result-score"></p>
          <p class="result-summary" id="result-summary"></p>
        </div>
        
        <div class="results-grid">
          <div class="result-card">
            <h3>Analyse Dimensionnelle</h3>
            <div id="dimension-scores"></div>
          </div>
          
          <div class="result-card">
            <h3>Profil Dominant</h3>
            <div id="profile-analysis" class="profile-analysis"></div>
          </div>
        </div>
        
        <div class="result-card">
          <h3>Recommandations Personnalis√©es</h3>
          <ul class="recommendations-list" id="recommendations-list"></ul>
        </div>
        
        <div id="urgent-resources"></div>
        
        <div class="result-card">
          <h3>Exporter les R√©sultats</h3>
          <div class="export-buttons">
            <button class="btn btn-primary" onclick="generatePDF()">
              üìÑ T√©l√©charger PDF
            </button>
            <button class="btn btn-secondary" onclick="downloadJSON()">
              üíæ T√©l√©charger JSON
            </button>
            <button class="btn btn-secondary" onclick="sendResultsByEmail()">
              üìß Envoyer par email
            </button>
          </div>
          <button class="btn btn-secondary btn-full" onclick="resetTest()" style="margin-top: var(--s-6);">
            Refaire le test
          </button>
        </div>
        
        <div class="footer-info">
          <p class="footer-logo">NO√âSIS</p>
          <p>Intelligence transdisciplinaire au service de la lucidit√©</p>
          <p>¬© 2025 NO√âSIS ‚Äî Tous droits r√©serv√©s</p>
          <p style="margin-top: var(--s-3); font-size: var(--fs-xs);">
            Outil de sensibilisation et pr√©-√©valuation ‚Äî Non valid√© psychom√©triquement<br>
            Ne remplace pas une consultation avec un professionnel qualifi√©<br>
            Confidentialit√© : aucune donn√©e collect√©e sans action explicite
          </p>
        </div>
      </div>
    </div>
    
  </div>

  <script>
    // ==================== CONFIGURATION ==================== 
    
    const AXES = [
      { 
        key: "coercion", 
        label: "Dynamiques de coercition", 
        fullLabel: "Dynamiques de coercition (trauma bonding)",
        color: "coercion"
      },
      { 
        key: "anxious", 
        label: "Attachement anxieux", 
        fullLabel: "Attachement anxieux (interne)",
        color: "anxious"
      },
      { 
        key: "health", 
        label: "Amour sain", 
        fullLabel: "Marqueurs d'amour sain (r√©ciprocit√©)",
        color: "health"
      },
      { 
        key: "neuro", 
        label: "Neurostress & d√©pendance", 
        fullLabel: "Neurostress & d√©pendance",
        color: "neuro"
      },
      { 
        key: "resilience", 
        label: "R√©gulation & ressources", 
        fullLabel: "R√©gulation & ressources",
        color: "resilience"
      }
    ];

    const SCALE_OPTIONS = [
      { value: 0, label: "Jamais", sublabel: "0 fois / 6 mois" },
      { value: 1, label: "Parfois", sublabel: "1-3√ó / mois" },
      { value: 2, label: "Souvent", sublabel: "1-3√ó / semaine" },
      { value: 3, label: "Tr√®s souvent", sublabel: "Quasi quotidien" }
    ];

    const QUESTIONS = [
      // Coercition (10 questions)
      {id:"Q1", dim:"coercion", text:"Je vis des cycles 'id√©alisation ‚Üí d√©valorisation ‚Üí excuses' qui se r√©p√®tent."},
      {id:"Q2", dim:"coercion", text:"Apr√®s des conflits, on me promet le changement sans suite durable."},
      {id:"Q3", dim:"coercion", text:"Je marche sur des ≈ìufs pour √©viter col√®re, silence punitif ou jalousie."},
      {id:"Q4", dim:"coercion", text:"Je me sens isol√©¬∑e de mes proches √† cause de la relation."},
      {id:"Q5", dim:"coercion", text:"Mes limites sont franchies (intrusion, contr√¥le, chantage affectif)."},
      {id:"Q6", dim:"coercion", text:"On invalide mes souvenirs ou on change la version des faits."},
      {id:"Q7", dim:"coercion", text:"Je ressens une forte intensit√© puis un retrait brutal et d√©stabilisant."},
      {id:"Q8", dim:"coercion", text:"On me fait porter la responsabilit√© des crises quoi que je fasse."},
      {id:"Q9", dim:"coercion", text:"Je me surprends √† accepter l'inacceptable pour garder la relation."},
      {id:"Q10", dim:"coercion", text:"Je crains des repr√©sailles (rupture, menaces voil√©es) si j'affirme mes besoins."},
      
      // Attachement anxieux (10 questions)
      {id:"Q11", dim:"anxious", text:"Je cherche souvent des preuves d'amour pour me rassurer."},
      {id:"Q12", dim:"anxious", text:"J'analyse les messages/temps de r√©ponse jusqu'√† angoisser."},
      {id:"Q13", dim:"anxious", text:"La distance ou l'autonomie de l'autre r√©active un abandon ancien."},
      {id:"Q14", dim:"anxious", text:"Je m'adapte excessivement par peur de d√©plaire."},
      {id:"Q15", dim:"anxious", text:"Je ressens des pics de jalousie li√©s surtout √† mon ins√©curit√©."},
      {id:"Q16", dim:"anxious", text:"Je catastrophise vite ('il/elle va partir')."},
      {id:"Q17", dim:"anxious", text:"J'ai besoin d'√™tre souvent valid√©¬∑e pour me sentir en s√©curit√©."},
      {id:"Q18", dim:"anxious", text:"M√™me avec quelqu'un de bienveillant, je doute de sa sinc√©rit√©."},
      {id:"Q19", dim:"anxious", text:"Je fusionne facilement et j'ai du mal √† garder mes rep√®res."},
      {id:"Q20", dim:"anxious", text:"Je rumine longtemps apr√®s des interactions neutres."},
      
      // Marqueurs sains (10 questions)
      {id:"Q21", dim:"health", text:"Nos paroles et nos actes sont globalement coh√©rents et stables."},
      {id:"Q22", dim:"health", text:"Le d√©saccord est possible sans punition ni menace."},
      {id:"Q23", dim:"health", text:"Nous respectons l'autonomie, l'amiti√© et la vie priv√©e de chacun."},
      {id:"Q24", dim:"health", text:"Les limites exprim√©es sont entendues et respect√©es."},
      {id:"Q25", dim:"health", text:"Les excuses sont suivies d'actes concrets et durables."},
      {id:"Q26", dim:"health", text:"Je peux exprimer une √©motion difficile sans craindre rejet ou d√©nigrement."},
      {id:"Q27", dim:"health", text:"Je me sens en s√©curit√© pour √™tre vuln√©rable sans √™tre exploit√©¬∑e."},
      {id:"Q28", dim:"health", text:"Nous r√©solvons les conflits de fa√ßon constructive, sans manipulation."},
      {id:"Q29", dim:"health", text:"Je conserve mon identit√© et mes centres d'int√©r√™t propres."},
      {id:"Q30", dim:"health", text:"La relation est source d'√©quilibre et de croissance mutuelle."},
      
      // Neurostress & d√©pendance (10 questions)
      {id:"Q31", dim:"neuro", text:"Mon corps r√©agit √† la simple pens√©e de la relation (naus√©e, boule au ventre)."},
      {id:"Q32", dim:"neuro", text:"Je suis en √©tat d'hypervigilance permanent (anticiper, d√©crypter les signes)."},
      {id:"Q33", dim:"neuro", text:"Mon sommeil est perturb√© par l'anxi√©t√© relationnelle."},
      {id:"Q34", dim:"neuro", text:"Je ressens un manque physique intense en cas de distance."},
      {id:"Q35", dim:"neuro", text:"Des sympt√¥mes somatiques apparaissent lors des tensions (migraines, troubles digestifs)."},
      {id:"Q36", dim:"neuro", text:"Je me sens 'accro' malgr√© la souffrance (compulsion √† v√©rifier, contacter)."},
      {id:"Q37", dim:"neuro", text:"Mon estime de moi d√©pend totalement de la validation de l'autre."},
      {id:"Q38", dim:"neuro", text:"Je ressens un vide terrifiant √† l'id√©e de quitter la relation."},
      {id:"Q39", dim:"neuro", text:"J'ai des flashbacks ou ruminations envahissantes li√©es √† la relation."},
      {id:"Q40", dim:"neuro", text:"Je n√©glige mes besoins basiques (alimentation, hygi√®ne, repos)."},
      
      // R√©gulation & ressources (10 questions)
      {id:"Q41", dim:"resilience", text:"Je documente les faits probl√©matiques (notes, captures, journal)."},
      {id:"Q42", dim:"resilience", text:"Je maintiens un r√©seau de soutien ext√©rieur actif."},
      {id:"Q43", dim:"resilience", text:"Je pratique des techniques de r√©gulation √©motionnelle (respiration, m√©ditation, sport)."},
      {id:"Q44", dim:"resilience", text:"Je consulte ou envisage de consulter un professionnel (psy, coach)."},
      {id:"Q45", dim:"resilience", text:"Je suis capable de nommer mes limites m√™me si elles ne sont pas respect√©es."},
      {id:"Q46", dim:"resilience", text:"J'ai un plan de sortie (logement, ressources financi√®res) au cas o√π."},
      {id:"Q47", dim:"resilience", text:"Je lis ou me renseigne sur les dynamiques relationnelles toxiques."},
      {id:"Q48", dim:"resilience", text:"Je parviens √† prendre du recul et √† observer la situation objectivement."},
      {id:"Q49", dim:"resilience", text:"Je me reconnecte r√©guli√®rement √† mes valeurs et √† ma dignit√©."},
      {id:"Q50", dim:"resilience", text:"Je reconnais mes progr√®s et mes efforts m√™me si la situation reste difficile."}
    ];

    const RESULT_PROFILES = [
      {
        range: [0, 30],
        level: "favorable",
        label: "Profil Favorable",
        summary: "Vos r√©ponses indiquent une dynamique relationnelle globalement saine avec des marqueurs de r√©ciprocit√©, respect mutuel et r√©gulation √©motionnelle pr√©serv√©e. L'attachement anxieux et les dynamiques coercitives sont peu pr√©sents.",
        recommendations: [
          "Continuez √† cultiver la communication authentique et le respect des limites dans votre relation.",
          "Maintenez votre r√©seau social et vos activit√©s personnelles pour pr√©server votre √©quilibre.",
          "Si des inqui√©tudes ponctuelles √©mergent, n'h√©sitez pas √† en discuter ouvertement avec votre partenaire.",
          "Pratiquez r√©guli√®rement l'auto-observation pour d√©tecter pr√©cocement tout changement dans la dynamique."
        ],
        urgent: false
      },
      {
        range: [31, 60],
        level: "mixte",
        label: "Profil Mixte ‚Äî Vigilance Recommand√©e",
        summary: "Votre situation pr√©sente des √©l√©ments contradictoires : certains marqueurs sains coexistent avec des patterns d'attachement anxieux ou des √©pisodes de tension. Une vigilance active est recommand√©e pour identifier si les difficult√©s rel√®vent de votre histoire personnelle ou de la dynamique relationnelle actuelle.",
        recommendations: [
          "Consultez un psychoth√©rapeute sp√©cialis√© en attachement pour explorer vos patterns relationnels internes.",
          "Documentez factuellement les situations probl√©matiques pour distinguer perception anxieuse et r√©alit√© objective.",
          "Travaillez sur la r√©gulation √©motionnelle (th√©rapie cognitive, pleine conscience, EMDR si trauma pass√©).",
          "√âvaluez avec honn√™tet√© si la relation offre un espace de croissance ou entretient votre ins√©curit√©.",
          "Renforcez votre r√©seau de soutien ext√©rieur (amis, famille, groupes de parole)."
        ],
        urgent: false
      },
      {
        range: [61, 90],
        level: "preoccupant",
        label: "Profil Pr√©occupant ‚Äî Soutien Professionnel N√©cessaire",
        summary: "Vos r√©ponses r√©v√®lent des dynamiques relationnelles potentiellement toxiques combinant √©l√©ments de coercition, hyperactivation anxieuse et d√©tresse neurophysiologique. La relation semble compromettre votre bien-√™tre psychique et somatique. Un accompagnement professionnel est fortement recommand√©.",
        recommendations: [
          "Consultez en priorit√© un psychologue ou psychiatre sp√©cialis√© en trauma relationnel.",
          "Documentez syst√©matiquement les comportements probl√©matiques (journal, captures, t√©moignages).",
          "Identifiez vos ressources de s√©curit√© (logement alternatif, soutien financier, r√©seau de confiance).",
          "Travaillez sur la diff√©renciation entre vos blessures d'attachement et les comportements objectivement abusifs de l'autre.",
          "Ne prenez pas de d√©cision majeure seul¬∑e : faites-vous accompagner par un professionnel comp√©tent.",
          "Si la situation se d√©grade, √©laborez un plan de sortie avec l'aide d'associations sp√©cialis√©es."
        ],
        urgent: false
      },
      {
        range: [91, 150],
        level: "vigilance",
        label: "Profil d'Alerte ‚Äî Situation √† Risque √âlev√©",
        summary: "Vos r√©ponses indiquent une situation relationnelle gravement pr√©occupante avec pr√©sence massive de dynamiques coercitives, d√©tresse neurophysiologique intense et ressources de r√©gulation fortement fragilis√©es. Vous √™tes potentiellement en situation de violence psychologique ou emprise. Votre s√©curit√© physique et psychique pourrait √™tre compromise.",
        recommendations: [
          "URGENCE : Contactez imm√©diatement le 3919 (violences conjugales, 24/7, gratuit, anonyme) ou le 116 006 (aide aux victimes).",
          "Consultez en priorit√© absolue un professionnel sp√©cialis√© en violence conjugale et trauma complexe.",
          "Documentez tout (messages, enregistrements si l√©gal, t√©moignages, certificats m√©dicaux, mains courantes).",
          "√âlaborez un plan de s√©curit√© d√©taill√© avec l'aide d'associations sp√©cialis√©es (En Avant Toute(s), CIDFF).",
          "Prot√©gez vos donn√©es num√©riques (changez mots de passe, s√©curisez t√©l√©phone, effacez historique).",
          "Identifiez un lieu refuge (ami¬∑e, famille, h√©bergement d'urgence) accessible rapidement.",
          "Ne confrontez pas directement votre partenaire sur vos d√©marches : cela pourrait aggraver les risques.",
          "Rapprochez-vous de votre m√©decin traitant pour documenter l'√©tat de sant√© et obtenir soutien m√©dical."
        ],
        urgent: true
      }
    ];

    // ==================== √âTAT DE L'APPLICATION ====================
    
    let state = {
      currentQuestionIndex: 0,
      answers: {}
    };

    // ==================== FONCTIONS NAVIGATION ====================
    
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
      });
      document.getElementById(screenId).classList.add('active');
    }

    function startTest() {
      showScreen('screen-test');
      displayQuestion();
    }

    function displayQuestion() {
      const question = QUESTIONS[state.currentQuestionIndex];
      const axis = AXES.find(a => a.key === question.dim);
      
      // Mise √† jour progression
      const progress = ((state.currentQuestionIndex + 1) / QUESTIONS.length) * 100;
      document.getElementById('progress-bar').style.width = progress + '%';
      document.getElementById('progress-text').textContent = 
        `Question ${state.currentQuestionIndex + 1} sur ${QUESTIONS.length}`;
      
      // Badge dimension
      const badge = document.getElementById('dimension-badge');
      badge.textContent = axis.label;
      badge.className = 'dimension-badge ' + axis.color;
      
      // Num√©ro et texte question
      document.getElementById('question-number').textContent = 
        `Question ${state.currentQuestionIndex + 1}`;
      document.getElementById('question-text').textContent = question.text;
      
      // Choix de r√©ponse
      const choicesContainer = document.getElementById('choices-container');
      choicesContainer.innerHTML = '';
      
      SCALE_OPTIONS.forEach(option => {
        const isSelected = state.answers[question.id] === option.value;
        
        const choiceDiv = document.createElement('div');
        choiceDiv.className = 'choice-option';
        
        const radio = document.createElement('input');
        radio.type = 'radio';
        radio.name = 'answer';
        radio.value = option.value;
        radio.id = 'choice-' + option.value;
        radio.checked = isSelected;
        radio.onchange = () => selectAnswer(option.value);
        
        const label = document.createElement('label');
        label.className = 'choice-label';
        label.htmlFor = 'choice-' + option.value;
        label.innerHTML = `
          <span class="choice-main">${option.label}</span>
          <span class="choice-anchor">${option.sublabel}</span>
        `;
        
        choiceDiv.appendChild(radio);
        choiceDiv.appendChild(label);
        choicesContainer.appendChild(choiceDiv);
      });
      
      // Boutons navigation
      document.getElementById('prev-btn').style.display = 
        state.currentQuestionIndex > 0 ? 'block' : 'none';
      
      const nextBtn = document.getElementById('next-btn');
      nextBtn.disabled = state.answers[question.id] === undefined;
      nextBtn.textContent = state.currentQuestionIndex === QUESTIONS.length - 1 
        ? 'Voir les r√©sultats' 
        : 'Suivant ‚Üí';
    }

    function selectAnswer(value) {
      const question = QUESTIONS[state.currentQuestionIndex];
      state.answers[question.id] = value;
      document.getElementById('next-btn').disabled = false;
    }

    function nextQuestion() {
      if (state.currentQuestionIndex < QUESTIONS.length - 1) {
        state.currentQuestionIndex++;
        displayQuestion();
      } else {
        calculateResults();
      }
    }

    function previousQuestion() {
      if (state.currentQuestionIndex > 0) {
        state.currentQuestionIndex--;
        displayQuestion();
      }
    }

    // ==================== CALCUL R√âSULTATS ====================
    
    function calculateResults() {
      const scores = calculateScores();
      const profile = getResultProfile(scores.total);
      const profileAnalysis = analyzeProfile(scores);
      
      displayResults(scores, profile, profileAnalysis);
      showScreen('screen-results');
    }

    function calculateScores() {
      const dimensionScores = {};
      let totalScore = 0;
      
      AXES.forEach(axis => {
        let axisScore = 0;
        let axisMax = 0;
        
        QUESTIONS.filter(q => q.dim === axis.key).forEach(q => {
          const answer = state.answers[q.id] || 0;
          axisScore += answer;
          axisMax += 3;
        });
        
        dimensionScores[axis.key] = {
          score: axisScore,
          max: axisMax,
          percentage: Math.round((axisScore / axisMax) * 100)
        };
        
        totalScore += axisScore;
      });
      
      return {
        total: totalScore,
        maxTotal: 150,
        dimensions: dimensionScores
      };
    }

    function getResultProfile(totalScore) {
      return RESULT_PROFILES.find(profile => 
        totalScore >= profile.range[0] && totalScore <= profile.range[1]
      );
    }

    function analyzeProfile(scores) {
      const dims = scores.dimensions;
      
      // Identifier dimension dominante
      let maxKey = null;
      let maxPercentage = 0;
      
      Object.entries(dims).forEach(([key, data]) => {
        if (data.percentage > maxPercentage) {
          maxPercentage = data.percentage;
          maxKey = key;
        }
      });
      
      // Analyses sp√©cifiques
      let analysis = '';
      
      if (maxKey === 'coercion' && dims.coercion.percentage >= 60) {
        analysis = "La dimension coercitive domine fortement votre exp√©rience relationnelle. Les cycles de tension, d√©valorisation et r√©conciliation temporaire sugg√®rent une dynamique de trauma bonding potentielle. Cette configuration n√©cessite une attention urgente et un accompagnement sp√©cialis√©.";
      } else if (maxKey === 'anxious' && dims.anxious.percentage >= 60) {
        analysis = "Votre profil r√©v√®le une hyperactivation anxieuse importante dans la sph√®re relationnelle. Il est crucial de diff√©rencier ce qui rel√®ve de vos blessures d'attachement internes et ce qui rel√®ve de comportements objectivement probl√©matiques de votre partenaire. Un travail th√©rapeutique sur l'attachement est fortement recommand√©.";
      } else if (maxKey === 'health' && dims.health.percentage >= 60) {
        analysis = "Les marqueurs d'amour sain dominent votre exp√©rience. Votre relation semble offrir un cadre de r√©ciprocit√©, respect et s√©curit√© psychologique. Continuez √† cultiver cette dynamique tout en restant attentif¬∑ve aux signaux de changement.";
      } else if (maxKey === 'neuro' && dims.neuro.percentage >= 60) {
        analysis = "La dimension neurophysiologique et de d√©pendance est fortement activ√©e. Votre corps porte les marques du stress relationnel chronique. Cette situation n√©cessite une prise en charge m√©dicale et psychologique pour √©viter l'√©puisement somatique complet.";
      } else if (maxKey === 'resilience') {
        if (dims.resilience.percentage >= 60) {
          analysis = "Vous mobilisez activement des ressources de protection et r√©gulation. Cette capacit√© est pr√©cieuse et doit √™tre renforc√©e, particuli√®rement si d'autres dimensions r√©v√®lent des difficult√©s relationnelles majeures.";
        } else {
          analysis = "Vos ressources de r√©gulation semblent fragilis√©es. Renforcer ce pilier (r√©seau de soutien, documentation, strat√©gies d'auto-protection) est prioritaire pour pr√©server votre int√©grit√© psychique.";
        }
      } else {
        analysis = "Votre profil pr√©sente une configuration mixte n√©cessitant une analyse contextuelle approfondie avec un professionnel. Les diff√©rentes dimensions interagissent de mani√®re complexe.";
      }
      
      return {
        dominant: maxKey,
        analysis: analysis
      };
    }

    function displayResults(scores, profile, profileAnalysis) {
      // Badge et titre
      document.getElementById('result-badge').textContent = profile.level.toUpperCase();
      document.getElementById('result-badge').className = 'result-badge ' + profile.level;
      document.getElementById('result-title').textContent = profile.label;
      document.getElementById('result-score').textContent = 
        `Score total : ${scores.total} / ${scores.maxTotal}`;
      document.getElementById('result-summary').textContent = profile.summary;
      
      // Scores dimensionnels
      const dimensionScoresContainer = document.getElementById('dimension-scores');
      dimensionScoresContainer.innerHTML = '';
      
      AXES.forEach(axis => {
        const data = scores.dimensions[axis.key];
        
        const item = document.createElement('div');
        item.className = 'dimension-score-item ' + axis.color;
        item.innerHTML = `
          <span class="dimension-score-label">${axis.label}</span>
          <span class="dimension-score-value">${data.percentage}%</span>
        `;
        
        const bar = document.createElement('div');
        bar.className = 'dimension-bar';
        bar.innerHTML = `<div class="dimension-bar-fill ${axis.color}" style="width: ${data.percentage}%"></div>`;
        
        dimensionScoresContainer.appendChild(item);
        dimensionScoresContainer.appendChild(bar);
      });
      
      // Analyse de profil
      const profileAnalysisContainer = document.getElementById('profile-analysis');
      const dominantAxis = AXES.find(a => a.key === profileAnalysis.dominant);
      profileAnalysisContainer.innerHTML = `
        <h4>Dimension dominante : ${dominantAxis.label}</h4>
        <p>${profileAnalysis.analysis}</p>
      `;
      
      // Recommandations
      const recommendationsList = document.getElementById('recommendations-list');
      recommendationsList.innerHTML = '';
      profile.recommendations.forEach((rec, idx) => {
        const li = document.createElement('li');
        li.className = 'recommendation-item';
        li.innerHTML = `
          <span class="recommendation-number">${idx + 1}</span>
          <span class="recommendation-text">${rec}</span>
        `;
        recommendationsList.appendChild(li);
      });
      
      // Ressources urgentes
      const urgentContainer = document.getElementById('urgent-resources');
      if (profile.urgent) {
        urgentContainer.innerHTML = `
          <div class="urgent-box">
            <h3>‚ö†Ô∏è Ressources d'Urgence</h3>
            <p>Votre situation n√©cessite une prise en charge imm√©diate. Contactez d√®s maintenant :</p>
            <ul>
              <li><strong>3919</strong> ‚Äî Violences conjugales (24/7, gratuit, anonyme)</li>
              <li><strong>116 006</strong> ‚Äî Aide aux victimes</li>
              <li><strong>En Avant Toute(s)</strong> ‚Äî Chat violences conjugales : commentonsaime.fr</li>
              <li><strong>CIDFF</strong> ‚Äî Centre d'Information sur les Droits des Femmes et des Familles</li>
              <li><strong>Police / Gendarmerie</strong> ‚Äî D√©p√¥t de plainte ou main courante</li>
            </ul>
          </div>
        `;
      } else {
        urgentContainer.innerHTML = '';
      }
    }

    // ==================== EXPORT PDF ====================
    
    function generatePDF() {
      const scores = calculateScores();
      const profile = getResultProfile(scores.total);
      const profileAnalysis = analyzeProfile(scores);
      
      const printWindow = window.open('', '', 'width=800,height=600');
      
      printWindow.document.write(`
        <!DOCTYPE html>
        <html lang="fr">
        <head>
          <meta charset="UTF-8">
          <title>R√©sultats Trauma Bonding ‚Äî NO√âSIS</title>
          <style>
            @page { 
              size: A4; 
              margin: 15mm 20mm; 
            }
            
            * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
            }
            
            body {
              font-family: Arial, sans-serif;
              font-size: 11pt;
              line-height: 1.6;
              color: #0A0A0A;
            }
            
            h1 {
              font-size: 18pt;
              margin-bottom: 12pt;
              color: #0A0A0A;
              border-bottom: 3pt solid #C7A86D;
              padding-bottom: 6pt;
            }
            
            h2 {
              font-size: 14pt;
              margin-top: 16pt;
              margin-bottom: 8pt;
              color: #0A0A0A;
            }
            
            h3 {
              font-size: 12pt;
              margin-top: 12pt;
              margin-bottom: 6pt;
              color: #0A0A0A;
            }
            
            p {
              margin-bottom: 8pt;
              text-align: justify;
            }
            
            .header {
              text-align: center;
              margin-bottom: 20pt;
            }
            
            .logo {
              font-size: 22pt;
              font-weight: bold;
              color: #C7A86D;
              margin-bottom: 6pt;
            }
            
            .subtitle {
              font-size: 10pt;
              color: rgba(10,10,10,0.6);
            }
            
            .section {
              margin-bottom: 20pt;
              page-break-inside: avoid;
            }
            
            .score-box {
              background: #F7F5EF;
              padding: 12pt;
              border-radius: 6pt;
              margin: 12pt 0;
              border-left: 4pt solid #C7A86D;
            }
            
            .dimension-item {
              margin-bottom: 8pt;
              padding: 8pt;
              background: #FAFAFA;
              border-left: 3pt solid;
            }
            
            .dimension-item.coercion { border-color: #dc2626; }
            .dimension-item.anxious { border-color: #f59e0b; }
            .dimension-item.health { border-color: #059669; }
            .dimension-item.neuro { border-color: #7c3aed; }
            .dimension-item.resilience { border-color: #0284c7; }
            
            .recommendation-list {
              list-style: none;
              padding-left: 0;
            }
            
            .recommendation-list li {
              margin-bottom: 8pt;
              padding-left: 20pt;
              position: relative;
            }
            
            .recommendation-list li:before {
              content: "‚Üí";
              position: absolute;
              left: 0;
              color: #C7A86D;
              font-weight: bold;
            }
            
            .question-detail {
              font-size: 10pt;
              margin-bottom: 6pt;
              padding: 4pt 0;
              border-bottom: 1px solid #E5E5E5;
            }
            
            .warning-box {
              background: #FFF3CD;
              border: 2pt solid #FFC107;
              padding: 12pt;
              margin: 16pt 0;
              border-radius: 6pt;
            }
            
            .urgent-box {
              background: #FEE;
              border: 2pt solid #DC2626;
              padding: 12pt;
              margin: 16pt 0;
              border-radius: 6pt;
            }
            
            .footer {
              margin-top: 30pt;
              padding-top: 12pt;
              border-top: 2pt solid #E5E5E5;
              text-align: center;
              font-size: 9pt;
              color: rgba(10,10,10,0.5);
            }
        
    /* ========================================
       NAVIGATION NOESIS
       ======================================== */
    nav {
        position: sticky;
        top: 0;
        background: var(--creme-principal);
        backdrop-filter: blur(20px) saturate(180%);
        border-bottom: 1px solid rgba(10, 10, 10, 0.08);
        padding: 20px 0;
        z-index: 2000;
        box-shadow: 0 1px 4px rgba(10, 10, 10, 0.08);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    nav.scrolled {
        padding: 14px 0;
        background: var(--creme-principal);
        border-bottom: 1px solid rgba(10, 10, 10, 0.12);
        box-shadow: 0 2px 12px rgba(10, 10, 10, 0.12);
    }

    nav .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
    }

    .logo {
        font-family: 'Cormorant Garamond', serif;
        font-size: 28px;
        font-weight: 700;
        letter-spacing: 0.25em;
        text-transform: uppercase;
        color: var(--noir-absolu);
        text-decoration: none;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        font-variant: small-caps;
        position: relative;
        display: flex;
        align-items: center;
    }

    nav.scrolled .logo {
        font-size: 24px;
    }

    .logo-text {
        position: relative;
    }

    .logo-text::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 1px;
        bottom: -4px;
        left: 0;
        background: linear-gradient(90deg,
            transparent 0%,
            var(--or-signature) 50%,
            transparent 100%);
        opacity: 0;
        transition: opacity 0.4s ease;
    }

    .logo:hover {
        color: var(--or-riche);
        letter-spacing: 0.28em;
    }

    .logo:hover .logo-text::before {
        opacity: 1;
    }

    nav ul {
        display: flex;
        gap: 2px;
        list-style: none;
        align-items: center;
        background-color: var(--blanc-surface);
        border: 1px solid rgba(10, 10, 10, 0.12);
        border-radius: 50px;
        padding: 6px;
        box-shadow: 0 1px 3px rgba(10, 10, 10, 0.08);
    }

    nav li {
        position: relative;
    }

    nav a:not(.logo) {
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 600;
        color: var(--text-primary);
        text-decoration: none;
        position: relative;
        padding: 10px 18px;
        border-radius: 40px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: inline-block;
        letter-spacing: 0.02em;
        white-space: nowrap;
    }

    nav a:not(.logo)::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 40px;
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
    }

    nav a:not(.logo):hover {
        color: var(--noir-absolu);
        transform: translateY(-1px);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.3),
            0 2px 4px rgba(199, 168, 109, 0.2);
    }

    nav a:not(.logo):hover::before {
        opacity: 1;
    }

    nav a:not(.logo).active {
        color: var(--noir-absolu);
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.35),
            0 2px 4px rgba(199, 168, 109, 0.25);
    }

    /* Boutons sociaux dans nav */
    .nav-social {
        display: flex;
        align-items: center;
        gap: 4px;
        margin-left: 16px;
        padding-left: 16px;
        border-left: 1px solid rgba(10, 10, 10, 0.12);
    }

    .nav-social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: transparent;
        color: var(--text-primary);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
        position: relative;
    }

    .nav-social-link svg {
        width: 20px;
        height: 20px;
        stroke-width: 1.5;
    }

    .nav-social-link::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 50%;
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
    }

    .nav-social-link:hover {
        color: var(--noir-absolu);
        transform: translateY(-1px);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.3),
            0 2px 4px rgba(199, 168, 109, 0.2);
    }

    .nav-social-link:hover::before {
        opacity: 1;
    }

    /* ============================================
       MENU HAMBURGER MOBILE
       ============================================ */
    .menu-toggle {
        display: none;
        flex-direction: column;
        gap: 6px;
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 8px;
        z-index: 2002;
        position: relative;
        transition: all 0.3s ease;
    }

    .menu-toggle span {
        width: 28px;
        height: 2px;
        background: var(--or-signature);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 2px;
    }

    .menu-toggle.active span:nth-child(1) {
        transform: rotate(45deg) translate(8px, 8px);
    }

    .menu-toggle.active span:nth-child(2) {
        opacity: 0;
    }

    .menu-toggle.active span:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -7px);
    }

    /* Responsive Navigation */
    @media (max-width: 1024px) {
        nav .container {
            padding: 0 24px;
            position: relative;
        }

        .menu-toggle {
            display: flex;
            position: relative;
            z-index: 2002;
        }

        nav ul {
            position: fixed;
            top: 0;
            right: -100%;
            height: 100vh;
            width: 320px;
            max-width: 85vw;
            flex-direction: column;
            background: linear-gradient(180deg,
                var(--noir-absolu) 0%,
                var(--noir-surface) 100%);
            padding: 100px 32px 40px;
            gap: 0;
            border-radius: 0;
            border: none;
            border-left: 1px solid rgba(199, 168, 109, 0.2);
            box-shadow:
                -4px 0 24px rgba(0, 0, 0, 0.8),
                -8px 0 48px rgba(0, 0, 0, 0.5);
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
        }

        nav ul.active {
            right: 0;
        }

        nav li {
            width: 100%;
            margin-bottom: 12px;
        }

        nav a:not(.logo) {
            display: block;
            width: 100%;
            padding: 16px 20px;
            font-size: 15px;
            text-align: left;
            touch-action: manipulation;
            border-radius: 8px;
        }

        .nav-social {
            margin-left: 0;
            padding-left: 0;
            padding-top: 24px;
            margin-top: 24px;
            border-left: none;
            border-top: 1px solid rgba(199, 168, 109, 0.2);
            justify-content: flex-start;
            gap: 12px;
        }

        .nav-social-link {
            width: 42px;
            height: 42px;
        }

        .nav-social-link svg {
            width: 20px;
            height: 20px;
        }

        /* Overlay pour fermer le menu */
        .menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(4px);
            z-index: 1999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .menu-overlay.active {
            display: block;
            opacity: 1;
        }
    }

    @media (max-width: 768px) {
        nav {
            padding: 16px 0;
        }

        nav.scrolled {
            padding: 12px 0;
        }

        .logo {
            font-size: 22px;
        }

        nav.scrolled .logo {
            font-size: 20px;
        }

        nav ul {
            width: 280px;
            padding: 80px 24px 32px;
        }
    }
  </style>
        </head>
        <body>
  <div class="header">
            <div class="logo">NO√âSIS</div>
            <div class="subtitle">Intelligence transdisciplinaire au service de la lucidit√©</div>
          </div>
          
          <h1>R√©sultats ‚Äî Autotest Trauma Bonding</h1>
          
          <div class="section">
            <p><strong>Date :</strong> ${new Date().toLocaleDateString('fr-FR')}</p>
            <p><strong>Profil :</strong> ${profile.label}</p>
            
            <div class="score-box">
              <p><strong>Score Total :</strong> ${scores.total} / ${scores.maxTotal} (${Math.round((scores.total/scores.maxTotal)*100)}%)</p>
            </div>
          </div>
          
          <div class="section">
            <h2>Interpr√©tation Globale</h2>
            <p>${profile.summary}</p>
          </div>
          
          <div class="section">
            <h2>Analyse Dimensionnelle</h2>
            ${AXES.map(axis => {
              const data = scores.dimensions[axis.key];
              return `
                <div class="dimension-item ${axis.color}">
                  <strong>${axis.fullLabel}</strong><br>
                  Score : ${data.score}/${data.max} (${data.percentage}%)
                </div>
              `;
            }).join('')}
          </div>
          
          <div class="section">
            <h2>Profil Dominant</h2>
            <h3>${AXES.find(a => a.key === profileAnalysis.dominant).fullLabel}</h3>
            <p>${profileAnalysis.analysis}</p>
          </div>
          
          <div class="section">
            <h2>Recommandations Personnalis√©es</h2>
            <ul class="recommendation-list">
              ${profile.recommendations.map(rec => `<li>${rec}</li>`).join('')}
            </ul>
          </div>
          
          ${profile.urgent ? `
            <div class="urgent-box">
              <h3>‚ö†Ô∏è Ressources d'Urgence</h3>
              <p><strong>3919</strong> ‚Äî Violences conjugales (24/7, gratuit, anonyme)</p>
              <p><strong>116 006</strong> ‚Äî Aide aux victimes</p>
              <p><strong>En Avant Toute(s)</strong> ‚Äî Chat violences conjugales</p>
              <p><strong>CIDFF</strong> ‚Äî Centres d'Information sur les Droits des Femmes</p>
            </div>
          ` : ''}
          
          <div class="section" style="page-break-before: always;">
            <h2>D√©tail des R√©ponses</h2>
            ${AXES.map(axis => {
              const axisQuestions = QUESTIONS.filter(q => q.dim === axis.key);
              return `
                <div style="margin-bottom: 16pt;">
                  <h3>${axis.fullLabel}</h3>
                  ${axisQuestions.map(q => {
                    const answer = SCALE_OPTIONS.find(opt => opt.value === state.answers[q.id]);
                    return `
                      <div class="question-detail">
                        <strong>${q.id}</strong> : ${q.text}<br>
                        <span style="color: #666;">‚Üí ${answer ? answer.label : 'Non r√©pondu'} ${answer ? '(' + answer.sublabel + ')' : ''}</span>
                      </div>
                    `;
                  }).join('')}
                </div>
              `;
            }).join('')}
          </div>
          
          <div class="warning-box">
            <p><strong>‚ö†Ô∏è Avertissement Important</strong></p>
            <p>Ce questionnaire constitue un outil de sensibilisation et ne remplace en aucun cas une consultation avec un professionnel de sant√© qualifi√©. Les r√©sultats refl√®tent votre perception subjective et n√©cessitent interpr√©tation contextuelle.</p>
          </div>
          
          <div class="footer">
            <div class="logo" style="font-size: 14pt;">NO√âSIS</div>
            <p>¬© ${new Date().getFullYear()} NO√âSIS ‚Äî Tous droits r√©serv√©s</p>
            <p>Outil de sensibilisation et pr√©-√©valuation ‚Äî Non valid√© psychom√©triquement<br>
            Ne remplace pas une consultation avec un professionnel qualifi√©<br>
            Confidentialit√© : aucune donn√©e collect√©e sans action explicite</p>
          </div>
        </body>
        </html>
      `);
      
      printWindow.document.close();
      
      setTimeout(() => {
        printWindow.print();
      }, 800);
    }

    // ==================== EXPORT JSON ====================
    
    function downloadJSON() {
      const scores = calculateScores();
      const profile = getResultProfile(scores.total);
      const profileAnalysis = analyzeProfile(scores);
      
      const data = {
        metadata: {
          test: "Trauma Bonding ‚Äî √âvaluation Diff√©rentielle",
          version: "1.0 - NO√âSIS",
          date: new Date().toISOString()
        },
        responses: {
          answers: state.answers,
          completion: `${Object.keys(state.answers).length}/${QUESTIONS.length}`
        },
        scoring: {
          total: scores.total,
          maxTotal: scores.maxTotal,
          percentage: Math.round((scores.total/scores.maxTotal)*100),
          dimensions: scores.dimensions,
          resultProfile: {
            level: profile.level,
            label: profile.label,
            interpretation: profile.summary
          }
        },
        profileAnalysis: {
          dominantDimension: profileAnalysis.dominant,
          analysis: profileAnalysis.analysis
        },
        detailedResponses: QUESTIONS.map(q => ({
          id: q.id,
          dimension: q.dim,
          text: q.text,
          response: {
            value: state.answers[q.id],
            label: SCALE_OPTIONS.find(opt => opt.value === state.answers[q.id])?.label,
            sublabel: SCALE_OPTIONS.find(opt => opt.value === state.answers[q.id])?.sublabel
          }
        }))
      };
      
      const blob = new Blob([JSON.stringify(data, null, 2)], { 
        type: 'application/json;charset=utf-8' 
      });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `noesis-trauma-bonding-${Date.now()}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    // ==================== ENVOI EMAIL ====================
    
    function sendResultsByEmail() {
      const scores = calculateScores();
      const profile = getResultProfile(scores.total);
      
      const emailBody = `
Rapport NO√âSIS ‚Äî Trauma Bonding
G√©n√©r√© le ${new Date().toLocaleDateString('fr-FR')}

SCORE TOTAL : ${scores.total}/${scores.maxTotal} (${Math.round((scores.total/scores.maxTotal)*100)}%)
PROFIL : ${profile.label}

ANALYSE DIMENSIONNELLE :
${Object.entries(scores.dimensions).map(([key, data]) => {
  const axis = AXES.find(a => a.key === key);
  return `‚Ä¢ ${axis.fullLabel} : ${data.percentage}%`;
}).join('\n')}

Pour consulter le rapport complet avec analyses approfondies et recommandations personnalis√©es, 
veuillez t√©l√©charger la version PDF depuis l'interface NO√âSIS.

---
NO√âSIS ‚Äî Intelligence transdisciplinaire
¬© ${new Date().getFullYear()} ‚Äî Tous droits r√©serv√©s
      `.trim();
      
      const subject = `Rapport Trauma Bonding ‚Äî NO√âSIS`;
      const mailtoLink = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
      
      window.location.href = mailtoLink;
    }

    // ==================== RESET ====================
    
    function resetTest() {
      state = {
        currentQuestionIndex: 0,
        answers: {}
      };
      showScreen('screen-intro');
      document.getElementById('consent-check').checked = false;
      document.getElementById('start-btn').disabled = true;
    }

    // ==================== INITIALISATION ====================
    
    document.addEventListener('DOMContentLoaded', function() {
      const consentCheck = document.getElementById('consent-check');
      const startBtn = document.getElementById('start-btn');
      
      consentCheck.addEventListener('change', function() {
        startBtn.disabled = !this.checked;
      });
    });

    /* ========================================
       MENU HAMBURGER MOBILE - NAVIGATION
       ======================================== */
    // Navbar scroll effect
    window.addEventListener('scroll', () => {
      const navbar = document.getElementById('navbar');
      if (navbar && window.scrollY > 100) {
        navbar.classList.add('scrolled');
      } else if (navbar) {
        navbar.classList.remove('scrolled');
      }
    });

    // Menu hamburger mobile
    const menuToggle = document.getElementById('menuToggle');
    const navMenu = document.getElementById('navMenu');
    const menuOverlay = document.getElementById('menuOverlay');
    const body = document.body;

    function toggleMenu() {
      if (menuToggle && navMenu) {
        menuToggle.classList.toggle('active');
        navMenu.classList.toggle('active');
        if (menuOverlay) {
          menuOverlay.classList.toggle('active');
        }
        body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
      }
    }

    if (menuToggle) {
      menuToggle.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        toggleMenu();
      });
    }

    if (menuOverlay) {
      menuOverlay.addEventListener('click', toggleMenu);
    }

    // Fermer le menu quand on clique sur un lien
    if (navMenu) {
      const navLinks = navMenu.querySelectorAll('a');
      navLinks.forEach(link => {
        link.addEventListener('click', () => {
          if (window.innerWidth <= 1024) {
            setTimeout(toggleMenu, 100);
          }
        });
      });
    }

  </script>

</body>
</html>