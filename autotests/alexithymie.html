<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Étape Zéro,Alexithymie | Auto-Test NOÉSIS</title>
  <meta name="description" content="Évaluation informative des difficultés à identifier et verbaliser les émotions. Outil non diagnostique orienté vers l'exploration personnelle.">
  <meta name="test-version" content="1.0.0">
  <meta name="test-last-updated" content="2025-11-06">
  
  <!-- Polices Google -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@300;400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* ========================================
       VARIABLES CSS NOÉSIS
       ======================================== */
    :root {
      /* Fondations Neutres */
      --noir-absolu: #0A0A0A;
      --noir-doux: #111111;
      --noir-surface: #1A1A1A;
      --creme-principal: #F7F5EF;
      --creme-chaud: #F9F7F1;
      --blanc-surface: #FFFFFF;
      
      /* Signature Or NOÉSIS */
      --or-signature: #C7A86D;
      --or-riche: #D4B980;
      --or-sombre: #A89158;
      --or-subtil: rgba(199,168,109,0.08);
      --or-leger: rgba(199,168,109,0.15);
      --or-moyen: rgba(199,168,109,0.25);
      
      /* Bordures & Séparateurs */
      --border-subtil: rgba(10,10,10,0.08);
      --border-leger: rgba(10,10,10,0.12);
      --border-visible: rgba(10,10,10,0.18);
      
      /* Couleurs Dimensionnelles (Alexithymie) */
      --identifier-color: #2563eb;
      --identifier-bg: rgba(37,99,235,0.08);
      --verbaliser-color: #7c3aed;
      --verbaliser-bg: rgba(124,58,237,0.08);
      --pensee-ext-color: #ea580c;
      --pensee-ext-bg: rgba(234,88,12,0.08);
      --conscience-aff-color: #059669;
      --conscience-aff-bg: rgba(5,150,105,0.08);
      
      /* Typographie */
      --fs-xs: 12px;   --fs-sm: 14px;   --fs-md: 18px;
      --fs-lg: 21px;   --fs-xl: 24px;   --fs-2xl: 32px;
      --fs-3xl: 42px;  --fs-4xl: 56px;
      --lh-tight: 1.2; --lh-normal: 1.5; --lh-relaxed: 1.7;
      
      /* Spacing (Échelle 8px) */
      --s-2: 8px;    --s-3: 12px;   --s-4: 16px;
      --s-6: 24px;   --s-8: 32px;   --s-12: 48px;
      --s-16: 64px;  --s-20: 80px;
      
      /* Ombres & Élévations */
      --shadow-soft: 0 2px 8px rgba(10,10,10,0.08), 0 1px 2px rgba(10,10,10,0.12);
      --shadow-medium: 0 4px 16px rgba(10,10,10,0.1), 0 2px 4px rgba(10,10,10,0.15);
      --shadow-large: 0 8px 32px rgba(10,10,10,0.12), 0 2px 8px rgba(10,10,10,0.18);
      
      /* Border Radius */
      --radius-sm: 4px;   --radius-md: 8px;   --radius-lg: 12px;
      --radius-xl: 16px;  --radius-2xl: 24px; --radius-pill: 9999px;
      
      /* Animations */
      --duration-fast: 150ms;
      --duration-normal: 250ms;
      --duration-slow: 350ms;
      --ease-standard: cubic-bezier(0.4, 0.0, 0.2, 1);
      --ease-spring: cubic-bezier(0.16, 1, 0.3, 1);
    }
    
    /* ========================================
       RESET & BASE
       ======================================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      font-size: var(--fs-md);
      line-height: var(--lh-relaxed);
      color: var(--noir-absolu);
      background: var(--creme-principal);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    h1, h2, h3 {
      font-family: 'Fraunces', Georgia, serif;
      font-weight: 600;
      line-height: var(--lh-tight);
      color: var(--noir-absolu);
    }
    
    h1 { font-size: var(--fs-3xl); }
    h2 { font-size: var(--fs-2xl); }
    h3 { font-size: var(--fs-xl); }
    
    p {
      margin-bottom: var(--s-4);
    }
    
    strong {
      font-weight: 600;
      color: var(--noir-absolu);
    }
    
    /* ========================================
       LAYOUT
       ======================================== */
    .app-container {
      max-width: 900px;
      margin: 0 auto;
      padding: var(--s-12) var(--s-6);
    }
    
    .screen {
      display: none;
      opacity: 0;
    }
    
    .screen.active {
      display: block;
      animation: fadeIn var(--duration-normal) var(--ease-standard) forwards;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* ========================================
       COMPOSANTS,CARTES
       ======================================== */
    .card {
      background: var(--blanc-surface);
      border-radius: var(--radius-2xl);
      padding: var(--s-12);
      margin-bottom: var(--s-8);
      box-shadow: var(--shadow-large);
    }
    
    .card h2, .card h3 {
      margin-bottom: var(--s-6);
      display: flex;
      align-items: center;
      gap: var(--s-3);
    }
    
    .card-icon {
      width: 24px;
      height: 24px;
      stroke: var(--or-signature);
      fill: none;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    
    /* ========================================
       COMPOSANTS,WARNING BOX
       ======================================== */
    .warning-box {
      background: #fffbeb;
      border-left: 4px solid var(--or-signature);
      border-radius: var(--radius-md);
      padding: var(--s-6);
      margin-bottom: var(--s-8);
    }
    
    .warning-box h3 {
      font-size: var(--fs-lg);
      margin-bottom: var(--s-3);
      display: flex;
      align-items: center;
      gap: var(--s-2);
      color: var(--noir-absolu);
    }
    
    .warning-box p {
      font-size: var(--fs-sm);
      line-height: var(--lh-relaxed);
      color: rgba(10,10,10,0.75);
      margin-bottom: var(--s-3);
    }
    
    .warning-box p:last-child {
      margin-bottom: 0;
    }
    
    .warning-icon {
      width: 20px;
      height: 20px;
      stroke: var(--or-signature);
      fill: none;
      stroke-width: 2;
    }
    
    /* ========================================
       COMPOSANTS,HEADER
       ======================================== */
    .header {
      text-align: center;
      margin-bottom: var(--s-12);
    }
    
    .header-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto var(--s-4);
      border-radius: var(--radius-xl);
      border: 3px solid var(--or-signature);
      background: linear-gradient(135deg, var(--or-subtil), var(--or-leger));
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .header-icon svg {
      width: 48px;
      height: 48px;
      stroke: var(--or-signature);
      fill: none;
      stroke-width: 2;
    }
    
    .header h1 {
      margin-bottom: var(--s-3);
    }
    
    .header .subtitle {
      font-size: var(--fs-md);
      color: rgba(10,10,10,0.6);
      font-weight: 400;
    }
    
    /* ========================================
       COMPOSANTS,BOUTONS
       ======================================== */
    .btn-primary, .btn-secondary, .btn-danger {
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      font-size: var(--fs-md);
      padding: var(--s-4) var(--s-8);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--duration-normal) var(--ease-standard);
      border: none;
      display: inline-flex;
      align-items: center;
      gap: var(--s-2);
    }
    
    .btn-primary {
      background: var(--or-signature);
      color: var(--blanc-surface);
      box-shadow: var(--shadow-soft);
    }
    
    .btn-primary:hover:not(:disabled) {
      background: var(--or-riche);
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
    }
    
    .btn-primary:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn-secondary {
      background: transparent;
      color: var(--or-signature);
      border: 2px solid var(--or-signature);
    }
    
    .btn-secondary:hover {
      background: var(--or-subtil);
    }
    
    .btn-danger {
      background: transparent;
      color: #dc2626;
      border: 2px solid #dc2626;
    }
    
    .btn-danger:hover {
      background: rgba(220,38,38,0.08);
    }
    
    .button-group {
      display: flex;
      gap: var(--s-4);
      margin-top: var(--s-8);
      flex-wrap: wrap;
    }
    
    /* ========================================
       COMPOSANTS,INPUTS
       ======================================== */
    .input-group {
      margin-bottom: var(--s-6);
    }
    
    .input-label {
      display: block;
      font-size: var(--fs-sm);
      font-weight: 600;
      color: var(--noir-absolu);
      margin-bottom: var(--s-2);
    }
    
    .input-help {
      display: block;
      font-size: var(--fs-xs);
      color: rgba(10,10,10,0.6);
      margin-top: var(--s-2);
    }
    
    input[type="number"],
    input[type="text"],
    select {
      width: 100%;
      font-family: 'Inter', sans-serif;
      font-size: var(--fs-md);
      padding: var(--s-3) var(--s-4);
      border: 2px solid var(--border-leger);
      border-radius: var(--radius-md);
      background: var(--blanc-surface);
      transition: all var(--duration-normal) var(--ease-standard);
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: var(--or-signature);
      box-shadow: var(--shadow-medium);
    }
    
    /* ========================================
       COMPOSANTS,CHECKBOX CONSENTEMENT
       ======================================== */
    .consent-checkbox {
      display: flex;
      align-items: flex-start;
      gap: var(--s-3);
      margin: var(--s-8) 0;
      cursor: pointer;
    }
    
    .consent-checkbox input[type="checkbox"] {
      width: 24px;
      height: 24px;
      min-width: 24px;
      cursor: pointer;
      accent-color: var(--or-signature);
    }
    
    .consent-checkbox label {
      font-size: var(--fs-sm);
      line-height: var(--lh-relaxed);
      color: rgba(10,10,10,0.8);
      cursor: pointer;
    }
    
    /* ========================================
       COMPOSANTS,COLLAPSIBLE
       ======================================== */
    .collapsible {
      margin-bottom: var(--s-8);
    }
    
    .collapsible-header {
      background: var(--blanc-surface);
      border-radius: var(--radius-md);
      padding: var(--s-4);
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all var(--duration-normal) var(--ease-standard);
      border: 2px solid var(--border-leger);
    }
    
    .collapsible-header:hover {
      border-color: var(--or-signature);
    }
    
    .collapsible-header h3 {
      font-size: var(--fs-lg);
      margin: 0;
    }
    
    .collapsible-icon {
      width: 20px;
      height: 20px;
      stroke: var(--or-signature);
      transition: transform var(--duration-normal) var(--ease-standard);
    }
    
    .collapsible.open .collapsible-icon {
      transform: rotate(180deg);
    }
    
    .collapsible-content {
      display: none;
      background: var(--blanc-surface);
      border-radius: var(--radius-md);
      padding: var(--s-6);
      margin-top: var(--s-3);
      box-shadow: var(--shadow-soft);
    }
    
    .collapsible.open .collapsible-content {
      display: block;
      animation: fadeIn var(--duration-normal) var(--ease-standard);
    }
    
    /* ========================================
       DIMENSIONS PREVIEW (Écran Intro)
       ======================================== */
    .dimension-preview {
      margin-bottom: var(--s-6);
      padding: var(--s-6);
      background: var(--blanc-surface);
      border-radius: var(--radius-xl);
      border: 2px solid var(--border-subtil);
      transition: all var(--duration-normal) var(--ease-standard);
    }
    
    .dimension-preview:hover {
      border-color: var(--border-visible);
      transform: translateX(4px);
      box-shadow: var(--shadow-soft);
    }
    
    .dimension-header {
      display: flex;
      align-items: center;
      gap: var(--s-3);
      margin-bottom: var(--s-4);
      padding-bottom: var(--s-3);
      border-bottom: 2px solid;
    }
    
    .dimension-header.identifier {
      border-color: var(--identifier-color);
    }
    
    .dimension-header.verbaliser {
      border-color: var(--verbaliser-color);
    }
    
    .dimension-header.pensee-ext {
      border-color: var(--pensee-ext-color);
    }
    
    .dimension-header.conscience-aff {
      border-color: var(--conscience-aff-color);
    }
    
    .dimension-icon {
      width: 32px;
      height: 32px;
      min-width: 32px;
      stroke-width: 2.5;
      stroke-linecap: round;
      stroke-linejoin: round;
      fill: none;
    }
    
    .dimension-header.identifier .dimension-icon {
      stroke: var(--identifier-color);
    }
    
    .dimension-header.verbaliser .dimension-icon {
      stroke: var(--verbaliser-color);
    }
    
    .dimension-header.pensee-ext .dimension-icon {
      stroke: var(--pensee-ext-color);
    }
    
    .dimension-header.conscience-aff .dimension-icon {
      stroke: var(--conscience-aff-color);
    }
    
    .dimension-header h3 {
      font-size: var(--fs-xl);
      margin: 0;
      color: var(--noir-absolu);
    }
    
    .dimension-description {
      font-size: var(--fs-md);
      line-height: var(--lh-relaxed);
      color: rgba(10,10,10,0.75);
      margin: 0;
    }
    
    /* ========================================
       METHODOLOGY GRID (Écran Intro)
       ======================================== */
    .methodology-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--s-6);
      margin-bottom: var(--s-6);
    }
    
    .methodology-item {
      display: flex;
      align-items: center;
      gap: var(--s-4);
      padding: var(--s-4);
      background: var(--creme-chaud);
      border-radius: var(--radius-lg);
      transition: all var(--duration-normal) var(--ease-standard);
    }
    
    .methodology-item:hover {
      background: var(--or-subtil);
      transform: translateY(-2px);
      box-shadow: var(--shadow-soft);
    }
    
    .methodology-icon-wrapper {
      width: 48px;
      height: 48px;
      min-width: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--blanc-surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
    }
    
    .methodology-icon {
      width: 28px;
      height: 28px;
      stroke: var(--or-signature);
      fill: none;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    
    .methodology-content {
      flex: 1;
    }
    
    .methodology-label {
      font-size: var(--fs-md);
      font-weight: 700;
      color: var(--noir-absolu);
      margin-bottom: var(--s-2);
    }
    
    .methodology-sublabel {
      font-size: var(--fs-sm);
      color: rgba(10,10,10,0.65);
    }
    
    /* ========================================
       ÉCRAN TEST,BARRE PROGRESSION
       ======================================== */
    .progress-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--blanc-surface);
      padding: var(--s-4) var(--s-6);
      box-shadow: var(--shadow-soft);
      z-index: 1000;
    }
    
    .progress-text {
      font-size: var(--fs-sm);
      font-weight: 500;
      color: var(--noir-doux);
      text-align: center;
      margin-bottom: var(--s-2);
    }
    
    .progress-bar {
      height: 4px;
      background: var(--creme-principal);
      border-radius: var(--radius-pill);
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: var(--or-signature);
      transition: width var(--duration-slow) var(--ease-spring);
    }
    
    /* ========================================
       ÉCRAN TEST,CONTAINER QUESTION
       ======================================== */
    #test-screen .app-container {
      padding-top: calc(var(--s-20) + var(--s-12));
    }
    
    .question-card {
      background: var(--blanc-surface);
      border-radius: var(--radius-2xl);
      padding: var(--s-12);
      box-shadow: var(--shadow-large);
      margin-bottom: var(--s-8);
    }
    
    .dimension-badge {
      display: inline-flex;
      align-items: center;
      gap: var(--s-2);
      padding: var(--s-2) var(--s-4);
      border-radius: var(--radius-pill);
      font-size: var(--fs-xs);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: var(--s-6);
    }
    
    .dimension-badge.identifier {
      background: var(--identifier-bg);
      color: var(--identifier-color);
    }
    
    .dimension-badge.verbaliser {
      background: var(--verbaliser-bg);
      color: var(--verbaliser-color);
    }
    
    .dimension-badge.pensee-ext {
      background: var(--pensee-ext-bg);
      color: var(--pensee-ext-color);
    }
    
    .dimension-badge.conscience-aff {
      background: var(--conscience-aff-bg);
      color: var(--conscience-aff-color);
    }
    
    .question-number {
      font-size: var(--fs-sm);
      font-weight: 600;
      color: rgba(10,10,10,0.5);
      margin-bottom: var(--s-2);
    }
    
    .question-text {
      font-size: var(--fs-lg);
      font-weight: 400;
      line-height: var(--lh-relaxed);
      color: var(--noir-absolu);
      margin-bottom: var(--s-8);
    }
    
    /* ========================================
       ÉCRAN TEST,OPTIONS RÉPONSE
       ======================================== */
    .answer-options {
      display: flex;
      flex-direction: column;
      gap: var(--s-3);
    }
    
    .answer-option {
      background: var(--blanc-surface);
      border: 2px solid var(--border-leger);
      border-radius: var(--radius-md);
      padding: var(--s-4);
      cursor: pointer;
      transition: all var(--duration-normal) var(--ease-standard);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .answer-option:hover {
      border-color: var(--border-visible);
      transform: translateX(4px);
      box-shadow: var(--shadow-soft);
    }
    
    .answer-option.selected {
      background: var(--or-subtil);
      border: 2px solid var(--or-signature);
      transform: scale(1.02);
    }
    
    .option-content {
      flex: 1;
    }
    
    .option-label {
      font-size: var(--fs-md);
      font-weight: 600;
      color: var(--noir-absolu);
      margin-bottom: var(--s-2);
    }
    
    .option-sublabel {
      font-size: var(--fs-sm);
      color: rgba(10,10,10,0.7);
    }
    
    .option-check {
      width: 24px;
      height: 24px;
      border-radius: var(--radius-pill);
      border: 2px solid var(--border-visible);
      transition: all var(--duration-fast) var(--ease-standard);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .answer-option.selected .option-check {
      background: var(--or-signature);
      border-color: var(--or-signature);
    }
    
    .option-check svg {
      width: 16px;
      height: 16px;
      stroke: var(--blanc-surface);
      fill: none;
      stroke-width: 3;
      opacity: 0;
      transition: opacity var(--duration-fast) var(--ease-standard);
    }
    
    .answer-option.selected .option-check svg {
      opacity: 1;
    }
    
    /* ========================================
       ÉCRAN TEST,NAVIGATION
       ======================================== */
    .navigation-buttons {
      display: flex;
      justify-content: space-between;
      gap: var(--s-4);
      margin-top: var(--s-8);
    }
    
    /* ========================================
       ÉCRAN RÉSULTATS,SCORE GLOBAL
       ======================================== */
    .score-card {
      text-align: center;
      padding: var(--s-16) var(--s-12);
    }
    
    .score-circle-container {
      margin: var(--s-8) auto;
      display: flex;
      justify-content: center;
    }
    
    /* ========================================
       ÉCRAN RÉSULTATS,ANALYSES DIMENSIONNELLES
       ======================================== */
    .dimension-analysis {
      margin-bottom: var(--s-8);
    }
    
    .dimension-bar-container {
      margin-bottom: var(--s-8);
    }
    
    .dimension-bar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--s-3);
    }
    
    .dimension-name {
      font-size: var(--fs-md);
      font-weight: 600;
      color: var(--noir-absolu);
    }
    
    .dimension-percentage {
      font-size: var(--fs-md);
      font-weight: 700;
      color: var(--or-signature);
    }
    
    .dimension-bar-bg {
      height: 12px;
      background: var(--creme-principal);
      border-radius: var(--radius-pill);
      overflow: hidden;
      position: relative;
    }
    
    .dimension-bar-fill {
      height: 100%;
      border-radius: var(--radius-pill);
      transition: width 1s var(--ease-spring);
    }
    
    .dimension-bar-fill.identifier {
      background: var(--identifier-color);
    }
    
    .dimension-bar-fill.verbaliser {
      background: var(--verbaliser-color);
    }
    
    .dimension-bar-fill.pensee-ext {
      background: var(--pensee-ext-color);
    }
    
    .dimension-bar-fill.conscience-aff {
      background: var(--conscience-aff-color);
    }
    
    .dimension-interpretation {
      margin-top: var(--s-4);
      padding: var(--s-4);
      border-left: 3px solid;
      border-radius: var(--radius-md);
      font-size: var(--fs-sm);
      line-height: var(--lh-relaxed);
    }
    
    .dimension-interpretation.preservee {
      background: rgba(5,150,105,0.05);
      border-color: #059669;
      color: rgba(10,10,10,0.8);
    }
    
    .dimension-interpretation.explorer {
      background: rgba(234,88,12,0.05);
      border-color: #ea580c;
      color: rgba(10,10,10,0.8);
    }
    
    .dimension-interpretation.accompagner {
      background: rgba(220,38,38,0.05);
      border-color: #dc2626;
      color: rgba(10,10,10,0.8);
    }
    
    /* ========================================
       ÉCRAN RÉSULTATS,RECOMMANDATIONS
       ======================================== */
    .recommendations-list {
      list-style: none;
      counter-reset: recommendation;
    }
    
    .recommendations-list li {
      counter-increment: recommendation;
      margin-bottom: var(--s-6);
      padding-left: var(--s-8);
      position: relative;
    }
    
    .recommendations-list li::before {
      content: counter(recommendation);
      position: absolute;
      left: 0;
      top: 0;
      width: 28px;
      height: 28px;
      background: var(--or-signature);
      color: var(--blanc-surface);
      border-radius: var(--radius-pill);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: var(--fs-sm);
    }
    
    .recommendations-list strong {
      display: block;
      margin-bottom: var(--s-2);
    }
    
    /* ========================================
       ÉCRAN RÉSULTATS,RESSOURCES
       ======================================== */
    .resources-list {
      list-style: none;
    }
    
    .resources-list li {
      margin-bottom: var(--s-4);
      padding-left: var(--s-6);
      position: relative;
    }
    
    .resources-list li::before {
      content: "•";
      position: absolute;
      left: 0;
      color: var(--or-signature);
      font-size: var(--fs-xl);
      line-height: 1;
    }
    
    .resources-list a {
      color: var(--or-signature);
      text-decoration: underline;
      font-weight: 500;
      transition: color var(--duration-normal) var(--ease-standard);
    }
    
    .resources-list a:hover {
      color: var(--or-riche);
    }
    
    /* ========================================
       RESPONSIVE
       ======================================== */
    @media (max-width: 768px) {
      :root {
        --fs-3xl: 32px;
        --fs-2xl: 24px;
        --s-12: 32px;
      }
      
      .card {
        padding: var(--s-8);
      }
      
      .app-container {
        padding: var(--s-8) var(--s-4);
      }
      
      .button-group {
        flex-direction: column;
      }
      
      .btn-primary, .btn-secondary, .btn-danger {
        width: 100%;
        justify-content: center;
      }
      
      .navigation-buttons {
        flex-direction: column-reverse;
      }
      
      .methodology-grid {
        grid-template-columns: 1fr;
      }
      
      .dimension-preview {
        padding: var(--s-4);
      }
      
      .dimension-header h3 {
        font-size: var(--fs-lg);
      }
      
      .dimension-icon {
        width: 28px;
        height: 28px;
        min-width: 28px;
      }
    }
    
    @media (max-width: 480px) {
      :root {
        --fs-3xl: 28px;
        --fs-md: 16px;
      }
      
      .header-icon {
        width: 64px;
        height: 64px;
      }
      
      .header-icon svg {
        width: 36px;
        height: 36px;
      }
      
      .methodology-item {
        flex-direction: column;
        text-align: center;
      }
      
      .methodology-icon-wrapper {
        margin: 0 auto;
      }
      
      .dimension-header {
        flex-direction: column;
        text-align: center;
      }
    }
    
    /* ========================================
       PRINT STYLES (PDF)
       ======================================== */
    @media print {
      body {
        background: white;
      }
      
      .progress-container,
      .navigation-buttons,
      .button-group {
        display: none !important;
      }
      
      .card {
        box-shadow: none;
        border: 1px solid var(--border-leger);
        page-break-inside: avoid;
      }
    }
  </style>
</head>

<body>
  <div class="app-container">
    
    <!-- ========================================
         ÉCRAN 1 : INTRODUCTION
         ======================================== -->
    <div id="intro-screen" class="screen active">
      
      <!-- En-tête -->
      <div class="header">
        <div class="header-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            <path d="M9 10h.01"></path>
            <path d="M15 10h.01"></path>
          </svg>
        </div>
        <h1>Étape Zéro,Alexithymie</h1>
        <p class="subtitle">Exploration des difficultés à identifier et verbaliser les émotions</p>
      </div>
      
      <!-- Avertissement -->
      <div class="warning-box">
        <h3>
          <svg class="warning-icon" viewBox="0 0 24 24">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          Avertissement Important
        </h3>
        <p><strong>Cet outil constitue une évaluation informative</strong> et ne remplace en aucun cas une consultation avec un professionnel de santé qualifié (psychiatre, psychologue, neuropsychologue).</p>
        <p>Les résultats reflètent votre perception subjective à un instant donné et nécessitent une interprétation contextuelle par un clinicien.</p>
        <p><strong>Aucune donnée n'est collectée, stockée ou transmise.</strong> Toutes les informations restent locales dans votre navigateur et sont supprimées à la fermeture.</p>
        <p>En cas de détresse psychologique, contactez le <strong>3114</strong> (numéro national de prévention du suicide, gratuit 24/7) ou le <strong>Fil Santé Jeunes : 0800 235 236</strong> (gratuit, anonyme).</p>
      </div>
      
      <!-- Dimensions Évaluées -->
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24">
            <path d="M3 3v18h18"/>
            <path d="m19 9-5 5-4-4-5 5"/>
          </svg>
          Dimensions Évaluées
        </h2>
        
        <p style="margin-bottom: var(--s-8); color: rgba(10,10,10,0.7);">
          Ce questionnaire explore <strong>quatre dimensions fondamentales</strong> de la conscience émotionnelle, 
          inspirées des modèles TAS-20 et BVAQ.
        </p>
        
        <!-- Dimension 1 -->
        <div class="dimension-preview">
          <div class="dimension-header identifier">
            <svg class="dimension-icon" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 16v-4"/>
              <path d="M12 8h.01"/>
            </svg>
            <h3>Identifier ses Émotions</h3>
          </div>
          <p class="dimension-description">
            Capacité à reconnaître et distinguer précisément ses états émotionnels. 
            Distinguer colère, tristesse, peur et joie avec clarté.
          </p>
        </div>
        
        <!-- Dimension 2 -->
        <div class="dimension-preview">
          <div class="dimension-header verbaliser">
            <svg class="dimension-icon" viewBox="0 0 24 24">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
            <h3>Verbaliser ses Émotions</h3>
          </div>
          <p class="dimension-description">
            Capacité à mettre des mots riches et nuancés sur ses ressentis internes. 
            Exprimer finement ce qui se passe à l'intérieur.
          </p>
        </div>
        
        <!-- Dimension 3 -->
        <div class="dimension-preview">
          <div class="dimension-header pensee-ext">
            <svg class="dimension-icon" viewBox="0 0 24 24">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <line x1="9" y1="9" x2="15" y2="9"/>
              <line x1="9" y1="15" x2="15" y2="15"/>
            </svg>
            <h3>Pensée Orientée Extérieur</h3>
          </div>
          <p class="dimension-description">
            Préférence pour les faits concrets et les explications techniques plutôt que 
            l'exploration des états émotionnels internes.
          </p>
        </div>
        
        <!-- Dimension 4 -->
        <div class="dimension-preview">
          <div class="dimension-header conscience-aff">
            <svg class="dimension-icon" viewBox="0 0 24 24">
              <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
            </svg>
            <h3>Conscience Affective</h3>
          </div>
          <p class="dimension-description">
            Imaginaire émotionnel riche et résonance corporelle face aux situations chargées. 
            Sentir physiquement les vagues émotionnelles.
          </p>
        </div>
        
      </div>
      
      <!-- Méthodologie -->
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"/>
            <path d="m16 12-4-4-4 4"/>
            <path d="M12 16V8"/>
          </svg>
          Méthodologie
        </h2>
        
        <div class="methodology-grid">
          
          <div class="methodology-item">
            <div class="methodology-icon-wrapper">
              <svg class="methodology-icon" viewBox="0 0 24 24">
                <path d="M9 11H3v2h6m-6 4h6v2H3m10-6h8v2h-8m8-4h-8v2h8M3 7h18v2H3"/>
              </svg>
            </div>
            <div class="methodology-content">
              <div class="methodology-label">24 Questions</div>
              <div class="methodology-sublabel">6 items par dimension</div>
            </div>
          </div>
          
          <div class="methodology-item">
            <div class="methodology-icon-wrapper">
              <svg class="methodology-icon" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
              </svg>
            </div>
            <div class="methodology-content">
              <div class="methodology-label">8-10 Minutes</div>
              <div class="methodology-sublabel">Durée estimée</div>
            </div>
          </div>
          
          <div class="methodology-item">
            <div class="methodology-icon-wrapper">
              <svg class="methodology-icon" viewBox="0 0 24 24">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
            </div>
            <div class="methodology-content">
              <div class="methodology-label">16 ans et +</div>
              <div class="methodology-sublabel">Public cible</div>
            </div>
          </div>
          
          <div class="methodology-item">
            <div class="methodology-icon-wrapper">
              <svg class="methodology-icon" viewBox="0 0 24 24">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
              </svg>
            </div>
            <div class="methodology-content">
              <div class="methodology-label">100% Anonyme</div>
              <div class="methodology-sublabel">Données locales</div>
            </div>
          </div>
          
        </div>
        
        <div style="margin-top: var(--s-8); padding: var(--s-4); background: var(--creme-chaud); border-radius: var(--radius-md); border-left: 3px solid var(--or-signature);">
          <p style="font-size: var(--fs-sm); line-height: var(--lh-relaxed); margin: 0; color: rgba(10,10,10,0.8);">
            <strong>Cadre scientifique :</strong> Inspiré de la TAS-20 (Toronto Alexithymia Scale) et du BVAQ 
            (Bermond-Vorst Alexithymia Questionnaire). <strong>Outil de sensibilisation</strong> non validé 
            psychométriquement,ne constitue pas un instrument diagnostique.
          </p>
        </div>
        
      </div>
      
      <!-- Fonctionnement -->
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v6m0 6v6"/>
            <path d="m4.93 4.93 4.24 4.24m5.66 5.66 4.24 4.24"/>
            <path d="M1 12h6m6 0h6"/>
            <path d="m4.93 19.07 4.24-4.24m5.66-5.66 4.24-4.24"/>
          </svg>
          Comment ça marche
        </h2>
        <p>Pour chaque affirmation, vous indiquerez à quelle fréquence elle vous correspond <strong>ces deux dernières semaines</strong>, selon une échelle de 0 à 4 :</p>
        <ul style="padding-left: var(--s-6); margin-bottom: var(--s-4);">
          <li style="margin-bottom: var(--s-2);">0 = <strong>Jamais</strong> ou presque jamais</li>
          <li style="margin-bottom: var(--s-2);">1 = <strong>Rarement</strong></li>
          <li style="margin-bottom: var(--s-2);">2 = <strong>Parfois</strong></li>
          <li style="margin-bottom: var(--s-2);">3 = <strong>Souvent</strong></li>
          <li style="margin-bottom: var(--s-2);">4 = <strong>Toujours</strong> ou presque toujours</li>
        </ul>
        <p><strong>Calcul des scores :</strong> Un score est calculé pour chaque dimension (0-100%). Plus le pourcentage est élevé, plus la difficulté dans cette dimension est marquée. Le score total oriente vers un profil global.</p>
        <p><strong>Résultats :</strong> Analyse dimensionnelle détaillée + recommandations personnalisées + possibilité d'export PDF complet.</p>
      </div>
      
      <!-- Informations Préliminaires (Collapsible) -->
      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible()">
          <h3>Informations Préliminaires (Optionnel)</h3>
          <svg class="collapsible-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </div>
        <div class="collapsible-content">
          <p style="margin-bottom: var(--s-6); font-size: var(--fs-sm); color: rgba(10,10,10,0.7);">Ces informations permettent de contextualiser votre profil. Elles sont entièrement optionnelles et restent locales (aucune transmission).</p>
          
          <div class="input-group">
            <label for="age-input" class="input-label">Votre âge (optionnel)</label>
            <input type="number" id="age-input" min="16" max="120" placeholder="Ex : 28">
            <span class="input-help">Les difficultés émotionnelles évoluent avec l'âge</span>
          </div>
          
          <div class="input-group">
            <label for="genre-input" class="input-label">Genre (optionnel)</label>
            <select id="genre-input">
              <option value="">-- Non renseigné --</option>
              <option value="homme">Homme</option>
              <option value="femme">Femme</option>
              <option value="non-binaire">Non-binaire</option>
              <option value="autre">Autre</option>
            </select>
            <span class="input-help">Les normes de genre influencent l'expression émotionnelle</span>
          </div>
          
          <div class="input-group">
            <label for="contexte-input" class="input-label">Contexte actuel (optionnel)</label>
            <select id="contexte-input">
              <option value="">-- Non renseigné --</option>
              <option value="etudiant">Étudiant·e</option>
              <option value="salarie">Salarié·e</option>
              <option value="independant">Indépendant·e</option>
              <option value="recherche">En recherche d'emploi</option>
              <option value="retraite">Retraité·e</option>
              <option value="autre">Autre</option>
            </select>
            <span class="input-help">Le contexte de vie peut moduler l'expression émotionnelle</span>
          </div>
        </div>
      </div>
      
      <!-- Consentement -->
      <div class="consent-checkbox">
        <input type="checkbox" id="consent-checkbox">
        <label for="consent-checkbox">
          J'ai lu et compris les avertissements. Je confirme que cet outil est utilisé à des fins informatives uniquement et qu'il ne remplace pas une consultation avec un professionnel de santé qualifié. Je comprends que toutes mes données restent locales et ne sont transmises à aucun serveur.
        </label>
      </div>
      
      <button class="btn-primary" id="start-btn" disabled onclick="startTest()">
        Commencer l'Évaluation
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
      
    </div>
    
    <!-- ========================================
         ÉCRAN 2 : QUESTIONNAIRE
         ======================================== -->
    <div id="test-screen" class="screen">
      
      <!-- Barre de progression (fixée en haut) -->
      <div class="progress-container">
        <div class="progress-text" id="progress-text">Question 1 / 24</div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
        </div>
      </div>
      
      <!-- Container question dynamique -->
      <div id="question-container"></div>
      
      <!-- Navigation -->
      <div class="navigation-buttons">
        <button class="btn-secondary" id="prev-btn" onclick="prevQuestion()" style="display: none;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
          Précédent
        </button>
        <button class="btn-primary" id="next-btn" disabled>
          Suivant
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </div>
      
    </div>
    
    <!-- ========================================
         ÉCRAN 3 : RÉSULTATS
         ======================================== -->
    <div id="results-screen" class="screen">
      
      <!-- Score Global -->
      <div class="card score-card">
        <h2>Votre Profil Global</h2>
        <div class="score-circle-container" id="score-circle"></div>
        <div id="global-interpretation"></div>
      </div>
      
      <!-- Analyse Dimensionnelle -->
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24">
            <line x1="18" y1="20" x2="18" y2="10"/>
            <line x1="12" y1="20" x2="12" y2="4"/>
            <line x1="6" y1="20" x2="6" y2="14"/>
          </svg>
          Analyse Dimensionnelle
        </h2>
        <div id="dimension-analysis"></div>
      </div>
      
      <!-- Profil Contextuel -->
      <div class="card" id="profile-card" style="display: none;">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
          Profil Contextuel
        </h2>
        <div id="profile-content"></div>
      </div>
      
      <!-- Recommandations -->
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24">
            <path d="M12 2v20M2 12h20"/>
          </svg>
          Recommandations Personnalisées
        </h2>
        <ul class="recommendations-list" id="recommendations-list"></ul>
      </div>
      
      <!-- Ressources -->
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 16v-4"/>
            <path d="M12 8h.01"/>
          </svg>
          Ressources & Accompagnement
        </h2>
        <p style="margin-bottom: var(--s-6);">Si ces résultats vous interrogent ou si vous ressentez une gêne significative dans votre quotidien, n'hésitez pas à consulter un professionnel.</p>
        <ul class="resources-list">
          <li><strong>Psychologue spécialisé en régulation émotionnelle</strong> : Consultation privée ou CMP (Centre Médico-Psychologique)</li>
          <li><strong>Psychiatre</strong> : Évaluation diagnostique et accompagnement thérapeutique</li>
          <li><strong>Lignes d'écoute :</strong>
            <ul style="margin-top: var(--s-2); padding-left: var(--s-6);">
              <li style="margin-bottom: var(--s-2);"><strong>3114</strong> : Prévention suicide (gratuit, 24/7)</li>
              <li style="margin-bottom: var(--s-2);"><strong>Fil Santé Jeunes</strong> : 0800 235 236 (gratuit, anonyme, 9h-23h)</li>
            </ul>
          </li>
          <li><strong>Outils d'auto-régulation :</strong> Applications de méditation (Petit Bambou, Headspace), journaling émotionnel, exercices d'interoception</li>
        </ul>
      </div>
      
      <!-- Actions d'Export -->
      <div class="button-group">
        <button class="btn-primary" onclick="generatePDF()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Télécharger PDF Complet
        </button>
        <button class="btn-secondary" onclick="exportEmail()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
            <polyline points="22,6 12,13 2,6"/>
          </svg>
          Envoyer par Email
        </button>
        <button class="btn-secondary" onclick="exportJSON()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="12" y1="18" x2="12" y2="12"/>
            <line x1="9" y1="15" x2="15" y2="15"/>
          </svg>
          Exporter JSON
        </button>
        <button class="btn-danger" onclick="resetTest()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="1 4 1 10 7 10"/>
            <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
          </svg>
          Recommencer
        </button>
      </div>
      
    </div>
    
  </div>
  
  <script>
    /* ========================================
       CONFIGURATION DU TEST
       ======================================== */
    const TEST_NAME = "Étape Zéro,Alexithymie";
    
    const DIMENSIONS = {
      identifier: { 
        name: "Identifier ses Émotions", 
        key: "identifier",
        color: "#2563eb",
        description: "Capacité à reconnaître et distinguer ses états émotionnels"
      },
      verbaliser: { 
        name: "Verbaliser ses Émotions", 
        key: "verbaliser",
        color: "#7c3aed",
        description: "Capacité à mettre des mots sur ses ressentis internes"
      },
      penseeExt: { 
        name: "Pensée Orientée Extérieur", 
        key: "pensee-ext",
        color: "#ea580c",
        description: "Préférence pour les faits concrets vs exploration émotionnelle"
      },
      conscienceAff: { 
        name: "Conscience Affective", 
        key: "conscience-aff",
        color: "#059669",
        description: "Imaginaire émotionnel et résonance corporelle/affective"
      }
    };
    
    const SCALE_OPTIONS = [
      { value: 0, label: "Jamais", sublabel: "Jamais ou presque jamais" },
      { value: 1, label: "Rarement", sublabel: "Occasionnel, peu fréquent" },
      { value: 2, label: "Parfois", sublabel: "Présent régulièrement" },
      { value: 3, label: "Souvent", sublabel: "Fréquent, notable" },
      { value: 4, label: "Toujours", sublabel: "Toujours ou presque toujours" }
    ];
    
    const QUESTIONS = [
      // IDENTIFIER (6 questions)
      { id: "id1", text: "Je confonds ce que je ressens (par ex. colère et peur, tristesse et fatigue).", dimension: "identifier", reversed: false },
      { id: "id2", text: "Quand je suis bouleversé·e, je ne sais pas identifier quelle émotion je vis.", dimension: "identifier", reversed: false },
      { id: "id3", text: "Je distingue rapidement si je suis joyeux·se, triste, en colère ou anxieux·se.", dimension: "identifier", reversed: true },
      { id: "id4", text: "Il me faut du temps pour comprendre ce que je ressens vraiment.", dimension: "identifier", reversed: false },
      { id: "id5", text: "Je confonds une douleur physique (ventre noué, cœur serré) et une émotion.", dimension: "identifier", reversed: false },
      { id: "id6", text: "En situation de conflit, mon ressenti reste flou pour moi.", dimension: "identifier", reversed: false },
      
      // VERBALISER (6 questions)
      { id: "vb1", text: "Je manque de mots pour décrire finement ce que je ressens.", dimension: "verbaliser", reversed: false },
      { id: "vb2", text: "Mes proches me disent que je parle peu de mes émotions.", dimension: "verbaliser", reversed: false },
      { id: "vb3", text: "Je décris facilement les nuances de mes états émotionnels.", dimension: "verbaliser", reversed: true },
      { id: "vb4", text: "Raconter une scène émotionnellement chargée me coûte beaucoup.", dimension: "verbaliser", reversed: false },
      { id: "vb5", text: "Quand on me demande ce que je ressens, je reste silencieux·se ou vague.", dimension: "verbaliser", reversed: false },
      { id: "vb6", text: "Je préfère parler de faits plutôt que d'émotions.", dimension: "verbaliser", reversed: false },
      
      // PENSÉE ORIENTÉE EXTÉRIEUR (6 questions)
      { id: "eot1", text: "Je me concentre sur les tâches à faire plutôt que sur ce que je ressens.", dimension: "penseeExt", reversed: false },
      { id: "eot2", text: "Les conversations centrées sur les émotions m'ennuient.", dimension: "penseeExt", reversed: false },
      { id: "eot3", text: "Je prends mes décisions en me basant sur les faits, pas sur mes ressentis.", dimension: "penseeExt", reversed: false },
      { id: "eot4", text: "Réfléchir à mes émotions me semble utile et enrichissant.", dimension: "penseeExt", reversed: true },
      { id: "eot5", text: "Je préfère les explications techniques aux réflexions sur l'affect.", dimension: "penseeExt", reversed: false },
      { id: "eot6", text: "Je remarque rarement mes états internes au cours de la journée.", dimension: "penseeExt", reversed: false },
      
      // CONSCIENCE AFFECTIVE (6 questions)
      { id: "ca1", text: "J'ai du mal à imaginer mentalement des scènes émotionnellement intenses.", dimension: "conscienceAff", reversed: false },
      { id: "ca2", text: "Mes rêveries sont pauvres en sensations et en émotions.", dimension: "conscienceAff", reversed: false },
      { id: "ca3", text: "Je me projette facilement dans des histoires ou des films qui me touchent.", dimension: "conscienceAff", reversed: true },
      { id: "ca4", text: "Même dans une situation forte, mon corps réagit faiblement.", dimension: "conscienceAff", reversed: false },
      { id: "ca5", text: "Quand quelque chose d'émouvant arrive, je ressens une vague physique d'émotion.", dimension: "conscienceAff", reversed: true },
      { id: "ca6", text: "Mes émotions restent atténuées, même quand je devrais être touché·e.", dimension: "conscienceAff", reversed: false }
    ];
    
    const RESULT_BANDS = [
      {
        min: 0,
        max: 38,
        level: "Profil Globalement Préservé",
        severity: "low",
        color: "#059669",
        interpretation: "Les résultats suggèrent une relation globalement fluide avec vos émotions. Vous semblez capable d'identifier et de verbaliser vos ressentis de manière satisfaisante. Continuez à cultiver cette conscience émotionnelle.",
        recommendations: [
          { title: "Maintenir l'équilibre", text: "Continuez vos pratiques actuelles de conscience émotionnelle." },
          { title: "Approfondir si souhaité", text: "Vous pouvez explorer des pratiques de pleine conscience ou de journaling pour enrichir encore votre vocabulaire émotionnel." }
        ]
      },
      {
        min: 39,
        max: 57,
        level: "Difficultés Modérées Localisées",
        severity: "medium",
        color: "#ea580c",
        interpretation: "Les résultats indiquent des difficultés modérées dans certaines dimensions de votre relation aux émotions. Certaines situations peuvent générer une gêne ou de l'inconfort émotionnel. Un accompagnement ciblé pourrait vous aider à développer ces compétences.",
        recommendations: [
          { title: "Consultation recommandée", text: "Envisagez un accompagnement avec un psychologue spécialisé en régulation émotionnelle." },
          { title: "Outils pratiques", text: "Tenez un journal émotionnel quotidien : notez 3 émotions ressenties + leur contexte + intensité (0-10)." },
          { title: "Exercices d'interoception", text: "Pratiquez le body scan : scanner mentalement votre corps 5 minutes/jour pour repérer les sensations liées aux émotions." }
        ]
      },
      {
        min: 58,
        max: 96,
        level: "Difficultés Marquées",
        severity: "high",
        color: "#dc2626",
        interpretation: "Les résultats suggèrent des difficultés significatives dans votre relation aux émotions. Cela peut impacter votre bien-être quotidien, vos relations et votre prise de décision. Une consultation avec un professionnel est fortement recommandée pour explorer ces difficultés et développer des stratégies adaptées.",
        recommendations: [
          { title: "Consultation professionnelle urgente", text: "Consultez rapidement un psychologue ou un psychiatre pour une évaluation complète et un accompagnement personnalisé." },
          { title: "Thérapie ciblée", text: "Les thérapies cognitivo-comportementales (TCC) ou la thérapie d'acceptation et d'engagement (ACT) peuvent aider à développer la conscience émotionnelle." },
          { title: "Groupe de parole", text: "Rejoindre un groupe de soutien ou un atelier d'expression émotionnelle peut faciliter l'apprentissage par les pairs." },
          { title: "Outils numériques", text: "Applications de suivi émotionnel (Daylio, Moodpath) pour cartographier vos états internes progressivement." }
        ]
      }
    ];
    
    /* ========================================
       STATE MANAGEMENT
       ======================================== */
    const state = {
      currentScreen: 'intro',
      currentQuestionIndex: 0,
      answers: {},
      anamnesis: {
        age: null,
        genre: null,
        contexte: null
      },
      startTime: null,
      completionTime: null
    };
    
    /* ========================================
       FONCTIONS UTILITAIRES
       ======================================== */
    function showScreen(screenName) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(`${screenName}-screen`).classList.add('active');
      state.currentScreen = screenName;
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    function toggleCollapsible() {
      document.querySelector('.collapsible').classList.toggle('open');
    }
    
    function getResultBand(totalScore) {
      return RESULT_BANDS.find(band => 
        totalScore >= band.min && totalScore <= band.max
      );
    }
    
    function getDimensionLevel(percentage) {
      if (percentage < 40) return { level: "Dimension Préservée", class: "preservee" };
      if (percentage <= 60) return { level: "Dimension à Explorer", class: "explorer" };
      return { level: "Dimension à Accompagner", class: "accompagner" };
    }
    
    /* ========================================
       CONSENTEMENT & DÉMARRAGE
       ======================================== */
    document.getElementById('consent-checkbox').addEventListener('change', (e) => {
      document.getElementById('start-btn').disabled = !e.target.checked;
    });
    
    function startTest() {
      // Récupérer anamnèse optionnelle
      state.anamnesis.age = document.getElementById('age-input').value || null;
      state.anamnesis.genre = document.getElementById('genre-input').value || null;
      state.anamnesis.contexte = document.getElementById('contexte-input').value || null;
      
      state.startTime = Date.now();
      showScreen('test');
      renderQuestion();
    }
    
    /* ========================================
       AFFICHAGE QUESTIONS
       ======================================== */
    function renderQuestion() {
      const question = QUESTIONS[state.currentQuestionIndex];
      const dimensionInfo = DIMENSIONS[question.dimension];
      const questionNumber = state.currentQuestionIndex + 1;
      
      const html = `
        <div class="question-card">
          <div class="dimension-badge ${dimensionInfo.key}">
            ${dimensionInfo.name}
          </div>
          <div class="question-number">Question ${questionNumber}</div>
          <div class="question-text">${question.text}</div>
          <div class="answer-options">
            ${SCALE_OPTIONS.map(option => `
              <div class="answer-option ${state.answers[question.id] === option.value ? 'selected' : ''}" onclick="selectAnswer('${question.id}', ${option.value})">
                <div class="option-content">
                  <div class="option-label">${option.label}</div>
                  <div class="option-sublabel">${option.sublabel}</div>
                </div>
                <div class="option-check">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                  </svg>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
      
      document.getElementById('question-container').innerHTML = html;
      updateProgress();
      updateNavigationButtons();
    }
    
    function updateProgress() {
      const progress = ((state.currentQuestionIndex + 1) / QUESTIONS.length) * 100;
      document.getElementById('progress-fill').style.width = `${progress}%`;
      document.getElementById('progress-text').textContent = `Question ${state.currentQuestionIndex + 1} / ${QUESTIONS.length}`;
    }
    
    function updateNavigationButtons() {
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      
      // Bouton précédent
      if (state.currentQuestionIndex > 0) {
        prevBtn.style.display = 'flex';
      } else {
        prevBtn.style.display = 'none';
      }
      
      // Bouton suivant
      const currentQuestion = QUESTIONS[state.currentQuestionIndex];
      const hasAnswer = state.answers.hasOwnProperty(currentQuestion.id);
      nextBtn.disabled = !hasAnswer;
      
      // Dernière question : transformer en "Voir mes Résultats"
      if (state.currentQuestionIndex === QUESTIONS.length - 1) {
        nextBtn.innerHTML = `
          Voir mes Résultats
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        `;
        nextBtn.onclick = showResults;
      } else {
        nextBtn.innerHTML = `
          Suivant
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        `;
        nextBtn.onclick = nextQuestion;
      }
    }
    
    /* ========================================
       SÉLECTION RÉPONSE & NAVIGATION
       ======================================== */
    function selectAnswer(questionId, value) {
      state.answers[questionId] = value;
      
      // Animation feedback
      document.querySelectorAll('.answer-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      event.currentTarget.classList.add('selected');
      
      // Transition automatique après 150ms
      setTimeout(() => {
        if (state.currentQuestionIndex < QUESTIONS.length - 1) {
          nextQuestion();
        } else {
          updateNavigationButtons();
        }
      }, 150);
    }
    
    function nextQuestion() {
      if (state.currentQuestionIndex < QUESTIONS.length - 1) {
        state.currentQuestionIndex++;
        renderQuestion();
      }
    }
    
    function prevQuestion() {
      if (state.currentQuestionIndex > 0) {
        state.currentQuestionIndex--;
        renderQuestion();
      }
    }
    
    /* ========================================
       CALCUL SCORES
       ======================================== */
    function calculateScores() {
      const dimensions = {
        identifier: { score: 0, max: 0 },
        verbaliser: { score: 0, max: 0 },
        penseeExt: { score: 0, max: 0 },
        conscienceAff: { score: 0, max: 0 }
      };
      
      let totalScore = 0;
      let maxTotalScore = 0;
      
      QUESTIONS.forEach(q => {
        const answer = state.answers[q.id];
        if (answer !== undefined) {
          // Inversion si nécessaire
          const adjustedAnswer = q.reversed ? (4 - answer) : answer;
          
          totalScore += adjustedAnswer;
          maxTotalScore += 4;
          
          dimensions[q.dimension].score += adjustedAnswer;
          dimensions[q.dimension].max += 4;
        }
      });
      
      // Calcul pourcentages
      const dimensionsWithPercentages = {};
      Object.entries(dimensions).forEach(([key, data]) => {
        dimensionsWithPercentages[key] = {
          ...data,
          percentage: Math.round((data.score / data.max) * 100)
        };
      });
      
      return {
        total: totalScore,
        maxTotal: maxTotalScore,
        percentage: Math.round((totalScore / maxTotalScore) * 100),
        dimensions: dimensionsWithPercentages
      };
    }
    
    /* ========================================
       AFFICHAGE RÉSULTATS
       ======================================== */
    function showResults() {
      state.completionTime = Date.now();
      const scores = calculateScores();
      const resultBand = getResultBand(scores.total);
      
      // Score Global
      renderScoreCircle(scores);
      renderGlobalInterpretation(scores, resultBand);
      
      // Analyse Dimensionnelle
      renderDimensionAnalysis(scores);
      
      // Profil Contextuel
      renderProfile();
      
      // Recommandations
      renderRecommendations(resultBand, scores);
      
      showScreen('results');
    }
    
    function renderScoreCircle(scores) {
      const radius = 120;
      const circumference = 2 * Math.PI * radius;
      const offset = circumference - (scores.percentage / 100) * circumference;
      
      const svg = `
        <svg width="280" height="280" class="score-circle">
          <circle
            cx="140"
            cy="140"
            r="${radius}"
            fill="none"
            stroke="var(--creme-principal)"
            stroke-width="12"
          />
          <circle
            cx="140"
            cy="140"
            r="${radius}"
            fill="none"
            stroke="var(--or-signature)"
            stroke-width="12"
            stroke-dasharray="${circumference}"
            stroke-dashoffset="${offset}"
            stroke-linecap="round"
            transform="rotate(-90 140 140)"
            style="transition: stroke-dashoffset 1s cubic-bezier(0.16, 1, 0.3, 1);"
          />
          <text
            x="50%"
            y="45%"
            text-anchor="middle"
            dominant-baseline="middle"
            font-family="Fraunces, serif"
            font-size="56"
            font-weight="700"
            fill="var(--noir-absolu)"
          >${scores.total}</text>
          <text
            x="50%"
            y="60%"
            text-anchor="middle"
            dominant-baseline="middle"
            font-family="Inter, sans-serif"
            font-size="18"
            fill="rgba(10,10,10,0.6)"
          >sur ${scores.maxTotal}</text>
        </svg>
      `;
      
      document.getElementById('score-circle').innerHTML = svg;
    }
    
    function renderGlobalInterpretation(scores, resultBand) {
      const html = `
        <div style="display: inline-flex; align-items: center; gap: var(--s-2); padding: var(--s-2) var(--s-4); background: ${resultBand.color}15; border-radius: var(--radius-pill); margin-bottom: var(--s-6);">
          <span style="font-size: var(--fs-md); font-weight: 700; color: ${resultBand.color};">
            ${resultBand.level}
          </span>
        </div>
        <p style="font-size: var(--fs-md); line-height: var(--lh-relaxed); color: rgba(10,10,10,0.8); max-width: 600px; margin: 0 auto;">
          ${resultBand.interpretation}
        </p>
      `;
      
      document.getElementById('global-interpretation').innerHTML = html;
    }
    
    function renderDimensionAnalysis(scores) {
      let html = '';
      
      Object.entries(scores.dimensions).forEach(([key, data]) => {
        const dimensionInfo = DIMENSIONS[key];
        const level = getDimensionLevel(data.percentage);
        
        html += `
          <div class="dimension-bar-container">
            <div class="dimension-bar-header">
              <span class="dimension-name">${dimensionInfo.name}</span>
              <span class="dimension-percentage">${data.percentage}%</span>
            </div>
            <div class="dimension-bar-bg">
              <div class="dimension-bar-fill ${dimensionInfo.key}" style="width: ${data.percentage}%"></div>
            </div>
            <div class="dimension-interpretation ${level.class}">
              <strong>${level.level}</strong>,${dimensionInfo.description}. 
              ${getDetailedDimensionInterpretation(key, data.percentage)}
            </div>
          </div>
        `;
      });
      
      document.getElementById('dimension-analysis').innerHTML = html;
    }
    
    function getDetailedDimensionInterpretation(dimension, percentage) {
      const interpretations = {
        identifier: {
          preservee: "Vous semblez capable de reconnaître vos émotions avec clarté.",
          explorer: "Vous pourriez affiner votre capacité à distinguer vos différentes émotions.",
          accompagner: "Identifier précisément vos émotions semble constituer un défi significatif. Un accompagnement pourrait vous aider."
        },
        verbaliser: {
          preservee: "Vous exprimez vos émotions avec aisance.",
          explorer: "Trouver les mots justes pour décrire vos ressentis pourrait mériter une attention particulière.",
          accompagner: "Mettre des mots sur vos émotions représente une difficulté notable. Des outils concrets pourraient vous aider."
        },
        penseeExt: {
          preservee: "Vous accordez de l'attention à vos états internes tout en restant pragmatique.",
          explorer: "Votre préférence pour les faits concrets pourrait limiter l'exploration émotionnelle.",
          accompagner: "Votre orientation vers l'extérieur semble très marquée, potentiellement au détriment de votre vie émotionnelle intérieure."
        },
        conscienceAff: {
          preservee: "Votre imaginaire émotionnel et votre résonance corporelle semblent préservés.",
          explorer: "Développer votre imaginaire affectif pourrait enrichir votre expérience émotionnelle.",
          accompagner: "Votre conscience affective apparaît limitée. Renforcer le lien corps-émotion pourrait être bénéfique."
        }
      };
      
      const level = percentage < 40 ? 'preservee' : (percentage <= 60 ? 'explorer' : 'accompagner');
      return interpretations[dimension][level];
    }
    
    function renderProfile() {
      if (!state.anamnesis.age && !state.anamnesis.genre && !state.anamnesis.contexte) {
        document.getElementById('profile-card').style.display = 'none';
        return;
      }
      
      let html = '<ul style="list-style: none; padding: 0;">';
      
      if (state.anamnesis.age) {
        html += `<li style="margin-bottom: var(--s-3);"><strong>Âge :</strong> ${state.anamnesis.age} ans</li>`;
      }
      
      if (state.anamnesis.genre) {
        const genreLabels = {
          homme: "Homme",
          femme: "Femme",
          "non-binaire": "Non-binaire",
          autre: "Autre"
        };
        html += `<li style="margin-bottom: var(--s-3);"><strong>Genre :</strong> ${genreLabels[state.anamnesis.genre] || state.anamnesis.genre}</li>`;
      }
      
      if (state.anamnesis.contexte) {
        const contexteLabels = {
          etudiant: "Étudiant·e",
          salarie: "Salarié·e",
          independant: "Indépendant·e",
          recherche: "En recherche d'emploi",
          retraite: "Retraité·e",
          autre: "Autre"
        };
        html += `<li style="margin-bottom: var(--s-3);"><strong>Contexte :</strong> ${contexteLabels[state.anamnesis.contexte] || state.anamnesis.contexte}</li>`;
      }
      
      html += '</ul>';
      html += '<p style="font-size: var(--fs-sm); color: rgba(10,10,10,0.7); margin-top: var(--s-4);">Ces facteurs contextuels peuvent influencer votre relation aux émotions sans nécessairement relever de difficultés intrinsèques.</p>';
      
      document.getElementById('profile-content').innerHTML = html;
      document.getElementById('profile-card').style.display = 'block';
    }
    
    function renderRecommendations(resultBand, scores) {
      let html = '';
      
      resultBand.recommendations.forEach(rec => {
        html += `
          <li>
            <strong>${rec.title}</strong>
            <span>${rec.text}</span>
          </li>
        `;
      });
      
      document.getElementById('recommendations-list').innerHTML = html;
    }
    
    /* ========================================
       EXPORT PDF
       ======================================== */
    function generatePDF() {
      const scores = calculateScores();
      const resultBand = getResultBand(scores.total);
      const dateStr = new Date().toLocaleDateString('fr-FR', { 
        year: 'numeric', month: 'long', day: 'numeric' 
      });
      
      const printWindow = window.open('', '', 'width=800,height=600');
      printWindow.document.write(`
        <!DOCTYPE html>
        <html lang="fr">
        <head>
          <meta charset="UTF-8">
          <title>Rapport ${TEST_NAME},NOÉSIS</title>
          <style>
            @page { size: A4; margin: 2.5cm; }
            body {
              font-family: 'Inter', sans-serif;
              font-size: 10pt;
              line-height: 1.5;
              color: #0A0A0A;
            }
            h1, h2, h3 {
              font-family: 'Fraunces', serif;
              page-break-after: avoid;
            }
            h1 { font-size: 20pt; margin-bottom: 8pt; }
            h2 { font-size: 14pt; margin-top: 16pt; margin-bottom: 8pt; }
            h3 { font-size: 12pt; margin-top: 12pt; margin-bottom: 6pt; }
            .section {
              page-break-inside: avoid;
              margin-bottom: 16pt;
            }
            .header {
              text-align: center;
              padding-bottom: 12pt;
              border-bottom: 2pt solid #C7A86D;
              margin-bottom: 16pt;
            }
            .warning-box {
              background: #fffbeb;
              border-left: 4px solid #C7A86D;
              padding: 8pt;
              margin: 16pt 0;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin: 8pt 0;
            }
            th, td {
              padding: 6pt;
              text-align: left;
              border-bottom: 1px solid #E5E5E5;
            }
            th {
              background: #F7F5EF;
              font-weight: 600;
            }
            .footer {
              margin-top: 24pt;
              padding-top: 12pt;
              border-top: 1pt solid #C7A86D;
              font-size: 8pt;
              color: #666;
              text-align: center;
            }
          </style>
        </head>
        <body>
          
          <!-- En-tête -->
          <div class="header">
            <h1>RAPPORT ${TEST_NAME}</h1>
            <p>NOÉSIS,Intelligence transdisciplinaire</p>
            <p>Généré le ${dateStr}</p>
          </div>
          
          <!-- Synthèse Exécutive -->
          <div class="section">
            <h2>Synthèse Exécutive</h2>
            <p><strong>Score Total :</strong> ${scores.total} / ${scores.maxTotal} (${scores.percentage}%)</p>
            <p><strong>Niveau :</strong> ${resultBand.level}</p>
            <p>${resultBand.interpretation}</p>
          </div>
          
          <!-- Analyse Dimensionnelle -->
          <div class="section">
            <h2>Analyse Dimensionnelle Complète</h2>
            <table>
              <thead>
                <tr>
                  <th>Dimension</th>
                  <th>Score</th>
                  <th>Pourcentage</th>
                  <th>Niveau</th>
                </tr>
              </thead>
              <tbody>
                ${Object.entries(scores.dimensions).map(([key, data]) => {
                  const dimensionInfo = DIMENSIONS[key];
                  const level = getDimensionLevel(data.percentage);
                  return `
                    <tr>
                      <td><strong>${dimensionInfo.name}</strong></td>
                      <td>${data.score} / ${data.max}</td>
                      <td>${data.percentage}%</td>
                      <td>${level.level}</td>
                    </tr>
                  `;
                }).join('')}
              </tbody>
            </table>
            
            ${Object.entries(scores.dimensions).map(([key, data]) => {
              const dimensionInfo = DIMENSIONS[key];
              const level = getDimensionLevel(data.percentage);
              return `
                <h3>${dimensionInfo.name} (${data.percentage}%)</h3>
                <p>${dimensionInfo.description}. ${getDetailedDimensionInterpretation(key, data.percentage)}</p>
              `;
            }).join('')}
          </div>
          
          <!-- Détail des Réponses -->
          <div class="section">
            <h2>Détail des Réponses</h2>
            ${Object.entries(DIMENSIONS).map(([key, dimensionInfo]) => {
              const dimensionQuestions = QUESTIONS.filter(q => q.dimension === key);
              return `
                <h3>${dimensionInfo.name}</h3>
                ${dimensionQuestions.map((q, idx) => {
                  const answer = state.answers[q.id];
                  const adjustedAnswer = q.reversed ? (4 - answer) : answer;
                  const option = SCALE_OPTIONS.find(o => o.value === answer);
                  return `
                    <p><strong>Q${idx + 1}.</strong> ${q.text}<br>
                    <em>Réponse : ${option.label} (${adjustedAnswer} point${adjustedAnswer > 1 ? 's' : ''})</em></p>
                  `;
                }).join('')}
              `;
            }).join('')}
          </div>
          
          <!-- Recommandations -->
          <div class="section">
            <h2>Recommandations Personnalisées</h2>
            <ol>
              ${resultBand.recommendations.map(rec => `
                <li><strong>${rec.title}</strong> : ${rec.text}</li>
              `).join('')}
            </ol>
          </div>
          
          <!-- Méthodologie & Limites -->
          <div class="section">
            <h2>Méthodologie & Limites</h2>
            <p><strong>Cadre théorique :</strong> Cet outil s'inspire des modèles TAS-20 (Toronto Alexithymia Scale) et BVAQ (Bermond-Vorst Alexithymia Questionnaire). Il explore quatre dimensions : identification émotionnelle, verbalisation, pensée orientée extérieur, et conscience affective.</p>
            <p><strong>Limites explicites :</strong></p>
            <ul>
              <li>Cet outil n'est pas validé psychométriquement et ne constitue pas un instrument diagnostique.</li>
              <li>Les résultats reflètent une auto-évaluation subjective à un instant donné.</li>
              <li>Une interprétation professionnelle est nécessaire pour contextualiser ces résultats.</li>
              <li>Les normes culturelles, de genre et contextuelles influencent la relation aux émotions.</li>
            </ul>
          </div>
          
          <!-- Avertissement Final -->
          <div class="warning-box">
            <h3>⚠ Avertissement Important</h3>
            <p>Ce questionnaire constitue un outil de sensibilisation et ne remplace en aucun cas une consultation avec un professionnel qualifié. Les résultats reflètent votre perception subjective et nécessitent interprétation contextuelle.</p>
            <p><strong>Ressources France :</strong></p>
            <ul>
              <li><strong>3114</strong> : Prévention suicide (gratuit, 24/7)</li>
              <li><strong>Fil Santé Jeunes</strong> : 0800 235 236 (gratuit, anonyme)</li>
            </ul>
          </div>
          
          <!-- Pied de page -->
          <div class="footer">
            <p><strong>NOÉSIS</strong>,Intelligence transdisciplinaire au service de la lucidité</p>
            <p>© ${new Date().getFullYear()} NOÉSIS,Tous droits réservés</p>
            <p>Outil de sensibilisation et pré-évaluation,Non validé psychométriquement<br>
            Ne remplace pas une consultation avec un professionnel qualifié<br>
            Confidentialité : aucune donnée collectée sans action explicite</p>
          </div>
          
        </body>
        </html>
      `);
      
      printWindow.document.close();
      setTimeout(() => printWindow.print(), 800);
    }
    
    /* ========================================
       EXPORT EMAIL
       ======================================== */
    function exportEmail() {
      const scores = calculateScores();
      const resultBand = getResultBand(scores.total);
      const dateStr = new Date().toLocaleDateString('fr-FR');
      
      const subject = encodeURIComponent(`Rapport ${TEST_NAME},${dateStr}`);
      
      let body = `RAPPORT NOÉSIS,${TEST_NAME}\n`;
      body += `Généré le ${dateStr}\n\n`;
      body += `SCORE TOTAL : ${scores.total}/${scores.maxTotal} (${scores.percentage}%)\n`;
      body += `NIVEAU : ${resultBand.level}\n\n`;
      body += `ANALYSE DIMENSIONNELLE :\n`;
      
      Object.entries(scores.dimensions).forEach(([key, data]) => {
        const dimensionInfo = DIMENSIONS[key];
        body += `• ${dimensionInfo.name} : ${data.percentage}%\n`;
      });
      
      body += `\nSYNTHÈSE :\n${resultBand.interpretation}\n\n`;
      body += `Pour consulter le rapport complet avec analyses approfondies, recommandations personnalisées et détail des réponses, veuillez télécharger la version PDF depuis l'interface NOÉSIS.\n\n`;
      body += `---\nNOÉSIS,Intelligence transdisciplinaire\n© ${new Date().getFullYear()},Tous droits réservés`;
      
      const mailtoLink = `mailto:?subject=${subject}&body=${encodeURIComponent(body)}`;
      window.location.href = mailtoLink;
    }
    
    /* ========================================
       EXPORT JSON
       ======================================== */
    function exportJSON() {
      const scores = calculateScores();
      const resultBand = getResultBand(scores.total);
      
      const data = {
        metadata: {
          test: TEST_NAME,
          version: "1.0.0 - NOÉSIS",
          theoreticalFramework: "TAS-20, BVAQ",
          date: new Date().toISOString(),
          completionTime: state.completionTime ? Math.round((state.completionTime - state.startTime) / 1000) : null
        },
        anamnesis: state.anamnesis,
        responses: {
          answers: state.answers,
          completion: `${Object.keys(state.answers).length}/${QUESTIONS.length}`
        },
        scoring: {
          total: scores.total,
          maxTotal: scores.maxTotal,
          percentage: scores.percentage,
          dimensions: scores.dimensions,
          resultBand: {
            level: resultBand.level,
            severity: resultBand.severity,
            interpretation: resultBand.interpretation
          }
        },
        detailedResponses: QUESTIONS.map(q => ({
          id: q.id,
          dimension: q.dimension,
          text: q.text,
          reversed: q.reversed,
          response: {
            value: state.answers[q.id],
            adjustedValue: q.reversed ? (4 - state.answers[q.id]) : state.answers[q.id],
            label: SCALE_OPTIONS.find(o => o.value === state.answers[q.id])?.label
          }
        }))
      };
      
      const dataStr = JSON.stringify(data, null, 2);
      const blob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `alexithymie-etape-zero-${Date.now()}.json`;
      link.click();
      URL.revokeObjectURL(url);
    }
    
    /* ========================================
       RESET
       ======================================== */
    function resetTest() {
      if (confirm('Êtes-vous sûr de vouloir recommencer ? Toutes vos réponses seront perdues.')) {
        state.currentQuestionIndex = 0;
        state.answers = {};
        state.anamnesis = { age: null, genre: null, contexte: null };
        document.getElementById('consent-checkbox').checked = false;
        document.getElementById('start-btn').disabled = true;
        document.getElementById('age-input').value = '';
        document.getElementById('genre-input').value = '';
        document.getElementById('contexte-input').value = '';
        showScreen('intro');
      }
    }
    
  </script>
  
</body>
</html>