<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO -->
  <title>Vampires Énergétiques — Typologie Relationnelle | NOÉSIS</title>
  <meta name="description" content="Auto-test psychosocial (40 questions) pour identifier les relations asymétriques chroniques et l'extraction d'énergie émotionnelle. Analyse scientifique rigoureuse sur 6 dimensions.">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Vampires Énergétiques — Typologie | NOÉSIS">
  <meta property="og:description" content="Identification des patterns de relations épuisantes. 40 questions, 8-10 minutes.">
  <meta property="og:type" content="website">
  
  <!-- Polices Google -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@300;400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* ============================================
       VARIABLES CSS NOÉSIS
       ============================================ */
    :root {
      /* Fondations Neutres */
      --noir-absolu: #0A0A0A;
      --noir-doux: #111111;
      --creme-principal: #F7F5EF;
      --creme-chaud: #F9F7F1;
      --blanc-surface: #FFFFFF;
      
      /* Signature Or NOÉSIS */
      --or-signature: #C7A86D;
      --or-riche: #D4B980;
      --or-sombre: #A89158;
      --or-subtil: rgba(199,168,109,0.08);
      --or-leger: rgba(199,168,109,0.15);
      --or-moyen: rgba(199,168,109,0.25);
      
      /* Bordures */
      --border-subtil: rgba(10,10,10,0.08);
      --border-leger: rgba(10,10,10,0.12);
      --border-visible: rgba(10,10,10,0.18);
      
      /* Typographie */
      --fs-xs: 12px; --fs-sm: 14px; --fs-md: 18px;
      --fs-lg: 21px; --fs-xl: 24px; --fs-2xl: 32px; --fs-3xl: 42px;
      --lh-tight: 1.2; --lh-normal: 1.5; --lh-relaxed: 1.7;
      
      /* Spacing (échelle 8px) */
      --s-2: 8px; --s-3: 12px; --s-4: 16px;
      --s-6: 24px; --s-8: 32px; --s-12: 48px;
      --s-16: 64px; --s-20: 80px;
      
      /* Ombres */
      --shadow-soft: 0 2px 8px rgba(10,10,10,0.08), 0 1px 2px rgba(10,10,10,0.12);
      --shadow-medium: 0 4px 16px rgba(10,10,10,0.1), 0 2px 4px rgba(10,10,10,0.15);
      --shadow-large: 0 8px 32px rgba(10,10,10,0.12), 0 2px 8px rgba(10,10,10,0.18);
      
      /* Border Radius */
      --radius-sm: 4px; --radius-md: 8px; --radius-lg: 12px;
      --radius-xl: 16px; --radius-2xl: 24px; --radius-pill: 9999px;
      
      /* Animations */
      --duration-fast: 150ms;
      --duration-normal: 250ms;
      --duration-slow: 350ms;
      --ease-standard: cubic-bezier(0.4, 0.0, 0.2, 1);
      --ease-spring: cubic-bezier(0.16, 1, 0.3, 1);
      
      /* Couleurs Dimensionnelles */
      --epuisement-color: #dc2626;
      --epuisement-bg: rgba(220,38,38,0.08);
      --tactique-color: #ea580c;
      --tactique-bg: rgba(234,88,12,0.08);
      --cognitif-color: #7c3aed;
      --cognitif-bg: rgba(124,58,237,0.08);
      --frontiere-color: #2563eb;
      --frontiere-bg: rgba(37,99,235,0.08);
      --social-color: #059669;
      --social-bg: rgba(5,150,105,0.08);
      --reversibilite-color: #10b981;
      --reversibilite-bg: rgba(16,185,129,0.08);
    }
    
    /* ============================================
       RESET & BASE
       ============================================ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      font-size: var(--fs-md);
      line-height: var(--lh-relaxed);
      color: var(--noir-absolu);
      background: var(--creme-principal);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    h1, h2, h3 {
      font-family: 'Fraunces', Georgia, serif;
      font-weight: 600;
      line-height: var(--lh-tight);
      color: var(--noir-absolu);
    }
    
    h1 { font-size: var(--fs-3xl); }
    h2 { font-size: var(--fs-2xl); }
    h3 { font-size: var(--fs-xl); }
    
    /* ============================================
       LAYOUT
       ============================================ */
    .app-container {
      max-width: 900px;
      margin: 0 auto;
      padding: var(--s-12) var(--s-6);
    }
    
    .screen {
      display: none;
      animation: fadeIn var(--duration-normal) var(--ease-standard);
    }
    
    .screen.active {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* ============================================
       EN-TÊTE INTRODUCTION
       ============================================ */
    .intro-header {
      text-align: center;
      margin-bottom: var(--s-12);
    }
    
    .intro-icon-container {
      width: 80px;
      height: 80px;
      margin: 0 auto var(--s-6);
      background: linear-gradient(135deg, var(--or-subtil), var(--or-leger));
      border: 3px solid var(--or-signature);
      border-radius: var(--radius-xl);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .intro-icon {
      width: 48px;
      height: 48px;
      stroke: var(--or-signature);
      fill: none;
      stroke-width: 2;
    }
    
    .intro-title {
      font-size: var(--fs-3xl);
      margin-bottom: var(--s-3);
      color: var(--noir-absolu);
    }
    
    .intro-subtitle {
      font-size: var(--fs-md);
      color: rgba(10,10,10,0.6);
      font-weight: 400;
      line-height: var(--lh-normal);
      max-width: 700px;
      margin: 0 auto;
    }
    
    /* ============================================
       CARTES
       ============================================ */
    .card {
      background: var(--blanc-surface);
      border-radius: var(--radius-2xl);
      padding: var(--s-12);
      margin-bottom: var(--s-8);
      box-shadow: var(--shadow-large);
    }
    
    .card h2 {
      font-size: var(--fs-xl);
      margin-bottom: var(--s-6);
      display: flex;
      align-items: center;
      gap: var(--s-3);
    }
    
    .card-icon {
      width: 24px;
      height: 24px;
      stroke: var(--or-signature);
      fill: none;
      stroke-width: 2;
      flex-shrink: 0;
    }
    
    .card p {
      margin-bottom: var(--s-4);
      color: rgba(10,10,10,0.85);
      line-height: var(--lh-relaxed);
    }
    
    .card p:last-child {
      margin-bottom: 0;
    }
    
    .card ul {
      margin-left: var(--s-6);
      color: rgba(10,10,10,0.85);
    }
    
    .card ul li {
      margin-bottom: var(--s-2);
      line-height: var(--lh-normal);
    }
    
    /* ============================================
       MÉTHODOLOGIE — GRID 2x2+1
       ============================================ */
    .methodology-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--s-4);
      margin-bottom: var(--s-6);
    }
    
    .methodology-item {
      background: var(--creme-chaud);
      border-radius: var(--radius-lg);
      padding: var(--s-6);
      text-align: center;
    }
    
    .methodology-item-icon {
      width: 48px;
      height: 48px;
      margin: 0 auto var(--s-3);
      stroke: var(--or-signature);
      fill: none;
      stroke-width: 2;
    }
    
    .methodology-item-title {
      font-family: 'Fraunces', serif;
      font-size: var(--fs-lg);
      font-weight: 600;
      margin-bottom: var(--s-2);
      color: var(--noir-absolu);
    }
    
    .methodology-item-subtitle {
      font-size: var(--fs-sm);
      color: rgba(10,10,10,0.7);
      line-height: var(--lh-normal);
    }
    
    .methodology-item.full-width {
      grid-column: 1 / -1;
    }
    
    .methodology-validity {
      background: var(--or-subtil);
      border-left: 4px solid var(--or-signature);
      border-radius: var(--radius-md);
      padding: var(--s-4);
      font-size: var(--fs-sm);
      line-height: var(--lh-normal);
      color: rgba(10,10,10,0.75);
    }
    
    .methodology-validity strong {
      color: var(--noir-absolu);
      font-weight: 600;
    }
    
    /* ============================================
       WARNING BOX
       ============================================ */
    .warning-box {
      background: #fffbeb;
      border-left: 4px solid var(--or-signature);
      border-radius: var(--radius-md);
      padding: var(--s-6);
      margin-bottom: var(--s-8);
    }
    
    .warning-box h3 {
      font-size: var(--fs-lg);
      margin-bottom: var(--s-3);
      display: flex;
      align-items: center;
      gap: var(--s-2);
      color: var(--noir-absolu);
    }
    
    .warning-icon {
      width: 20px;
      height: 20px;
      stroke: var(--or-signature);
      fill: none;
      stroke-width: 2;
      flex-shrink: 0;
    }
    
    .warning-box p {
      font-size: var(--fs-sm);
      line-height: var(--lh-relaxed);
      color: rgba(10,10,10,0.75);
      margin-bottom: var(--s-3);
    }
    
    .warning-box p:last-child {
      margin-bottom: 0;
    }
    
    .emergency-resources {
      margin-top: var(--s-4);
      padding-top: var(--s-4);
      border-top: 1px solid rgba(199,168,109,0.3);
      font-weight: 500;
    }
    
    .emergency-resources strong {
      color: var(--or-sombre);
    }
    
    /* ============================================
       DIMENSIONS ÉVALUÉES
       ============================================ */
    .dimensions-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--s-4);
    }
    
    .dimension-card {
      padding: var(--s-6);
      border-radius: var(--radius-lg);
      border-left: 4px solid;
      position: relative;
    }
    
    .dimension-card.epuisement {
      background: var(--epuisement-bg);
      border-color: var(--epuisement-color);
    }
    
    .dimension-card.tactique {
      background: var(--tactique-bg);
      border-color: var(--tactique-color);
    }
    
    .dimension-card.cognitif {
      background: var(--cognitif-bg);
      border-color: var(--cognitif-color);
    }
    
    .dimension-card.frontiere {
      background: var(--frontiere-bg);
      border-color: var(--frontiere-color);
    }
    
    .dimension-card.social {
      background: var(--social-bg);
      border-color: var(--social-color);
    }
    
    .dimension-card.reversibilite {
      background: var(--reversibilite-bg);
      border-color: var(--reversibilite-color);
    }
    
    .dimension-number {
      font-family: 'Fraunces', serif;
      font-size: var(--fs-3xl);
      font-weight: 300;
      opacity: 0.2;
      margin-bottom: var(--s-2);
    }
    
    .dimension-title {
      font-family: 'Fraunces', serif;
      font-size: var(--fs-lg);
      font-weight: 600;
      margin-bottom: var(--s-3);
      color: var(--noir-absolu);
    }
    
    .dimension-description {
      font-size: var(--fs-sm);
      color: rgba(10,10,10,0.75);
      line-height: var(--lh-normal);
    }
    
    /* ============================================
       FORMULAIRE ANAMNÈSE
       ============================================ */
    .form-group {
      display: flex;
      flex-direction: column;
      gap: var(--s-2);
      margin-bottom: var(--s-6);
    }
    
    .form-label {
      font-size: var(--fs-md);
      font-weight: 600;
      color: var(--noir-absolu);
    }
    
    .form-select, .form-input {
      padding: var(--s-4);
      border: 2px solid var(--border-leger);
      border-radius: var(--radius-md);
      font-size: var(--fs-md);
      font-family: 'Inter', sans-serif;
      background: var(--blanc-surface);
      transition: all var(--duration-normal) var(--ease-standard);
    }
    
    .form-select:focus, .form-input:focus {
      outline: none;
      border-color: var(--or-signature);
      box-shadow: 0 0 0 3px var(--or-subtil);
    }
    
    /* ============================================
       CONSENTEMENT
       ============================================ */
    .consent-container {
      background: var(--or-subtil);
      border: 2px solid var(--or-leger);
      border-radius: var(--radius-md);
      padding: var(--s-6);
      margin-top: var(--s-8);
      margin-bottom: var(--s-6);
    }
    
    .consent-checkbox-wrapper {
      display: flex;
      align-items: flex-start;
      gap: var(--s-3);
      cursor: pointer;
    }
    
    .consent-checkbox-wrapper input[type="checkbox"] {
      margin-top: 4px;
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: var(--or-signature);
    }
    
    .consent-checkbox-wrapper label {
      flex: 1;
      font-size: var(--fs-sm);
      line-height: var(--lh-normal);
      color: var(--noir-absolu);
      cursor: pointer;
    }
    
    /* ============================================
       BOUTONS
       ============================================ */
    .btn {
      font-family: 'Inter', sans-serif;
      font-size: var(--fs-md);
      font-weight: 600;
      padding: var(--s-4) var(--s-8);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--duration-normal) var(--ease-standard);
      border: none;
      display: inline-block;
      text-decoration: none;
      text-align: center;
    }
    
    .btn-primary {
      background: var(--or-signature);
      color: var(--blanc-surface);
      box-shadow: var(--shadow-soft);
    }
    
    .btn-primary:hover:not(:disabled) {
      background: var(--or-riche);
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
    }
    
    .btn-primary:active:not(:disabled) {
      background: var(--or-sombre);
      transform: translateY(0);
    }
    
    .btn-primary:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn-secondary {
      background: transparent;
      color: var(--or-signature);
      border: 2px solid var(--or-signature);
    }
    
    .btn-secondary:hover {
      background: var(--or-subtil);
    }
    
    .btn-large {
      width: 100%;
      padding: var(--s-6) var(--s-8);
      font-size: var(--fs-lg);
    }
    
    /* ============================================
       BARRE DE PROGRESSION
       ============================================ */
    .progress-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--blanc-surface);
      padding: var(--s-4) var(--s-6);
      box-shadow: var(--shadow-soft);
      z-index: 1000;
    }
    
    .progress-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--s-2);
      font-size: var(--fs-sm);
      font-weight: 500;
      color: var(--noir-doux);
    }
    
    #questions-remaining {
      color: rgba(10,10,10,0.6);
    }
    
    .progress-bar-container {
      height: 4px;
      background: var(--creme-principal);
      border-radius: var(--radius-pill);
      overflow: hidden;
    }
    
    .progress-bar-fill {
      height: 100%;
      background: var(--or-signature);
      transition: width var(--duration-slow) var(--ease-spring);
      border-radius: var(--radius-pill);
    }
    
    /* ============================================
       QUESTION
       ============================================ */
    .question-container {
      margin-top: 100px;
      margin-bottom: var(--s-20);
    }
    
    .question-card {
      background: var(--blanc-surface);
      border-radius: var(--radius-2xl);
      padding: var(--s-12);
      box-shadow: var(--shadow-large);
    }
    
    .question-header {
      margin-bottom: var(--s-6);
    }
    
    .question-number {
      font-size: var(--fs-xs);
      font-weight: 600;
      color: rgba(10,10,10,0.5);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: var(--s-2);
    }
    
    .dimension-badge {
      display: inline-block;
      padding: var(--s-2) var(--s-4);
      border-radius: var(--radius-pill);
      font-size: var(--fs-xs);
      font-weight: 600;
      margin-bottom: var(--s-6);
    }
    
    .dimension-badge.epuisement {
      background: var(--epuisement-bg);
      color: var(--epuisement-color);
    }
    
    .dimension-badge.tactique {
      background: var(--tactique-bg);
      color: var(--tactique-color);
    }
    
    .dimension-badge.cognitif {
      background: var(--cognitif-bg);
      color: var(--cognitif-color);
    }
    
    .dimension-badge.frontiere {
      background: var(--frontiere-bg);
      color: var(--frontiere-color);
    }
    
    .dimension-badge.social {
      background: var(--social-bg);
      color: var(--social-color);
    }
    
    .dimension-badge.reversibilite {
      background: var(--reversibilite-bg);
      color: var(--reversibilite-color);
    }
    
    .question-text {
      font-size: var(--fs-lg);
      line-height: var(--lh-relaxed);
      margin-bottom: var(--s-8);
      color: var(--noir-absolu);
    }
    
    .answer-options {
      display: flex;
      flex-direction: column;
      gap: var(--s-3);
    }
    
    .answer-option {
      background: var(--blanc-surface);
      border: 2px solid var(--border-leger);
      border-radius: var(--radius-md);
      padding: var(--s-4);
      cursor: pointer;
      transition: all var(--duration-normal) var(--ease-standard);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .answer-option:hover {
      border-color: var(--border-visible);
      transform: translateX(4px);
      box-shadow: var(--shadow-soft);
    }
    
    .answer-option.selected {
      background: var(--or-subtil);
      border: 2px solid var(--or-signature);
      transform: scale(1.02);
    }
    
    .option-content {
      flex: 1;
    }
    
    .option-label {
      font-size: var(--fs-md);
      font-weight: 600;
      color: var(--noir-absolu);
      margin-bottom: var(--s-2);
    }
    
    .option-sublabel {
      font-size: var(--fs-sm);
      color: rgba(10,10,10,0.7);
      line-height: var(--lh-normal);
    }
    
    .option-check {
      width: 24px;
      height: 24px;
      border-radius: var(--radius-pill);
      border: 2px solid var(--border-visible);
      transition: all var(--duration-fast) var(--ease-standard);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-left: var(--s-4);
    }
    
    .answer-option.selected .option-check {
      background: var(--or-signature);
      border-color: var(--or-signature);
    }
    
    .check-icon {
      width: 14px;
      height: 14px;
      stroke: var(--blanc-surface);
      stroke-width: 3;
      display: none;
    }
    
    .answer-option.selected .check-icon {
      display: block;
    }
    
    /* ============================================
       NAVIGATION FOOTER
       ============================================ */
    .nav-footer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--blanc-surface);
      padding: var(--s-4) var(--s-6);
      box-shadow: 0 -2px 8px rgba(10,10,10,0.08);
      display: flex;
      justify-content: space-between;
      gap: var(--s-4);
      z-index: 999;
    }
    
    .nav-footer .btn {
      flex: 1;
      max-width: 200px;
    }
    
    /* ============================================
       RÉSULTATS
       ============================================ */
    .results-header {
      text-align: center;
      margin-bottom: var(--s-12);
    }
    
    .score-circle-container {
      display: flex;
      justify-content: center;
      margin: var(--s-8) 0;
    }
    
    .result-band {
      text-align: center;
      padding: var(--s-6);
      border-radius: var(--radius-lg);
      margin-top: var(--s-6);
    }
    
    .result-band h3 {
      font-size: var(--fs-2xl);
      margin-bottom: var(--s-3);
    }
    
    .result-band p {
      font-size: var(--fs-md);
      line-height: var(--lh-relaxed);
    }
    
    .dimension-bars {
      display: flex;
      flex-direction: column;
      gap: var(--s-6);
    }
    
    .dimension-bar-item {
      display: flex;
      align-items: center;
      gap: var(--s-4);
    }
    
    .dimension-bar-label {
      min-width: 140px;
      font-weight: 600;
      font-size: var(--fs-sm);
    }
    
    .dimension-bar-track {
      flex: 1;
      height: 32px;
      background: var(--creme-chaud);
      border-radius: var(--radius-md);
      overflow: hidden;
      position: relative;
    }
    
    .dimension-bar-fill {
      height: 100%;
      transition: width 1s var(--ease-spring);
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: var(--s-3);
    }
    
    .dimension-bar-value {
      font-weight: 700;
      font-size: var(--fs-sm);
      color: var(--blanc-surface);
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }
    
    .export-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--s-4);
      margin-top: var(--s-8);
    }
    
    /* ============================================
       RESPONSIVE
       ============================================ */
    @media (max-width: 768px) {
      :root {
        --fs-3xl: 32px;
        --fs-2xl: 24px;
        --s-12: 32px;
      }
      
      .app-container {
        padding: var(--s-8) var(--s-4);
      }
      
      .methodology-grid,
      .dimensions-grid {
        grid-template-columns: 1fr;
      }
      
      .question-container {
        margin-top: 90px;
      }
      
      .nav-footer {
        flex-direction: column;
      }
      
      .nav-footer .btn {
        max-width: 100%;
      }
      
      .export-actions {
        grid-template-columns: 1fr;
      }
    }

    /* ========================================
    .container {
        max-width: 1300px;
        margin: 0 auto;
        padding: 0 40px;
    }

       NAVIGATION NOESIS
       ======================================== */
    nav {
        position: sticky;
        top: 0;
        background: var(--creme-principal);
        backdrop-filter: blur(20px) saturate(180%);
        border-bottom: 1px solid rgba(10, 10, 10, 0.08);
        padding: 20px 0;
        z-index: 2000;
        box-shadow: 0 1px 4px rgba(10, 10, 10, 0.08);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    nav.scrolled {
        padding: 14px 0;
        background: var(--creme-principal);
        border-bottom: 1px solid rgba(10, 10, 10, 0.12);
        box-shadow: 0 2px 12px rgba(10, 10, 10, 0.12);
    }

    nav .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
    }

    .logo {
        font-family: 'Cormorant Garamond', serif;
        font-size: 28px;
        font-weight: 700;
        letter-spacing: 0.25em;
        text-transform: uppercase;
        color: var(--noir-absolu);
        text-decoration: none;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        font-variant: small-caps;
        position: relative;
        display: flex;
        align-items: center;
    }

    nav.scrolled .logo {
        font-size: 24px;
    }

    .logo-text {
        position: relative;
    }

    .logo-text::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 1px;
        bottom: -4px;
        left: 0;
        background: linear-gradient(90deg,
            transparent 0%,
            var(--or-signature) 50%,
            transparent 100%);
        opacity: 0;
        transition: opacity 0.4s ease;
    }

    .logo:hover {
        color: var(--or-riche);
        letter-spacing: 0.28em;
    }

    .logo:hover .logo-text::before {
        opacity: 1;
    }

    nav ul {
        display: flex;
        gap: 2px;
        list-style: none;
        align-items: center;
        background-color: var(--blanc-surface);
        border: 1px solid rgba(10, 10, 10, 0.12);
        border-radius: 50px;
        padding: 6px;
        box-shadow: 0 1px 3px rgba(10, 10, 10, 0.08);
    }

    nav li {
        position: relative;
    }

    nav a:not(.logo) {
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 600;
        color: var(--text-primary);
        text-decoration: none;
        position: relative;
        padding: 10px 18px;
        border-radius: 40px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: inline-block;
        letter-spacing: 0.02em;
        white-space: nowrap;
    }

    nav a:not(.logo)::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 40px;
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
    }

    nav a:not(.logo):hover {
        color: var(--noir-absolu);
        transform: translateY(-1px);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.3),
            0 2px 4px rgba(199, 168, 109, 0.2);
    }

    nav a:not(.logo):hover::before {
        opacity: 1;
    }

    nav a:not(.logo).active {
        color: var(--noir-absolu);
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.35),
            0 2px 4px rgba(199, 168, 109, 0.25);
    }

    /* Boutons sociaux dans nav */
    .nav-social {
        display: flex;
        align-items: center;
        gap: 4px;
        margin-left: 16px;
        padding-left: 16px;
        border-left: 1px solid rgba(10, 10, 10, 0.12);
    }

    .nav-social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: transparent;
        color: var(--text-primary);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
        position: relative;
    }

    .nav-social-link svg {
        width: 20px;
        height: 20px;
        stroke-width: 1.5;
    }

    .nav-social-link::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 50%;
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
    }

    .nav-social-link:hover {
        color: var(--noir-absolu);
        transform: translateY(-1px);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.3),
            0 2px 4px rgba(199, 168, 109, 0.2);
    }

    .nav-social-link:hover::before {
        opacity: 1;
    }

    /* ============================================
       MENU HAMBURGER MOBILE
       ============================================ */
    .menu-toggle {
        display: none;
        flex-direction: column;
        gap: 6px;
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 8px;
        z-index: 2002;
        position: relative;
        transition: all 0.3s ease;
    }

    .menu-toggle span {
        width: 28px;
        height: 2px;
        background: var(--or-signature);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 2px;
    }

    .menu-toggle.active span:nth-child(1) {
        transform: rotate(45deg) translate(8px, 8px);
    }

    .menu-toggle.active span:nth-child(2) {
        opacity: 0;
    }

    .menu-toggle.active span:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -7px);
    }

    /* Responsive Navigation */
    @media (max-width: 1024px) {
        nav .container {
            padding: 0 24px;
            position: relative;
        }

        .menu-toggle {
            display: flex;
            position: relative;
            z-index: 2002;
        }

        nav ul {
            position: fixed;
            top: 0;
            right: -100%;
            height: 100vh;
            width: 320px;
            max-width: 85vw;
            flex-direction: column;
            background: linear-gradient(180deg,
                var(--noir-absolu) 0%,
                var(--noir-surface) 100%);
            padding: 100px 32px 40px;
            gap: 0;
            border-radius: 0;
            border: none;
            border-left: 1px solid rgba(199, 168, 109, 0.2);
            box-shadow:
                -4px 0 24px rgba(0, 0, 0, 0.8),
                -8px 0 48px rgba(0, 0, 0, 0.5);
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
        }

        nav ul.active {
            right: 0;
        }

        nav li {
            width: 100%;
            margin-bottom: 12px;
        }

        nav a:not(.logo) {
            display: block;
            width: 100%;
            padding: 16px 20px;
            font-size: 15px;
            text-align: left;
            touch-action: manipulation;
            border-radius: 8px;
        }

        .nav-social {
            margin-left: 0;
            padding-left: 0;
            padding-top: 24px;
            margin-top: 24px;
            border-left: none;
            border-top: 1px solid rgba(199, 168, 109, 0.2);
            justify-content: flex-start;
            gap: 12px;
        }

        .nav-social-link {
            width: 42px;
            height: 42px;
        }

        .nav-social-link svg {
            width: 20px;
            height: 20px;
        }

        /* Overlay pour fermer le menu */
        .menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(4px);
            z-index: 1999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .menu-overlay.active {
            display: block;
            opacity: 1;
        }
    }

    @media (max-width: 768px) {
        nav {
            padding: 16px 0;
        }

        nav.scrolled {
            padding: 12px 0;
        }

        .logo {
            font-size: 22px;
        }

        nav.scrolled .logo {
            font-size: 20px;
        }

        nav ul {
            width: 280px;
            padding: 80px 24px 32px;
        }
    }
  </style>
</head>
<body>
  <nav id="navbar">
    <div class="container">
      <a href="../index.html#accueil" class="logo">
        <span class="logo-text">NOESIS</span>
      </a>

      <!-- Bouton hamburger mobile -->
      <button class="menu-toggle" id="menuToggle" aria-label="Menu de navigation">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <ul id="navMenu">
        <li><a href="../index.html#accueil">Accueil</a></li>
        <li><a href="../index.html#methode">La Méthode</a></li>
        <li><a href="../index.html#decouvrir">Découvrir</a></li>
        <li><a href="../Articles/articles-index.html">Articles</a></li>
        <li><a href="../autotests/autotests.html" class="active">Auto-tests</a></li>
        <li><a href="../Podcasts/podcast.html">Podcasts</a></li>
        <li><a href="../Livres/livres.html">Livres</a></li>
        <li><a href="../Accompagnement/accompagnement.html">Accompagnement</a></li>
        <li><a href="../index.html#engagement">Engagement</a></li>
        <li class="nav-social">
          <a href="https://www.instagram.com/noesis_analyse" target="_blank" rel="noopener noreferrer" class="nav-social-link" aria-label="Instagram NOESIS">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
              <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
              <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
            </svg>
          </a>
          <a href="https://www.linkedin.com/in/noesisanalyse" target="_blank" rel="noopener noreferrer" class="nav-social-link" aria-label="LinkedIn NOESIS">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
              <rect x="2" y="9" width="4" height="12"/>
              <circle cx="4" cy="4" r="2"/>
            </svg>
          </a>
          <a href="/cdn-cgi/l/email-protection#4c25232922342e2432293d233f0c2b212d2520622f2321" class="nav-social-link" aria-label="Email NOESIS">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
              <polyline points="22,6 12,13 2,6"/>
            </svg>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Overlay menu mobile -->
  <div class="menu-overlay" id="menuOverlay"></div>

<div class="app-container">
    
    <!-- ============================================
         ÉCRAN 1 : INTRODUCTION
         ============================================ -->
    <div id="intro-screen" class="screen active">
      
      <!-- En-tête -->
      <div class="intro-header">
        <div class="intro-icon-container">
          <svg class="intro-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            <line x1="2" y1="2" x2="22" y2="22"/>
          </svg>
        </div>
        <h1 class="intro-title">Vampires Énergétiques</h1>
        <p class="intro-subtitle">
          Typologie Relationnelle — Identification des patterns d'extraction émotionnelle chronique et asymétrie systémique
        </p>
      </div>
      
      <!-- Avertissement -->
      <div class="warning-box">
        <h3>
          <svg class="warning-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          Avertissement Important
        </h3>
        <p>
          Cet outil constitue un <strong>questionnaire de sensibilisation</strong> et ne remplace en aucun cas une consultation avec un professionnel de santé qualifié (psychologue, psychiatre, thérapeute).
        </p>
        <p>
          Les résultats reflètent votre <strong>perception subjective</strong> à un instant donné et nécessitent une interprétation contextuelle par un clinicien. <strong>Aucune donnée n'est collectée, stockée ou transmise.</strong> Toutes les informations restent locales dans votre navigateur.
        </p>
        <div class="emergency-resources">
          <strong>Ressources d'urgence :</strong> 3919 (Violences Femmes Info, 24/7) • 119 (Enfance en Danger) • 3114 (Prévention Suicide)
        </div>
      </div>
      
      <!-- Méthodologie -->
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
            <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
            <line x1="12" y1="22.08" x2="12" y2="12"/>
          </svg>
          Méthodologie
        </h2>
        <div class="methodology-grid">
          <div class="methodology-item">
            <svg class="methodology-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <line x1="9" y1="9" x2="15" y2="9"/>
              <line x1="9" y1="15" x2="15" y2="15"/>
            </svg>
            <div class="methodology-item-title">40 Questions</div>
            <div class="methodology-item-subtitle">Évaluation complète approfondie</div>
          </div>
          <div class="methodology-item">
            <svg class="methodology-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            <div class="methodology-item-title">8-10 Minutes</div>
            <div class="methodology-item-subtitle">Temps estimé de passation</div>
          </div>
          <div class="methodology-item">
            <svg class="methodology-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
            <div class="methodology-item-title">6 Derniers Mois</div>
            <div class="methodology-item-subtitle">Période de référence</div>
          </div>
          <div class="methodology-item">
            <svg class="methodology-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="5" y="2" width="14" height="20" rx="2" ry="2"/>
              <line x1="12" y1="18" x2="12.01" y2="18"/>
            </svg>
            <div class="methodology-item-title">100% Anonyme</div>
            <div class="methodology-item-subtitle">Données strictement confidentielles</div>
          </div>
          <div class="methodology-item full-width">
            <svg class="methodology-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            <div class="methodology-item-title">Export PDF</div>
            <div class="methodology-item-subtitle">Rapport détaillé professionnel à télécharger</div>
          </div>
        </div>
        <div class="methodology-validity">
          <strong>Cadre théorique :</strong> Théorie de l'échange social (Thibaut & Kelley, 1959), asymétrie relationnelle chronique (Felmlee, 1994), épuisement compassionnel (Figley, 1995), dynamiques narcissiques et extraction émotionnelle (Kernberg, 1975).
          <br><br>
          <strong>Validité :</strong> Outil de sensibilisation non validé psychométriquement. Ne constitue pas un instrument diagnostique. Les résultats doivent être interprétés par un professionnel qualifié.
        </div>
      </div>
      
      <!-- Dimensions Évaluées -->
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="7" height="7"/>
            <rect x="14" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/>
            <rect x="3" y="14" width="7" height="7"/>
          </svg>
          Dimensions Évaluées
        </h2>
        <p style="margin-bottom: 24px;">
          Ce questionnaire évalue six dimensions psychosociales des relations asymétriques et épuisantes, identifiées dans la recherche contemporaine sur les dynamiques relationnelles toxiques.
        </p>
        <div class="dimensions-grid">
          <div class="dimension-card epuisement">
            <div class="dimension-number">01</div>
            <div class="dimension-title">Épuisement Émotionnel</div>
            <div class="dimension-description">
              Fatigue chronique, symptômes physiques, drainage énergétique systématique après interactions.
            </div>
          </div>
          <div class="dimension-card tactique">
            <div class="dimension-number">02</div>
            <div class="dimension-title">Tactiques Manipulatives</div>
            <div class="dimension-description">
              Monopolisation, dramatisation, création de dettes morales, minimisation des besoins légitimes.
            </div>
          </div>
          <div class="dimension-card cognitif">
            <div class="dimension-number">03</div>
            <div class="dimension-title">Envahissement Cognitif</div>
            <div class="dimension-description">
              Ruminations, hypervigilance, difficultés concentration, auto-censure préventive.
            </div>
          </div>
          <div class="dimension-card frontiere">
            <div class="dimension-number">04</div>
            <div class="dimension-title">Transgression Frontières</div>
            <div class="dimension-description">
              Limites ignorées, sanctions émotionnelles, asymétrie du don, responsabilité émotionnelle déplacée.
            </div>
          </div>
          <div class="dimension-card social">
            <div class="dimension-number">05</div>
            <div class="dimension-title">Impact Social & Fonctionnel</div>
            <div class="dimension-description">
              Altération performance, isolement progressif, multi-canal invasif, dissimulation par honte.
            </div>
          </div>
          <div class="dimension-card reversibilite">
            <div class="dimension-number">06</div>
            <div class="dimension-title">Réversibilité Dynamique</div>
            <div class="dimension-description">
              Capacité de récupération, efficacité des frontières, reconnaissance des excès, durabilité des améliorations.
            </div>
          </div>
        </div>
      </div>
      
      <!-- Comment ça marche -->
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
          Comment ça marche
        </h2>
        <p>
          <strong>Échelle de réponse (0-4) :</strong> Chaque item est évalué selon la fréquence à laquelle vous ressentez la situation décrite dans votre contexte professionnel actuel : 0 (Jamais), 1 (Rarement), 2 (Parfois), 3 (Souvent), 4 (Quasi-systématiquement).
        </p>
        <p>
          <strong>Calcul des scores :</strong> Score par dimension (0-32 points, 8 items × 0-4) + Score total (0-160 points, somme des 5 dimensions) + IIF — Impact Fonctionnel Immédiat (0-20 points, 5 items critiques prioritaires de la dimension Impact).
        </p>
        <p>
          <strong>Interprétation :</strong> Plus le score est élevé, plus la perte de sens est marquée. Les résultats sont fournis par dimension et globalement, avec des recommandations personnalisées selon votre profil. Un score élevé indique un besoin d'attention et potentiellement d'accompagnement professionnel.
        </p>
      </div>
      
      <!-- Informations Préliminaires -->
      <div class="card">
        <h2>
          <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="8.5" cy="7" r="4"/>
            <line x1="20" y1="8" x2="20" y2="14"/>
            <line x1="23" y1="11" x2="17" y1="11"/>
          </svg>
          Informations Préliminaires (Optionnel)
        </h2>
        <div class="form-group">
          <label for="relation-type" class="form-label">Type de relation concernée</label>
          <select id="relation-type" class="form-select">
            <option value="">Sélectionner...</option>
            <option value="romantic">Relation amoureuse / Couple</option>
            <option value="family">Relation familiale (parent, fratrie...)</option>
            <option value="friend">Relation amicale</option>
            <option value="professional">Relation professionnelle (collègue, hiérarchie...)</option>
            <option value="other">Autre</option>
          </select>
        </div>
        <div class="form-group">
          <label for="relation-duration" class="form-label">Durée approximative de la relation</label>
          <select id="relation-duration" class="form-select">
            <option value="">Sélectionner...</option>
            <option value="<6m">Moins de 6 mois</option>
            <option value="6m-1y">6 mois à 1 an</option>
            <option value="1-2y">1 à 2 ans</option>
            <option value="2-5y">2 à 5 ans</option>
            <option value=">5y">Plus de 5 ans</option>
          </select>
        </div>
        <div class="form-group">
          <label for="participant-name" class="form-label">Nom ou pseudonyme (apparaîtra sur le PDF)</label>
          <input type="text" id="participant-name" class="form-input" placeholder="Anonyme" value="Anonyme">
        </div>
      </div>
      
      <!-- Consentement -->
      <div class="consent-container">
        <div class="consent-checkbox-wrapper">
          <input type="checkbox" id="consent-checkbox">
          <label for="consent-checkbox">
            J'ai lu et compris les avertissements. Je confirme que cet outil est utilisé à des fins informatives uniquement et qu'il ne remplace pas une consultation avec un professionnel de santé qualifié. Je comprends que toutes mes données restent locales et ne sont transmises à aucun serveur.
          </label>
        </div>
      </div>
      
      <button class="btn btn-primary btn-large" id="start-btn" disabled>
        Commencer l'Évaluation
      </button>
      
    </div>
    
    <!-- ============================================
         ÉCRAN 2 : QUESTIONNAIRE
         ============================================ -->
    <div id="test-screen" class="screen">
      <div class="progress-container">
        <div class="progress-info">
          <span id="progress-text">Question 1 / 40</span>
          <span id="questions-remaining">40 questions restantes</span>
        </div>
        <div class="progress-bar-container">
          <div class="progress-bar-fill" id="progress-fill" style="width: 0%"></div>
        </div>
      </div>
      
      <div class="question-container" id="question-container"></div>
      
      <div class="nav-footer" style="display: none;">
        <button class="btn btn-secondary" id="prev-btn">← Précédent</button>
        <button class="btn btn-primary" id="next-btn" disabled>Suivant →</button>
      </div>
    </div>
    
    <!-- ============================================
         ÉCRAN 3 : RÉSULTATS
         ============================================ -->
    <div id="results-screen" class="screen">
      <div class="results-header">
        <h1>Vos Résultats</h1>
        <p style="font-size: 14px; color: rgba(10,10,10,0.6); margin-top: 8px;" id="results-date"></p>
      </div>
      
      <div class="card">
        <h2>Score Global</h2>
        <div class="score-circle-container" id="score-circle"></div>
        <div id="result-band"></div>
      </div>
      
      <div class="card">
        <h2>Analyse par Dimension</h2>
        <div class="dimension-bars" id="dimension-bars"></div>
      </div>
      
      <div class="card">
        <h2>Profil Contextuel</h2>
        <div id="profile-summary"></div>
      </div>
      
      <div class="card">
        <h2>Recommandations Personnalisées</h2>
        <div id="recommendations"></div>
      </div>
      
      <div class="card" style="background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);">
        <h2>Ressources & Soutien</h2>
        <ul>
          <li><strong>3919</strong> — Violences Femmes Info (24/7, gratuit)</li>
          <li><strong>119</strong> — Allô Enfance en Danger (gratuit)</li>
          <li><strong>3114</strong> — Prévention Suicide (24/7, gratuit)</li>
          <li><strong>SOS Femmes</strong> — 01 40 47 06 06</li>
          <li><strong>CIDFF</strong> — Centre d'Information sur les Droits des Femmes et des Familles (<a href="https://www.cidff.info" target="_blank" style="color: var(--or-signature);">cidff.info</a>)</li>
          <li><strong>Psycom</strong> — Information santé mentale (<a href="https://www.psycom.org" target="_blank" style="color: var(--or-signature);">psycom.org</a>)</li>
        </ul>
      </div>
      
      <div class="export-actions">
        <button class="btn btn-primary" id="pdf-btn">📄 Télécharger PDF</button>
        <button class="btn btn-secondary" id="email-btn">✉️ Envoyer Email</button>
        <button class="btn btn-secondary" id="json-btn">📊 Export JSON</button>
        <button class="btn btn-secondary" id="reset-btn">🔄 Recommencer</button>
      </div>
    </div>
    
  </div>
  
  <script>
    // ============================================
    // CONFIGURATION
    // ============================================
    const SCALE = [
      {v:0, l:"Jamais", s:"Absent ou très rare (<5%)"},
      {v:1, l:"Rarement", s:"Occasionnel (5-25%)"},
      {v:2, l:"Parfois", s:"Régulier (25-50%)"},
      {v:3, l:"Souvent", s:"Fréquent (50-75%)"},
      {v:4, l:"Quasi-systématiquement", s:"Permanent (>75%)"}
    ];
    
    const DIMENSIONS = [
      {k:'epuisement', l:'Épuisement', fullLabel:'Épuisement Émotionnel', c:'#dc2626'},
      {k:'tactique', l:'Tactiques', fullLabel:'Tactiques Manipulatives', c:'#ea580c'},
      {k:'cognitif', l:'Cognitif', fullLabel:'Envahissement Cognitif', c:'#7c3aed'},
      {k:'frontiere', l:'Frontières', fullLabel:'Transgression Frontières', c:'#2563eb'},
      {k:'social', l:'Social', fullLabel:'Impact Social & Fonctionnel', c:'#059669'},
      {k:'reversibilite', l:'Réversibilité', fullLabel:'Réversibilité Dynamique', c:'#10b981'}
    ];
    
    const QUESTIONS = [
      // Épuisement (7)
      {id:'q1', dim:'epuisement', text:"Je me sens particulièrement fatigué·e après avoir interagi avec cette personne."},
      {id:'q2', dim:'epuisement', text:"J'ai besoin de m'isoler ou me reposer après nos échanges."},
      {id:'q3', dim:'epuisement', text:"Je ressens du stress ou de l'anxiété avant ses appels/messages."},
      {id:'q4', dim:'epuisement', text:"J'ai des symptômes physiques après nos interactions (maux de tête, tension...)."},
      {id:'q5', dim:'epuisement', text:"Mon énergie varie nettement selon sa présence ou absence."},
      {id:'q6', dim:'epuisement', text:"Je me réveille la nuit en pensant à cette relation."},
      {id:'q7', dim:'epuisement', text:"Mes autres activités sont affectées par la fatigue liée à cette relation."},
      
      // Tactiques (8)
      {id:'q8', dim:'tactique', text:"Elle monopolise mon temps de manière disproportionnée."},
      {id:'q9', dim:'tactique', text:"Elle impose ses sujets sans s'intéresser aux miens."},
      {id:'q10', dim:'tactique', text:"Elle dramatise pour obtenir une réponse prioritaire."},
      {id:'q11', dim:'tactique', text:"Elle crée des 'dettes morales' : je me sens redevable."},
      {id:'q12', dim:'tactique', text:"Elle requalifie mes refus comme des attaques."},
      {id:'q13', dim:'tactique', text:"Elle minimise ou dénigre mes besoins."},
      {id:'q14', dim:'tactique', text:"Elle demande des choses qui dépassent mes capacités réelles."},
      {id:'q15', dim:'tactique', text:"La personne reconnaît ses torts et cherche à équilibrer la relation.", reverse:true},
      
      // Cognitif (7)
      {id:'q16', dim:'cognitif', text:"Je rumine longuement après nos échanges."},
      {id:'q17', dim:'cognitif', text:"Je suis en hypervigilance : j'anticipe ses réactions."},
      {id:'q18', dim:'cognitif', text:"J'ai des difficultés de concentration accrues."},
      {id:'q19', dim:'cognitif', text:"Je me censure pour éviter ses réactions."},
      {id:'q20', dim:'cognitif', text:"Je doute de ma perception après qu'elle l'ait contestée."},
      {id:'q21', dim:'cognitif', text:"J'ai perdu de l'intérêt pour mes projets personnels."},
      {id:'q22', dim:'cognitif', text:"Je me sens clairement mieux quand la relation est en pause.", reverse:true},
      
      // Frontières (8)
      {id:'q23', dim:'frontiere', text:"Mes limites sont testées puis ignorées."},
      {id:'q24', dim:'frontiere', text:"Quand je dis non, elle réagit par sanction émotionnelle."},
      {id:'q25', dim:'frontiere', text:"Je donne systématiquement plus que je reçois."},
      {id:'q26', dim:'frontiere', text:"Je m'excuse d'exister quand j'exprime un besoin."},
      {id:'q27', dim:'frontiere', text:"Je cache mon état pour ne pas la contrarier."},
      {id:'q28', dim:'frontiere', text:"Je me sens responsable de son bien-être émotionnel."},
      {id:'q29', dim:'frontiere', text:"Je consens à ses demandes pour éviter un conflit.", critical:true},
      {id:'q30', dim:'frontiere', text:"Mes limites claires sont respectées durablement.", reverse:true},
      
      // Social (6)
      {id:'q31', dim:'social', text:"Mon entourage dit que je parais épuisé·e ou changé·e."},
      {id:'q32', dim:'social', text:"Mes tâches pro/études sont retardées par ses sollicitations."},
      {id:'q33', dim:'social', text:"Elle me contacte sur plusieurs canaux en parallèle."},
      {id:'q34', dim:'social', text:"Elle contourne mes créneaux ou contacte mon entourage.", critical:true},
      {id:'q35', dim:'social', text:"Elle tente d'isoler mes autres relations de soutien.", critical:true},
      {id:'q36', dim:'social', text:"Je cache la situation par honte ou peur du jugement."},
      
      // Réversibilité (4)
      {id:'q37', dim:'reversibilite', text:"Mon énergie remonte quand je réduis le contact.", reverse:true},
      {id:'q38', dim:'reversibilite', text:"Des règles claires améliorent la relation.", reverse:true},
      {id:'q39', dim:'reversibilite', text:"Elle reconnaît ses excès et modifie son comportement.", reverse:true},
      {id:'q40', dim:'reversibilite', text:"Les améliorations tiennent rarement plus de quelques semaines."}
    ];
    
    const BANDS = [
      {min:0, max:35, level:"Relation Fonctionnelle", color:"#10b981", text:"Pas de pattern toxique majeur. Ajustements ponctuels possibles."},
      {min:36, max:70, level:"Fatigue Modérée", color:"#f59e0b", text:"Épuisement notable. Limites plus claires recommandées. Consulter si résistance durable."},
      {min:71, max:110, level:"Pattern Épuisant Établi", color:"#ea580c", text:"Toxicité significative. Bien-être affecté. Réduire exposition + consultation psychologique recommandée."},
      {min:111, max:200, level:"Dérive d'Emprise Probable", color:"#dc2626", text:"⚠️ Dynamique potentiellement coercitive. PRIORITÉ : protection, distance, soutien spécialisé immédiat."}
    ];
    
    // ============================================
    // STATE
    // ============================================
    const state = {
      screen: 'intro',
      qIdx: 0,
      answers: {},
      anamnesis: {
        type: null,
        dur: null,
        name: 'Anonyme'
      }
    };
    
    // ============================================
    // INITIALISATION
    // ============================================
    document.addEventListener('DOMContentLoaded', () => {
      const consent = document.getElementById('consent-checkbox');
      const relType = document.getElementById('relation-type');
      const startBtn = document.getElementById('start-btn');
      
      function updateStart() {
        startBtn.disabled = !(consent.checked && relType.value);
      }
      
      consent.addEventListener('change', updateStart);
      relType.addEventListener('change', updateStart);
      
      startBtn.addEventListener('click', () => {
        state.anamnesis.type = document.getElementById('relation-type').value;
        state.anamnesis.dur = document.getElementById('relation-duration').value;
        state.anamnesis.name = document.getElementById('participant-name').value || 'Anonyme';
        showScreen('test');
        renderQuestion();
      });
    });
    
    // ============================================
    // NAVIGATION
    // ============================================
    function showScreen(screenName) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(`${screenName}-screen`).classList.add('active');
      state.screen = screenName;
      window.scrollTo({top: 0, behavior: 'smooth'});
    }
    
    // ============================================
    // QUESTIONNAIRE
    // ============================================
    function renderQuestion() {
      const q = QUESTIONS[state.qIdx];
      const dim = DIMENSIONS.find(d => d.k === q.dim);
      const progress = ((state.qIdx + 1) / QUESTIONS.length) * 100;
      
      document.getElementById('progress-text').textContent = `Question ${state.qIdx + 1} / ${QUESTIONS.length}`;
      document.getElementById('questions-remaining').textContent = `${QUESTIONS.length - state.qIdx} questions restantes`;
      document.getElementById('progress-fill').style.width = `${progress}%`;
      
      const container = document.getElementById('question-container');
      container.innerHTML = `
        <div class="question-card">
          <div class="question-header">
            <div class="question-number">Question ${state.qIdx + 1}</div>
            <div class="dimension-badge ${q.dim}">${dim.l}</div>
          </div>
          <div class="question-text">${q.text}</div>
          <div class="answer-options" id="answer-options"></div>
        </div>
      `;
      
      const optionsContainer = document.getElementById('answer-options');
      SCALE.forEach(option => {
        const optDiv = document.createElement('div');
        optDiv.className = 'answer-option';
        if (state.answers[q.id] === option.v) {
          optDiv.classList.add('selected');
        }
        optDiv.innerHTML = `
          <div class="option-content">
            <div class="option-label">${option.l}</div>
            <div class="option-sublabel">${option.s}</div>
          </div>
          <div class="option-check">
            <svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"/>
            </svg>
          </div>
        `;
        optDiv.onclick = () => selectAnswer(q.id, option.v);
        optionsContainer.appendChild(optDiv);
      });
      
      // Update nav footer
      document.querySelector('.nav-footer').style.display = 'flex';
      document.getElementById('prev-btn').style.visibility = state.qIdx > 0 ? 'visible' : 'hidden';
      updateNextButton();
    }
    
    function selectAnswer(qId, value) {
      state.answers[qId] = value;
      
      // Visual feedback
      document.querySelectorAll('.answer-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      event.currentTarget.classList.add('selected');
      
      // Auto-advance immediately
      updateNextButton();
      setTimeout(() => {
        if (state.qIdx < QUESTIONS.length - 1) {
          nextQuestion();
        } else {
          showResults();
        }
      }, 0);
    }
    
    function updateNextButton() {
      const nextBtn = document.getElementById('next-btn');
      const currentQ = QUESTIONS[state.qIdx];
      const hasAnswer = state.answers[currentQ.id] !== undefined;
      nextBtn.disabled = !hasAnswer;
      if (state.qIdx === QUESTIONS.length - 1) {
        nextBtn.textContent = 'Voir mes Résultats →';
      } else {
        nextBtn.textContent = 'Suivant →';
      }
    }
    
    function nextQuestion() {
      if (state.qIdx < QUESTIONS.length - 1) {
        state.qIdx++;
        renderQuestion();
      } else {
        showResults();
      }
    }
    
    function prevQuestion() {
      if (state.qIdx > 0) {
        state.qIdx--;
        renderQuestion();
      }
    }
    
    document.getElementById('prev-btn').addEventListener('click', prevQuestion);
    document.getElementById('next-btn').addEventListener('click', () => {
      if (state.qIdx < QUESTIONS.length - 1) {
        nextQuestion();
      } else {
        showResults();
      }
    });
    
    // ============================================
    // CALCUL RÉSULTATS
    // ============================================
    function calculateScores() {
      const dimScores = {};
      let totalScore = 0;
      let maxTotal = 0;
      
      DIMENSIONS.forEach(dim => {
        dimScores[dim.k] = {score: 0, max: 0, percentage: 0, label: dim.fullLabel, color: dim.c};
      });
      
      QUESTIONS.forEach(q => {
        const answer = state.answers[q.id];
        if (answer !== undefined) {
          const value = q.reverse ? (4 - answer) : answer;
          totalScore += value;
          maxTotal += 4;
          dimScores[q.dim].score += value;
          dimScores[q.dim].max += 4;
        }
      });
      
      Object.keys(dimScores).forEach(k => {
        dimScores[k].percentage = Math.round((dimScores[k].score / dimScores[k].max) * 100);
      });
      
      const percentage = Math.round((totalScore / maxTotal) * 100);
      const band = BANDS.find(b => totalScore >= b.min && totalScore <= b.max);
      
      return {
        total: totalScore,
        maxTotal,
        percentage,
        dimensions: dimScores,
        band
      };
    }
    
    // ============================================
    // AFFICHAGE RÉSULTATS
    // ============================================
    function showResults() {
      const scores = calculateScores();
      showScreen('results');
      
      // Date
      const now = new Date();
      document.getElementById('results-date').textContent = `Généré le ${now.toLocaleDateString('fr-FR', {weekday:'long', year:'numeric', month:'long', day:'numeric'})}`;
      
      // Score Circle
      document.getElementById('score-circle').innerHTML = createScoreCircle(scores.total, scores.maxTotal);
      
      // Result Band
      document.getElementById('result-band').innerHTML = `
        <div class="result-band" style="background: ${scores.band.color}15; border-left: 4px solid ${scores.band.color};">
          <h3 style="color: ${scores.band.color};">${scores.band.level}</h3>
          <p>${scores.band.text}</p>
        </div>
      `;
      
      // Dimension Bars
      const dimBarsHtml = Object.entries(scores.dimensions)
        .sort((a,b) => b[1].percentage - a[1].percentage)
        .map(([key, data]) => `
          <div class="dimension-bar-item">
            <div class="dimension-bar-label">${data.label}</div>
            <div class="dimension-bar-track">
              <div class="dimension-bar-fill" style="width: ${data.percentage}%; background: ${data.color};">
                <span class="dimension-bar-value">${data.percentage}%</span>
              </div>
            </div>
          </div>
        `).join('');
      document.getElementById('dimension-bars').innerHTML = dimBarsHtml;
      
      // Profile Summary
      const typeLabels = {
        romantic: "Relation amoureuse / Couple",
        family: "Relation familiale",
        friend: "Relation amicale",
        professional: "Relation professionnelle",
        other: "Autre"
      };
      const durLabels = {
        '<6m': "Moins de 6 mois",
        '6m-1y': "6 mois à 1 an",
        '1-2y': "1 à 2 ans",
        '2-5y': "2 à 5 ans",
        '>5y': "Plus de 5 ans"
      };
      document.getElementById('profile-summary').innerHTML = `
        <p><strong>Type de relation :</strong> ${typeLabels[state.anamnesis.type] || 'Non spécifié'}</p>
        <p><strong>Durée :</strong> ${durLabels[state.anamnesis.dur] || 'Non spécifiée'}</p>
        <p><strong>Score global :</strong> ${scores.total}/${scores.maxTotal} (${scores.percentage}%)</p>
      `;
      
      // Recommendations
      const recs = generateRecommendations(scores);
      document.getElementById('recommendations').innerHTML = `<ol>${recs.map(r => `<li>${r}</li>`).join('')}</ol>`;
      
      // Export Buttons
      document.getElementById('pdf-btn').onclick = () => generatePDF(scores);
      document.getElementById('email-btn').onclick = () => generateEmail(scores);
      document.getElementById('json-btn').onclick = () => exportJSON(scores);
      document.getElementById('reset-btn').onclick = () => location.reload();
    }
    
    function createScoreCircle(score, max) {
      const percentage = Math.round((score / max) * 100);
      const radius = 100;
      const circumference = 2 * Math.PI * radius;
      const offset = circumference - (percentage / 100) * circumference;
      
      return `
        <svg width="260" height="260" style="transform: rotate(-90deg);">
          <circle cx="130" cy="130" r="${radius}" fill="none" stroke="#F7F5EF" stroke-width="16"/>
          <circle cx="130" cy="130" r="${radius}" fill="none" stroke="#C7A86D" stroke-width="16" 
                  stroke-dasharray="${circumference}" stroke-dashoffset="${offset}"
                  stroke-linecap="round" style="transition: stroke-dashoffset 1s cubic-bezier(0.16, 1, 0.3, 1);"/>
          <text x="130" y="115" text-anchor="middle" font-family="Fraunces, serif" font-size="48" font-weight="700" fill="#0A0A0A" transform="rotate(90 130 130)">${score}</text>
          <text x="130" y="145" text-anchor="middle" font-family="Inter, sans-serif" font-size="16" fill="rgba(10,10,10,0.6)" transform="rotate(90 130 130)">sur ${max}</text>
          <text x="130" y="165" text-anchor="middle" font-family="Inter, sans-serif" font-size="20" font-weight="600" fill="#C7A86D" transform="rotate(90 130 130)">${percentage}%</text>
        </svg>
      `;
    }
    
    function generateRecommendations(scores) {
      const recs = [];
      const pct = scores.percentage;
      
      if (pct >= 70) {
        recs.push("<strong>PRIORITÉ URGENTE :</strong> Consultation avec un psychologue spécialisé en trauma relationnel recommandée immédiatement.");
        recs.push("Réduire drastiquement les interactions avec cette personne. Envisager une distanciation temporaire ou permanente.");
        recs.push("Solliciter votre réseau de soutien (proches de confiance, associations spécialisées).");
      } else if (pct >= 45) {
        recs.push("Consultation psychologique recommandée pour évaluer l'impact et développer des stratégies de protection.");
        recs.push("Établir des frontières claires et explicites. Réduire la disponibilité émotionnelle et temporelle.");
        recs.push("Documenter les patterns toxiques observés pour clarifier la situation.");
      } else {
        recs.push("Rester vigilant·e sur l'évolution de la dynamique relationnelle.");
        recs.push("Renforcer les limites personnelles dès les premiers signes d'inconfort.");
        recs.push("Consulter si la situation évolue négativement ou si l'épuisement persiste.");
      }
      
      // Dimension-specific
      const highDims = Object.entries(scores.dimensions)
        .filter(([k,v]) => v.percentage >= 60)
        .sort((a,b) => b[1].percentage - a[1].percentage);
      
      if (highDims.length > 0) {
        recs.push(`<strong>Dimension prédominante :</strong> ${highDims[0][1].label} (${highDims[0][1].percentage}%). Focus sur cette dimension en priorité.`);
      }
      
      return recs;
    }
    
    // ============================================
    // EXPORT PDF
    // ============================================
    function generatePDF(scores) {
      const printWindow = window.open('', '', 'width=800,height=600');
      printWindow.document.write(`
        <!DOCTYPE html>
        <html lang="fr">
        <head>
          <meta charset="UTF-8">
          <title>Rapport Vampires Énergétiques — ${state.anamnesis.name} — NOÉSIS</title>
          <style>
            @page { size: A4; margin: 2.5cm; }
            body { font-family: 'Inter', Arial, sans-serif; font-size: 10pt; line-height: 1.5; color: #0A0A0A; }
            h1, h2 { font-family: 'Fraunces', Georgia, serif; page-break-after: avoid; }
            h1 { font-size: 24pt; margin-bottom: 6pt; text-align: center; }
            h2 { font-size: 16pt; margin-top: 16pt; margin-bottom: 8pt; border-bottom: 2px solid #C7A86D; padding-bottom: 4pt; }
            .section { page-break-inside: avoid; margin-bottom: 16pt; }
            .score-box { background: #F7F5EF; padding: 12pt; border-radius: 8pt; text-align: center; margin: 16pt 0; }
            .score-number { font-size: 36pt; font-weight: bold; color: #C7A86D; }
            table { width: 100%; border-collapse: collapse; margin: 12pt 0; }
            td, th { padding: 6pt; text-align: left; border-bottom: 1px solid #ddd; }
            th { background: #F7F5EF; font-weight: 600; }
            .warning { background: #fffbeb; border-left: 4pt solid #C7A86D; padding: 8pt; margin: 12pt 0; }
            .footer { margin-top: 24pt; padding-top: 12pt; border-top: 2px solid #C7A86D; font-size: 8pt; color: #666; text-align: center; }
        
    /* ========================================
    .container {
        max-width: 1300px;
        margin: 0 auto;
        padding: 0 40px;
    }

       NAVIGATION NOESIS
       ======================================== */
    nav {
        position: sticky;
        top: 0;
        background: var(--creme-principal);
        backdrop-filter: blur(20px) saturate(180%);
        border-bottom: 1px solid rgba(10, 10, 10, 0.08);
        padding: 20px 0;
        z-index: 2000;
        box-shadow: 0 1px 4px rgba(10, 10, 10, 0.08);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    nav.scrolled {
        padding: 14px 0;
        background: var(--creme-principal);
        border-bottom: 1px solid rgba(10, 10, 10, 0.12);
        box-shadow: 0 2px 12px rgba(10, 10, 10, 0.12);
    }

    nav .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
    }

    .logo {
        font-family: 'Cormorant Garamond', serif;
        font-size: 28px;
        font-weight: 700;
        letter-spacing: 0.25em;
        text-transform: uppercase;
        color: var(--noir-absolu);
        text-decoration: none;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        font-variant: small-caps;
        position: relative;
        display: flex;
        align-items: center;
    }

    nav.scrolled .logo {
        font-size: 24px;
    }

    .logo-text {
        position: relative;
    }

    .logo-text::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 1px;
        bottom: -4px;
        left: 0;
        background: linear-gradient(90deg,
            transparent 0%,
            var(--or-signature) 50%,
            transparent 100%);
        opacity: 0;
        transition: opacity 0.4s ease;
    }

    .logo:hover {
        color: var(--or-riche);
        letter-spacing: 0.28em;
    }

    .logo:hover .logo-text::before {
        opacity: 1;
    }

    nav ul {
        display: flex;
        gap: 2px;
        list-style: none;
        align-items: center;
        background-color: var(--blanc-surface);
        border: 1px solid rgba(10, 10, 10, 0.12);
        border-radius: 50px;
        padding: 6px;
        box-shadow: 0 1px 3px rgba(10, 10, 10, 0.08);
    }

    nav li {
        position: relative;
    }

    nav a:not(.logo) {
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 600;
        color: var(--text-primary);
        text-decoration: none;
        position: relative;
        padding: 10px 18px;
        border-radius: 40px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: inline-block;
        letter-spacing: 0.02em;
        white-space: nowrap;
    }

    nav a:not(.logo)::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 40px;
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
    }

    nav a:not(.logo):hover {
        color: var(--noir-absolu);
        transform: translateY(-1px);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.3),
            0 2px 4px rgba(199, 168, 109, 0.2);
    }

    nav a:not(.logo):hover::before {
        opacity: 1;
    }

    nav a:not(.logo).active {
        color: var(--noir-absolu);
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.35),
            0 2px 4px rgba(199, 168, 109, 0.25);
    }

    /* Boutons sociaux dans nav */
    .nav-social {
        display: flex;
        align-items: center;
        gap: 4px;
        margin-left: 16px;
        padding-left: 16px;
        border-left: 1px solid rgba(10, 10, 10, 0.12);
    }

    .nav-social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: transparent;
        color: var(--text-primary);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
        position: relative;
    }

    .nav-social-link svg {
        width: 20px;
        height: 20px;
        stroke-width: 1.5;
    }

    .nav-social-link::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 50%;
        background: linear-gradient(135deg,
            var(--or-signature) 0%,
            var(--or-riche) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
    }

    .nav-social-link:hover {
        color: var(--noir-absolu);
        transform: translateY(-1px);
        box-shadow:
            0 4px 12px rgba(199, 168, 109, 0.3),
            0 2px 4px rgba(199, 168, 109, 0.2);
    }

    .nav-social-link:hover::before {
        opacity: 1;
    }

    /* ============================================
       MENU HAMBURGER MOBILE
       ============================================ */
    .menu-toggle {
        display: none;
        flex-direction: column;
        gap: 6px;
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 8px;
        z-index: 2002;
        position: relative;
        transition: all 0.3s ease;
    }

    .menu-toggle span {
        width: 28px;
        height: 2px;
        background: var(--or-signature);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 2px;
    }

    .menu-toggle.active span:nth-child(1) {
        transform: rotate(45deg) translate(8px, 8px);
    }

    .menu-toggle.active span:nth-child(2) {
        opacity: 0;
    }

    .menu-toggle.active span:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -7px);
    }

    /* Responsive Navigation */
    @media (max-width: 1024px) {
        nav .container {
            padding: 0 24px;
            position: relative;
        }

        .menu-toggle {
            display: flex;
            position: relative;
            z-index: 2002;
        }

        nav ul {
            position: fixed;
            top: 0;
            right: -100%;
            height: 100vh;
            width: 320px;
            max-width: 85vw;
            flex-direction: column;
            background: linear-gradient(180deg,
                var(--noir-absolu) 0%,
                var(--noir-surface) 100%);
            padding: 100px 32px 40px;
            gap: 0;
            border-radius: 0;
            border: none;
            border-left: 1px solid rgba(199, 168, 109, 0.2);
            box-shadow:
                -4px 0 24px rgba(0, 0, 0, 0.8),
                -8px 0 48px rgba(0, 0, 0, 0.5);
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
        }

        nav ul.active {
            right: 0;
        }

        nav li {
            width: 100%;
            margin-bottom: 12px;
        }

        nav a:not(.logo) {
            display: block;
            width: 100%;
            padding: 16px 20px;
            font-size: 15px;
            text-align: left;
            touch-action: manipulation;
            border-radius: 8px;
        }

        .nav-social {
            margin-left: 0;
            padding-left: 0;
            padding-top: 24px;
            margin-top: 24px;
            border-left: none;
            border-top: 1px solid rgba(199, 168, 109, 0.2);
            justify-content: flex-start;
            gap: 12px;
        }

        .nav-social-link {
            width: 42px;
            height: 42px;
        }

        .nav-social-link svg {
            width: 20px;
            height: 20px;
        }

        /* Overlay pour fermer le menu */
        .menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(4px);
            z-index: 1999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .menu-overlay.active {
            display: block;
            opacity: 1;
        }
    }

    @media (max-width: 768px) {
        nav {
            padding: 16px 0;
        }

        nav.scrolled {
            padding: 12px 0;
        }

        .logo {
            font-size: 22px;
        }

        nav.scrolled .logo {
            font-size: 20px;
        }

        nav ul {
            width: 280px;
            padding: 80px 24px 32px;
        }
    }
  </style>
        </head>
        <body>
  <div style="text-align: center; margin-bottom: 24pt;">
            <h1>VAMPIRES ÉNERGÉTIQUES</h1>
            <p style="font-size: 11pt; color: #666;">Typologie Relationnelle — Rapport d'Auto-Évaluation</p>
            <p style="font-size: 10pt; margin-top: 8pt;"><strong>Participant :</strong> ${state.anamnesis.name}</p>
            <p style="font-size: 10pt;"><strong>Date :</strong> ${new Date().toLocaleDateString('fr-FR', {year:'numeric', month:'long', day:'numeric'})}</p>
          </div>
          
          <div class="section">
            <h2>Synthèse Exécutive</h2>
            <div class="score-box">
              <div class="score-number">${scores.total}/${scores.maxTotal}</div>
              <div style="font-size: 14pt; margin-top: 8pt;">${scores.percentage}% — ${scores.band.level}</div>
            </div>
            <p>${scores.band.text}</p>
          </div>
          
          <div class="section">
            <h2>Analyse Dimensionnelle</h2>
            <table>
              <tr><th>Dimension</th><th>Score</th><th>Pourcentage</th></tr>
              ${Object.entries(scores.dimensions).sort((a,b) => b[1].percentage - a[1].percentage).map(([k,v]) => `
                <tr><td>${v.label}</td><td>${v.score}/${v.max}</td><td><strong>${v.percentage}%</strong></td></tr>
              `).join('')}
            </table>
          </div>
          
          <div class="section">
            <h2>Profil Contextuel</h2>
            <p><strong>Type de relation :</strong> ${state.anamnesis.type || 'Non spécifié'}</p>
            <p><strong>Durée approximative :</strong> ${state.anamnesis.dur || 'Non spécifiée'}</p>
          </div>
          
          <div class="section">
            <h2>Recommandations Personnalisées</h2>
            <ol>${generateRecommendations(scores).map(r => `<li>${r}</li>`).join('')}</ol>
          </div>
          
          <div class="section">
            <h2>Détail des Réponses</h2>
            ${DIMENSIONS.map(dim => `
              <h3 style="font-size: 12pt; margin-top: 12pt; color: ${dim.c};">${dim.fullLabel}</h3>
              <ul style="margin-left: 16pt;">
                ${QUESTIONS.filter(q => q.dim === dim.k).map(q => {
                  const ans = state.answers[q.id];
                  const opt = SCALE.find(s => s.v === ans);
                  return `<li style="margin-bottom: 6pt;"><strong>${q.text}</strong><br><em>Réponse : ${opt.l} (${opt.v})</em></li>`;
                }).join('')}
              </ul>
            `).join('')}
          </div>
          
          <div class="warning">
            <h3 style="font-size: 12pt; margin-bottom: 6pt;">⚠ Avertissement Important</h3>
            <p>Ce questionnaire constitue un outil de sensibilisation et ne remplace en aucun cas une consultation avec un professionnel qualifié. Les résultats reflètent votre perception subjective et nécessitent interprétation contextuelle.</p>
            <p><strong>Ressources :</strong> 3919 (Violences Femmes Info) • 119 (Enfance en Danger) • 3114 (Prévention Suicide)</p>
          </div>
          
          <div class="footer">
            <p><strong>NOÉSIS</strong> — Intelligence transdisciplinaire au service de la lucidité</p>
            <p>© ${new Date().getFullYear()} NOÉSIS — Tous droits réservés</p>
            <p>Outil de sensibilisation non diagnostique • Confidentialité : aucune collecte sans action explicite</p>
          </div>
        </body>
        </html>
      `);
      printWindow.document.close();
      setTimeout(() => printWindow.print(), 800);
    }
    
    // ============================================
    // EXPORT EMAIL
    // ============================================
    function generateEmail(scores) {
      const body = `
RAPPORT NOÉSIS — VAMPIRES ÉNERGÉTIQUES
Participant : ${state.anamnesis.name}
Généré le ${new Date().toLocaleDateString('fr-FR')}

SCORE TOTAL : ${scores.total}/${scores.maxTotal} (${scores.percentage}%)
NIVEAU : ${scores.band.level}

ANALYSE DIMENSIONNELLE :
${Object.entries(scores.dimensions).sort((a,b) => b[1].percentage - a[1].percentage).map(([k,v]) => `• ${v.label} : ${v.percentage}%`).join('\n')}

PROFIL :
• Type : ${state.anamnesis.type || 'Non spécifié'}
• Durée : ${state.anamnesis.dur || 'Non spécifiée'}

Pour consulter le rapport complet avec analyses approfondies, recommandations personnalisées et détail des réponses, veuillez télécharger la version PDF depuis l'interface NOÉSIS.

---
NOÉSIS — Intelligence transdisciplinaire
© ${new Date().getFullYear()} — Tous droits réservés
      `.trim();
      
      window.location.href = `mailto:?subject=${encodeURIComponent('Rapport Vampires Énergétiques — ' + state.anamnesis.name + ' — NOÉSIS')}&body=${encodeURIComponent(body)}`;
    }
    
    // ============================================
    // EXPORT JSON
    // ============================================
    function exportJSON(scores) {
      const data = {
        metadata: {
          test: "Vampires Énergétiques — Typologie Relationnelle",
          version: "2.0 - NOÉSIS",
          date: new Date().toISOString(),
          participant: state.anamnesis.name
        },
        anamnesis: state.anamnesis,
        responses: {
          answers: state.answers,
          completion: `${Object.keys(state.answers).length}/${QUESTIONS.length}`
        },
        scoring: {
          total: scores.total,
          maxTotal: scores.maxTotal,
          percentage: scores.percentage,
          dimensions: scores.dimensions,
          resultBand: scores.band
        },
        detailedResponses: QUESTIONS.map(q => ({
          id: q.id,
          dimension: q.dim,
          text: q.text,
          response: {
            value: state.answers[q.id],
            label: SCALE.find(s => s.v === state.answers[q.id])?.l,
            sublabel: SCALE.find(s => s.v === state.answers[q.id])?.s
          }
        }))
      };
      
      const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `vampires-energetiques-${state.anamnesis.name}-${Date.now()}.json`;
      a.click();
      URL.revokeObjectURL(url);
    }

    /* ========================================
       MENU HAMBURGER MOBILE - NAVIGATION
       ======================================== */
    // Navbar scroll effect
    window.addEventListener('scroll', () => {
      const navbar = document.getElementById('navbar');
      if (navbar && window.scrollY > 100) {
        navbar.classList.add('scrolled');
      } else if (navbar) {
        navbar.classList.remove('scrolled');
      }
    });

    // Menu hamburger mobile
    const menuToggle = document.getElementById('menuToggle');
    const navMenu = document.getElementById('navMenu');
    const menuOverlay = document.getElementById('menuOverlay');
    const body = document.body;

    function toggleMenu() {
      if (menuToggle && navMenu) {
        menuToggle.classList.toggle('active');
        navMenu.classList.toggle('active');
        if (menuOverlay) {
          menuOverlay.classList.toggle('active');
        }
        body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
      }
    }

    if (menuToggle) {
      menuToggle.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        toggleMenu();
      });
    }

    if (menuOverlay) {
      menuOverlay.addEventListener('click', toggleMenu);
    }

    // Fermer le menu quand on clique sur un lien
    if (navMenu) {
      const navLinks = navMenu.querySelectorAll('a');
      navLinks.forEach(link => {
        link.addEventListener('click', () => {
          if (window.innerWidth <= 1024) {
            setTimeout(toggleMenu, 100);
          }
        });
      });
    }

  </script>
  
</body>
</html>